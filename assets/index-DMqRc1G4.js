(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function n(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(l){if(l.ep)return;l.ep=!0;const u=n(l);fetch(l.href,u)}})();function Ab(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var dm={exports:{}},Qo={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mx;function sw(){if(Mx)return Qo;Mx=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,l,u){var f=null;if(u!==void 0&&(f=""+u),l.key!==void 0&&(f=""+l.key),"key"in l){u={};for(var p in l)p!=="key"&&(u[p]=l[p])}else u=l;return l=u.ref,{$$typeof:i,type:r,key:f,ref:l!==void 0?l:null,props:u}}return Qo.Fragment=e,Qo.jsx=n,Qo.jsxs=n,Qo}var Vx;function iw(){return Vx||(Vx=1,dm.exports=sw()),dm.exports}var c=iw(),hm={exports:{}},je={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Px;function rw(){if(Px)return je;Px=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),T=Symbol.iterator;function M(N){return N===null||typeof N!="object"?null:(N=T&&N[T]||N["@@iterator"],typeof N=="function"?N:null)}var F={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Y=Object.assign,G={};function ee(N,L,ae){this.props=N,this.context=L,this.refs=G,this.updater=ae||F}ee.prototype.isReactComponent={},ee.prototype.setState=function(N,L){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,L,"setState")},ee.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function ne(){}ne.prototype=ee.prototype;function le(N,L,ae){this.props=N,this.context=L,this.refs=G,this.updater=ae||F}var ue=le.prototype=new ne;ue.constructor=le,Y(ue,ee.prototype),ue.isPureReactComponent=!0;var De=Array.isArray;function se(){}var C={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function I(N,L,ae){var re=ae.ref;return{$$typeof:i,type:N,key:L,ref:re!==void 0?re:null,props:ae}}function k(N,L){return I(N.type,L,N.props)}function D(N){return typeof N=="object"&&N!==null&&N.$$typeof===i}function V(N){var L={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(ae){return L[ae]})}var R=/\/+/g;function et(N,L){return typeof N=="object"&&N!==null&&N.key!=null?V(""+N.key):L.toString(36)}function Ye(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(se,se):(N.status="pending",N.then(function(L){N.status==="pending"&&(N.status="fulfilled",N.value=L)},function(L){N.status==="pending"&&(N.status="rejected",N.reason=L)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function K(N,L,ae,re,he){var Ee=typeof N;(Ee==="undefined"||Ee==="boolean")&&(N=null);var Pe=!1;if(N===null)Pe=!0;else switch(Ee){case"bigint":case"string":case"number":Pe=!0;break;case"object":switch(N.$$typeof){case i:case e:Pe=!0;break;case _:return Pe=N._init,K(Pe(N._payload),L,ae,re,he)}}if(Pe)return he=he(N),Pe=re===""?"."+et(N,0):re,De(he)?(ae="",Pe!=null&&(ae=Pe.replace(R,"$&/")+"/"),K(he,L,ae,"",function(Mn){return Mn})):he!=null&&(D(he)&&(he=k(he,ae+(he.key==null||N&&N.key===he.key?"":(""+he.key).replace(R,"$&/")+"/")+Pe)),L.push(he)),1;Pe=0;var yt=re===""?".":re+":";if(De(N))for(var tt=0;tt<N.length;tt++)re=N[tt],Ee=yt+et(re,tt),Pe+=K(re,L,ae,Ee,he);else if(tt=M(N),typeof tt=="function")for(N=tt.call(N),tt=0;!(re=N.next()).done;)re=re.value,Ee=yt+et(re,tt++),Pe+=K(re,L,ae,Ee,he);else if(Ee==="object"){if(typeof N.then=="function")return K(Ye(N),L,ae,re,he);throw L=String(N),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.")}return Pe}function ce(N,L,ae){if(N==null)return N;var re=[],he=0;return K(N,re,"","",function(Ee){return L.call(ae,Ee,he++)}),re}function xe(N){if(N._status===-1){var L=N._result;L=L(),L.then(function(ae){(N._status===0||N._status===-1)&&(N._status=1,N._result=ae)},function(ae){(N._status===0||N._status===-1)&&(N._status=2,N._result=ae)}),N._status===-1&&(N._status=0,N._result=L)}if(N._status===1)return N._result.default;throw N._result}var Te=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var L=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(L))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)},ze={map:ce,forEach:function(N,L,ae){ce(N,function(){L.apply(this,arguments)},ae)},count:function(N){var L=0;return ce(N,function(){L++}),L},toArray:function(N){return ce(N,function(L){return L})||[]},only:function(N){if(!D(N))throw Error("React.Children.only expected to receive a single React element child.");return N}};return je.Activity=w,je.Children=ze,je.Component=ee,je.Fragment=n,je.Profiler=l,je.PureComponent=le,je.StrictMode=r,je.Suspense=x,je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,je.__COMPILER_RUNTIME={__proto__:null,c:function(N){return C.H.useMemoCache(N)}},je.cache=function(N){return function(){return N.apply(null,arguments)}},je.cacheSignal=function(){return null},je.cloneElement=function(N,L,ae){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var re=Y({},N.props),he=N.key;if(L!=null)for(Ee in L.key!==void 0&&(he=""+L.key),L)!A.call(L,Ee)||Ee==="key"||Ee==="__self"||Ee==="__source"||Ee==="ref"&&L.ref===void 0||(re[Ee]=L[Ee]);var Ee=arguments.length-2;if(Ee===1)re.children=ae;else if(1<Ee){for(var Pe=Array(Ee),yt=0;yt<Ee;yt++)Pe[yt]=arguments[yt+2];re.children=Pe}return I(N.type,he,re)},je.createContext=function(N){return N={$$typeof:f,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:u,_context:N},N},je.createElement=function(N,L,ae){var re,he={},Ee=null;if(L!=null)for(re in L.key!==void 0&&(Ee=""+L.key),L)A.call(L,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&(he[re]=L[re]);var Pe=arguments.length-2;if(Pe===1)he.children=ae;else if(1<Pe){for(var yt=Array(Pe),tt=0;tt<Pe;tt++)yt[tt]=arguments[tt+2];he.children=yt}if(N&&N.defaultProps)for(re in Pe=N.defaultProps,Pe)he[re]===void 0&&(he[re]=Pe[re]);return I(N,Ee,he)},je.createRef=function(){return{current:null}},je.forwardRef=function(N){return{$$typeof:p,render:N}},je.isValidElement=D,je.lazy=function(N){return{$$typeof:_,_payload:{_status:-1,_result:N},_init:xe}},je.memo=function(N,L){return{$$typeof:g,type:N,compare:L===void 0?null:L}},je.startTransition=function(N){var L=C.T,ae={};C.T=ae;try{var re=N(),he=C.S;he!==null&&he(ae,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then(se,Te)}catch(Ee){Te(Ee)}finally{L!==null&&ae.types!==null&&(L.types=ae.types),C.T=L}},je.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},je.use=function(N){return C.H.use(N)},je.useActionState=function(N,L,ae){return C.H.useActionState(N,L,ae)},je.useCallback=function(N,L){return C.H.useCallback(N,L)},je.useContext=function(N){return C.H.useContext(N)},je.useDebugValue=function(){},je.useDeferredValue=function(N,L){return C.H.useDeferredValue(N,L)},je.useEffect=function(N,L){return C.H.useEffect(N,L)},je.useEffectEvent=function(N){return C.H.useEffectEvent(N)},je.useId=function(){return C.H.useId()},je.useImperativeHandle=function(N,L,ae){return C.H.useImperativeHandle(N,L,ae)},je.useInsertionEffect=function(N,L){return C.H.useInsertionEffect(N,L)},je.useLayoutEffect=function(N,L){return C.H.useLayoutEffect(N,L)},je.useMemo=function(N,L){return C.H.useMemo(N,L)},je.useOptimistic=function(N,L){return C.H.useOptimistic(N,L)},je.useReducer=function(N,L,ae){return C.H.useReducer(N,L,ae)},je.useRef=function(N){return C.H.useRef(N)},je.useState=function(N){return C.H.useState(N)},je.useSyncExternalStore=function(N,L,ae){return C.H.useSyncExternalStore(N,L,ae)},je.useTransition=function(){return C.H.useTransition()},je.version="19.2.3",je}var Lx;function hp(){return Lx||(Lx=1,hm.exports=rw()),hm.exports}var Z=hp();const Cb=Ab(Z);var fm={exports:{}},Ko={},mm={exports:{}},pm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zx;function aw(){return zx||(zx=1,(function(i){function e(K,ce){var xe=K.length;K.push(ce);e:for(;0<xe;){var Te=xe-1>>>1,ze=K[Te];if(0<l(ze,ce))K[Te]=ce,K[xe]=ze,xe=Te;else break e}}function n(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var ce=K[0],xe=K.pop();if(xe!==ce){K[0]=xe;e:for(var Te=0,ze=K.length,N=ze>>>1;Te<N;){var L=2*(Te+1)-1,ae=K[L],re=L+1,he=K[re];if(0>l(ae,xe))re<ze&&0>l(he,ae)?(K[Te]=he,K[re]=xe,Te=re):(K[Te]=ae,K[L]=xe,Te=L);else if(re<ze&&0>l(he,xe))K[Te]=he,K[re]=xe,Te=re;else break e}}return ce}function l(K,ce){var xe=K.sortIndex-ce.sortIndex;return xe!==0?xe:K.id-ce.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var f=Date,p=f.now();i.unstable_now=function(){return f.now()-p}}var x=[],g=[],_=1,w=null,T=3,M=!1,F=!1,Y=!1,G=!1,ee=typeof setTimeout=="function"?setTimeout:null,ne=typeof clearTimeout=="function"?clearTimeout:null,le=typeof setImmediate<"u"?setImmediate:null;function ue(K){for(var ce=n(g);ce!==null;){if(ce.callback===null)r(g);else if(ce.startTime<=K)r(g),ce.sortIndex=ce.expirationTime,e(x,ce);else break;ce=n(g)}}function De(K){if(Y=!1,ue(K),!F)if(n(x)!==null)F=!0,se||(se=!0,V());else{var ce=n(g);ce!==null&&Ye(De,ce.startTime-K)}}var se=!1,C=-1,A=5,I=-1;function k(){return G?!0:!(i.unstable_now()-I<A)}function D(){if(G=!1,se){var K=i.unstable_now();I=K;var ce=!0;try{e:{F=!1,Y&&(Y=!1,ne(C),C=-1),M=!0;var xe=T;try{t:{for(ue(K),w=n(x);w!==null&&!(w.expirationTime>K&&k());){var Te=w.callback;if(typeof Te=="function"){w.callback=null,T=w.priorityLevel;var ze=Te(w.expirationTime<=K);if(K=i.unstable_now(),typeof ze=="function"){w.callback=ze,ue(K),ce=!0;break t}w===n(x)&&r(x),ue(K)}else r(x);w=n(x)}if(w!==null)ce=!0;else{var N=n(g);N!==null&&Ye(De,N.startTime-K),ce=!1}}break e}finally{w=null,T=xe,M=!1}ce=void 0}}finally{ce?V():se=!1}}}var V;if(typeof le=="function")V=function(){le(D)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,et=R.port2;R.port1.onmessage=D,V=function(){et.postMessage(null)}}else V=function(){ee(D,0)};function Ye(K,ce){C=ee(function(){K(i.unstable_now())},ce)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(K){K.callback=null},i.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<K?Math.floor(1e3/K):5},i.unstable_getCurrentPriorityLevel=function(){return T},i.unstable_next=function(K){switch(T){case 1:case 2:case 3:var ce=3;break;default:ce=T}var xe=T;T=ce;try{return K()}finally{T=xe}},i.unstable_requestPaint=function(){G=!0},i.unstable_runWithPriority=function(K,ce){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var xe=T;T=K;try{return ce()}finally{T=xe}},i.unstable_scheduleCallback=function(K,ce,xe){var Te=i.unstable_now();switch(typeof xe=="object"&&xe!==null?(xe=xe.delay,xe=typeof xe=="number"&&0<xe?Te+xe:Te):xe=Te,K){case 1:var ze=-1;break;case 2:ze=250;break;case 5:ze=1073741823;break;case 4:ze=1e4;break;default:ze=5e3}return ze=xe+ze,K={id:_++,callback:ce,priorityLevel:K,startTime:xe,expirationTime:ze,sortIndex:-1},xe>Te?(K.sortIndex=xe,e(g,K),n(x)===null&&K===n(g)&&(Y?(ne(C),C=-1):Y=!0,Ye(De,xe-Te))):(K.sortIndex=ze,e(x,K),F||M||(F=!0,se||(se=!0,V()))),K},i.unstable_shouldYield=k,i.unstable_wrapCallback=function(K){var ce=T;return function(){var xe=T;T=ce;try{return K.apply(this,arguments)}finally{T=xe}}}})(pm)),pm}var Ux;function lw(){return Ux||(Ux=1,mm.exports=aw()),mm.exports}var gm={exports:{}},hn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bx;function ow(){if(Bx)return hn;Bx=1;var i=hp();function e(x){var g="https://react.dev/errors/"+x;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)g+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+x+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(x,g,_){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:w==null?null:""+w,children:x,containerInfo:g,implementation:_}}var f=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(x,g){if(x==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return hn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,hn.createPortal=function(x,g){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return u(x,g,null,_)},hn.flushSync=function(x){var g=f.T,_=r.p;try{if(f.T=null,r.p=2,x)return x()}finally{f.T=g,r.p=_,r.d.f()}},hn.preconnect=function(x,g){typeof x=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,r.d.C(x,g))},hn.prefetchDNS=function(x){typeof x=="string"&&r.d.D(x)},hn.preinit=function(x,g){if(typeof x=="string"&&g&&typeof g.as=="string"){var _=g.as,w=p(_,g.crossOrigin),T=typeof g.integrity=="string"?g.integrity:void 0,M=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;_==="style"?r.d.S(x,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:w,integrity:T,fetchPriority:M}):_==="script"&&r.d.X(x,{crossOrigin:w,integrity:T,fetchPriority:M,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},hn.preinitModule=function(x,g){if(typeof x=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var _=p(g.as,g.crossOrigin);r.d.M(x,{crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&r.d.M(x)},hn.preload=function(x,g){if(typeof x=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var _=g.as,w=p(_,g.crossOrigin);r.d.L(x,_,{crossOrigin:w,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},hn.preloadModule=function(x,g){if(typeof x=="string")if(g){var _=p(g.as,g.crossOrigin);r.d.m(x,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else r.d.m(x)},hn.requestFormReset=function(x){r.d.r(x)},hn.unstable_batchedUpdates=function(x,g){return x(g)},hn.useFormState=function(x,g,_){return f.H.useFormState(x,g,_)},hn.useFormStatus=function(){return f.H.useHostTransitionStatus()},hn.version="19.2.3",hn}var qx;function Rb(){if(qx)return gm.exports;qx=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),gm.exports=ow(),gm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hx;function cw(){if(Hx)return Ko;Hx=1;var i=lw(),e=hp(),n=Rb();function r(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var s=t,a=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(a=s.return),t=s.return;while(t)}return s.tag===3?a:null}function f(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function p(t){if(t.tag===31){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function x(t){if(u(t)!==t)throw Error(r(188))}function g(t){var s=t.alternate;if(!s){if(s=u(t),s===null)throw Error(r(188));return s!==t?null:t}for(var a=t,o=s;;){var h=a.return;if(h===null)break;var m=h.alternate;if(m===null){if(o=h.return,o!==null){a=o;continue}break}if(h.child===m.child){for(m=h.child;m;){if(m===a)return x(h),t;if(m===o)return x(h),s;m=m.sibling}throw Error(r(188))}if(a.return!==o.return)a=h,o=m;else{for(var v=!1,E=h.child;E;){if(E===a){v=!0,a=h,o=m;break}if(E===o){v=!0,o=h,a=m;break}E=E.sibling}if(!v){for(E=m.child;E;){if(E===a){v=!0,a=m,o=h;break}if(E===o){v=!0,o=m,a=h;break}E=E.sibling}if(!v)throw Error(r(189))}}if(a.alternate!==o)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?t:s}function _(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=_(t),s!==null)return s;t=t.sibling}return null}var w=Object.assign,T=Symbol.for("react.element"),M=Symbol.for("react.transitional.element"),F=Symbol.for("react.portal"),Y=Symbol.for("react.fragment"),G=Symbol.for("react.strict_mode"),ee=Symbol.for("react.profiler"),ne=Symbol.for("react.consumer"),le=Symbol.for("react.context"),ue=Symbol.for("react.forward_ref"),De=Symbol.for("react.suspense"),se=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function V(t){return t===null||typeof t!="object"?null:(t=D&&t[D]||t["@@iterator"],typeof t=="function"?t:null)}var R=Symbol.for("react.client.reference");function et(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===R?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Y:return"Fragment";case ee:return"Profiler";case G:return"StrictMode";case De:return"Suspense";case se:return"SuspenseList";case I:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case F:return"Portal";case le:return t.displayName||"Context";case ne:return(t._context.displayName||"Context")+".Consumer";case ue:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case C:return s=t.displayName||null,s!==null?s:et(t.type)||"Memo";case A:s=t._payload,t=t._init;try{return et(t(s))}catch{}}return null}var Ye=Array.isArray,K=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,xe={pending:!1,data:null,method:null,action:null},Te=[],ze=-1;function N(t){return{current:t}}function L(t){0>ze||(t.current=Te[ze],Te[ze]=null,ze--)}function ae(t,s){ze++,Te[ze]=t.current,t.current=s}var re=N(null),he=N(null),Ee=N(null),Pe=N(null);function yt(t,s){switch(ae(Ee,s),ae(he,t),ae(re,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?ix(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=ix(s),t=rx(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}L(re),ae(re,t)}function tt(){L(re),L(he),L(Ee)}function Mn(t){t.memoizedState!==null&&ae(Pe,t);var s=re.current,a=rx(s,t.type);s!==a&&(ae(he,t),ae(re,a))}function Yt(t){he.current===t&&(L(re),L(he)),Pe.current===t&&(L(Pe),qo._currentValue=xe)}var Vn,Ns;function kt(t){if(Vn===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);Vn=s&&s[1]||"",Ns=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Vn+t+Ns}var As=!1;function En(t,s){if(!t||As)return"";As=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(s){var W=function(){throw Error()};if(Object.defineProperty(W.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(W,[])}catch(Q){var q=Q}Reflect.construct(t,[],W)}else{try{W.call()}catch(Q){q=Q}t.call(W.prototype)}}else{try{throw Error()}catch(Q){q=Q}(W=t())&&typeof W.catch=="function"&&W.catch(function(){})}}catch(Q){if(Q&&q&&typeof Q.stack=="string")return[Q.stack,q.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=o.DetermineComponentFrameRoot(),v=m[0],E=m[1];if(v&&E){var j=v.split(`
`),B=E.split(`
`);for(h=o=0;o<j.length&&!j[o].includes("DetermineComponentFrameRoot");)o++;for(;h<B.length&&!B[h].includes("DetermineComponentFrameRoot");)h++;if(o===j.length||h===B.length)for(o=j.length-1,h=B.length-1;1<=o&&0<=h&&j[o]!==B[h];)h--;for(;1<=o&&0<=h;o--,h--)if(j[o]!==B[h]){if(o!==1||h!==1)do if(o--,h--,0>h||j[o]!==B[h]){var $=`
`+j[o].replace(" at new "," at ");return t.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",t.displayName)),$}while(1<=o&&0<=h);break}}}finally{As=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?kt(a):""}function Oi(t,s){switch(t.tag){case 26:case 27:case 5:return kt(t.type);case 16:return kt("Lazy");case 13:return t.child!==s&&s!==null?kt("Suspense Fallback"):kt("Suspense");case 19:return kt("SuspenseList");case 0:case 15:return En(t.type,!1);case 11:return En(t.type.render,!1);case 1:return En(t.type,!0);case 31:return kt("Activity");default:return""}}function ki(t){try{var s="",a=null;do s+=Oi(t,a),a=t,t=t.return;while(t);return s}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var bt=Object.prototype.hasOwnProperty,wt=i.unstable_scheduleCallback,$n=i.unstable_cancelCallback,ja=i.unstable_shouldYield,zr=i.unstable_requestPaint,tn=i.unstable_now,Cs=i.unstable_getCurrentPriorityLevel,Mi=i.unstable_ImmediatePriority,Vi=i.unstable_UserBlockingPriority,wn=i.unstable_NormalPriority,Gl=i.unstable_LowPriority,Ia=i.unstable_IdlePriority,Da=i.log,Ur=i.unstable_setDisableYieldValue,Pn=null,At=null;function Sn(t){if(typeof Da=="function"&&Ur(t),At&&typeof At.setStrictMode=="function")try{At.setStrictMode(Pn,t)}catch{}}var _t=Math.clz32?Math.clz32:Ne,ds=Math.log,ie=Math.LN2;function Ne(t){return t>>>=0,t===0?32:31-(ds(t)/ie|0)|0}var pe=256,Oe=262144,Re=4194304;function Ct(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function $t(t,s,a){var o=t.pendingLanes;if(o===0)return 0;var h=0,m=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var E=o&134217727;return E!==0?(o=E&~m,o!==0?h=Ct(o):(v&=E,v!==0?h=Ct(v):a||(a=E&~t,a!==0&&(h=Ct(a))))):(E=o&~m,E!==0?h=Ct(E):v!==0?h=Ct(v):a||(a=o&~t,a!==0&&(h=Ct(a)))),h===0?0:s!==0&&s!==h&&(s&m)===0&&(m=h&-h,a=s&-s,m>=a||m===32&&(a&4194048)!==0)?s:h}function Mt(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function dn(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Oc(){var t=Re;return Re<<=1,(Re&62914560)===0&&(Re=4194304),t}function Rs(t){for(var s=[],a=0;31>a;a++)s.push(t);return s}function Br(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function ph(t,s,a,o,h,m){var v=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var E=t.entanglements,j=t.expirationTimes,B=t.hiddenUpdates;for(a=v&~a;0<a;){var $=31-_t(a),W=1<<$;E[$]=0,j[$]=-1;var q=B[$];if(q!==null)for(B[$]=null,$=0;$<q.length;$++){var Q=q[$];Q!==null&&(Q.lane&=-536870913)}a&=~W}o!==0&&qr(t,o,0),m!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=m&~(v&~s))}function qr(t,s,a){t.pendingLanes|=s,t.suspendedLanes&=~s;var o=31-_t(s);t.entangledLanes|=s,t.entanglements[o]=t.entanglements[o]|1073741824|a&261930}function Ql(t,s){var a=t.entangledLanes|=s;for(t=t.entanglements;a;){var o=31-_t(a),h=1<<o;h&s|t[o]&s&&(t[o]|=s),a&=~h}}function Kl(t,s){var a=s&-s;return a=(a&42)!==0?1:Hr(a),(a&(t.suspendedLanes|s))!==0?0:a}function Hr(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function ii(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function kc(){var t=ce.p;return t!==0?t:(t=window.event,t===void 0?32:Cx(t.type))}function hs(t,s){var a=ce.p;try{return ce.p=t,s()}finally{ce.p=a}}var fs=Math.random().toString(36).slice(2),Vt="__reactFiber$"+fs,Xt="__reactProps$"+fs,js="__reactContainer$"+fs,Oa="__reactEvents$"+fs,gh="__reactListeners$"+fs,Mc="__reactHandles$"+fs,Vc="__reactResources$"+fs,Is="__reactMarker$"+fs;function ka(t){delete t[Vt],delete t[Xt],delete t[Oa],delete t[gh],delete t[Mc]}function Ds(t){var s=t[Vt];if(s)return s;for(var a=t.parentNode;a;){if(s=a[js]||a[Vt]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(t=hx(t);t!==null;){if(a=t[Vt])return a;t=hx(t)}return s}t=a,a=t.parentNode}return null}function Xn(t){if(t=t[Vt]||t[js]){var s=t.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return t}return null}function Ln(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(r(33))}function Os(t){var s=t[Vc];return s||(s=t[Vc]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Pt(t){t[Is]=!0}var Yl=new Set,$l={};function ks(t,s){Ms(t,s),Ms(t+"Capture",s)}function Ms(t,s){for($l[t]=s,t=0;t<s.length;t++)Yl.add(s[t])}var Xl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Jl={},Zl={};function Pc(t){return bt.call(Zl,t)?!0:bt.call(Jl,t)?!1:Xl.test(t)?Zl[t]=!0:(Jl[t]=!0,!1)}function Ma(t,s,a){if(Pc(s))if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var o=s.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+a)}}function zn(t,s,a){if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+a)}}function Lt(t,s,a,o){if(o===null)t.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(s,a,""+o)}}function Jt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Pi(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Wl(t,s,a){var o=Object.getOwnPropertyDescriptor(t.constructor.prototype,s);if(!t.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,m=o.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return h.call(this)},set:function(v){a=""+v,m.call(this,v)}}),Object.defineProperty(t,s,{enumerable:o.enumerable}),{getValue:function(){return a},setValue:function(v){a=""+v},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function rt(t){if(!t._valueTracker){var s=Pi(t)?"checked":"value";t._valueTracker=Wl(t,s,""+t[s])}}function Fr(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var a=s.getValue(),o="";return t&&(o=Pi(t)?t.checked?"true":"false":t.value),t=o,t!==a?(s.setValue(t),!0):!1}function Vs(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Gr=/[\n"\\]/g;function Tn(t){return t.replace(Gr,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Va(t,s,a,o,h,m,v,E){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),s!=null?v==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+Jt(s)):t.value!==""+Jt(s)&&(t.value=""+Jt(s)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),s!=null?eo(t,v,Jt(s)):a!=null?eo(t,v,Jt(a)):o!=null&&t.removeAttribute("value"),h==null&&m!=null&&(t.defaultChecked=!!m),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.name=""+Jt(E):t.removeAttribute("name")}function Lc(t,s,a,o,h,m,v,E){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),s!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||s!=null)){rt(t);return}a=a!=null?""+Jt(a):"",s=s!=null?""+Jt(s):a,E||s===t.value||(t.value=s),t.defaultValue=s}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=E?t.checked:!!o,t.defaultChecked=!!o,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v),rt(t)}function eo(t,s,a){s==="number"&&Vs(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Li(t,s,a,o){if(t=t.options,s){s={};for(var h=0;h<a.length;h++)s["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=s.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&o&&(t[a].defaultSelected=!0)}else{for(a=""+Jt(a),s=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,o&&(t[h].defaultSelected=!0);return}s!==null||t[h].disabled||(s=t[h])}s!==null&&(s.selected=!0)}}function zc(t,s,a){if(s!=null&&(s=""+Jt(s),s!==t.value&&(t.value=s),a==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=a!=null?""+Jt(a):""}function zi(t,s,a,o){if(s==null){if(o!=null){if(a!=null)throw Error(r(92));if(Ye(o)){if(1<o.length)throw Error(r(93));o=o[0]}a=o}a==null&&(a=""),s=a}a=Jt(s),t.defaultValue=a,o=t.textContent,o===a&&o!==""&&o!==null&&(t.value=o),rt(t)}function Nn(t,s){if(s){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=s;return}}t.textContent=s}var Uc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function to(t,s,a){var o=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":o?t.setProperty(s,a):typeof a!="number"||a===0||Uc.has(s)?s==="float"?t.cssFloat=a:t[s]=(""+a).trim():t[s]=a+"px"}function no(t,s,a){if(s!=null&&typeof s!="object")throw Error(r(62));if(t=t.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||s!=null&&s.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var h in s)o=s[h],s.hasOwnProperty(h)&&a[h]!==o&&to(t,h,o)}else for(var m in s)s.hasOwnProperty(m)&&to(t,m,s[m])}function Pa(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ui=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function La(t){return Ui.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function ms(){}var so=null;function Jn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Bi=null,Ps=null;function Qr(t){var s=Xn(t);if(s&&(t=s.stateNode)){var a=t[Xt]||null;e:switch(t=s.stateNode,s.type){case"input":if(Va(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Tn(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var o=a[s];if(o!==t&&o.form===t.form){var h=o[Xt]||null;if(!h)throw Error(r(90));Va(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(s=0;s<a.length;s++)o=a[s],o.form===t.form&&Fr(o)}break e;case"textarea":zc(t,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&Li(t,!!a.multiple,s,!1)}}}var za=!1;function qi(t,s,a){if(za)return t(s,a);za=!0;try{var o=t(s);return o}finally{if(za=!1,(Bi!==null||Ps!==null)&&(ku(),Bi&&(s=Bi,t=Ps,Ps=Bi=null,Qr(s),t)))for(s=0;s<t.length;s++)Qr(t[s])}}function ps(t,s){var a=t.stateNode;if(a===null)return null;var o=a[Xt]||null;if(o===null)return null;a=o[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(r(231,s,typeof a));return a}var Zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Kr=!1;if(Zn)try{var ot={};Object.defineProperty(ot,"passive",{get:function(){Kr=!0}}),window.addEventListener("test",ot,ot),window.removeEventListener("test",ot,ot)}catch{Kr=!1}var Ls=null,io=null,Yr=null;function ro(){if(Yr)return Yr;var t,s=io,a=s.length,o,h="value"in Ls?Ls.value:Ls.textContent,m=h.length;for(t=0;t<a&&s[t]===h[t];t++);var v=a-t;for(o=1;o<=v&&s[a-o]===h[m-o];o++);return Yr=h.slice(t,1<o?1-o:void 0)}function $r(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function ri(){return!0}function gs(){return!1}function nn(t){function s(a,o,h,m,v){this._reactName=a,this._targetInst=h,this.type=o,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var E in t)t.hasOwnProperty(E)&&(a=t[E],this[E]=a?a(m):m[E]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?ri:gs,this.isPropagationStopped=gs,this}return w(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ri)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ri)},persist:function(){},isPersistent:ri}),s}var ai={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zs=nn(ai),Hi=w({},ai,{view:0,detail:0}),ao=nn(Hi),Fi,Ua,Us,Ba=w({},Hi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gi,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Us&&(Us&&t.type==="mousemove"?(Fi=t.screenX-Us.screenX,Ua=t.screenY-Us.screenY):Ua=Fi=0,Us=t),Fi)},movementY:function(t){return"movementY"in t?t.movementY:Ua}}),lo=nn(Ba),Xr=w({},Ba,{dataTransfer:0}),qc=nn(Xr),Hc=w({},Hi,{relatedTarget:0}),Jr=nn(Hc),oo=w({},ai,{animationName:0,elapsedTime:0,pseudoElement:0}),Fc=nn(oo),qa=w({},ai,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Gc=nn(qa),Qc=w({},ai,{data:0}),Bs=nn(Qc),Kc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$c={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xc(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=$c[t])?!!s[t]:!1}function Gi(){return Xc}var xn=w({},Hi,{key:function(t){if(t.key){var s=Kc[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=$r(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Yc[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gi,charCode:function(t){return t.type==="keypress"?$r(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?$r(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Jc=nn(xn),Zc=w({},Ba,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),li=nn(Zc),d=w({},Hi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gi}),y=nn(d),b=w({},ai,{propertyName:0,elapsedTime:0,pseudoElement:0}),S=nn(b),z=w({},Ba,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),H=nn(z),oe=w({},ai,{newState:0,oldState:0}),Me=nn(oe),Rt=[9,13,27,32],nt=Zn&&"CompositionEvent"in window,xt=null;Zn&&"documentMode"in document&&(xt=document.documentMode);var Wn=Zn&&"TextEvent"in window&&!xt,qs=Zn&&(!nt||xt&&8<xt&&11>=xt),ys=" ",xs=!1;function Zr(t,s){switch(t){case"keyup":return Rt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ha(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Fa=!1;function AE(t,s){switch(t){case"compositionend":return Ha(s);case"keypress":return s.which!==32?null:(xs=!0,ys);case"textInput":return t=s.data,t===ys&&xs?null:t;default:return null}}function CE(t,s){if(Fa)return t==="compositionend"||!nt&&Zr(t,s)?(t=ro(),Yr=io=Ls=null,Fa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return qs&&s.locale!=="ko"?null:s.data;default:return null}}var RE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pg(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!RE[t.type]:s==="textarea"}function gg(t,s,a,o){Bi?Ps?Ps.push(o):Ps=[o]:Bi=o,s=Bu(s,"onChange"),0<s.length&&(a=new zs("onChange","change",null,a,o),t.push({event:a,listeners:s}))}var co=null,uo=null;function jE(t){Zy(t,0)}function Wc(t){var s=Ln(t);if(Fr(s))return t}function yg(t,s){if(t==="change")return s}var xg=!1;if(Zn){var yh;if(Zn){var xh="oninput"in document;if(!xh){var vg=document.createElement("div");vg.setAttribute("oninput","return;"),xh=typeof vg.oninput=="function"}yh=xh}else yh=!1;xg=yh&&(!document.documentMode||9<document.documentMode)}function bg(){co&&(co.detachEvent("onpropertychange",_g),uo=co=null)}function _g(t){if(t.propertyName==="value"&&Wc(uo)){var s=[];gg(s,uo,t,Jn(t)),qi(jE,s)}}function IE(t,s,a){t==="focusin"?(bg(),co=s,uo=a,co.attachEvent("onpropertychange",_g)):t==="focusout"&&bg()}function DE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Wc(uo)}function OE(t,s){if(t==="click")return Wc(s)}function kE(t,s){if(t==="input"||t==="change")return Wc(s)}function ME(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var Un=typeof Object.is=="function"?Object.is:ME;function ho(t,s){if(Un(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var a=Object.keys(t),o=Object.keys(s);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var h=a[o];if(!bt.call(s,h)||!Un(t[h],s[h]))return!1}return!0}function Eg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function wg(t,s){var a=Eg(t);t=0;for(var o;a;){if(a.nodeType===3){if(o=t+a.textContent.length,t<=s&&o>=s)return{node:a,offset:s-t};t=o}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Eg(a)}}function Sg(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?Sg(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function Tg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=Vs(t.document);s instanceof t.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)t=s.contentWindow;else break;s=Vs(t.document)}return s}function vh(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var VE=Zn&&"documentMode"in document&&11>=document.documentMode,Ga=null,bh=null,fo=null,_h=!1;function Ng(t,s,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;_h||Ga==null||Ga!==Vs(o)||(o=Ga,"selectionStart"in o&&vh(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),fo&&ho(fo,o)||(fo=o,o=Bu(bh,"onSelect"),0<o.length&&(s=new zs("onSelect","select",null,s,a),t.push({event:s,listeners:o}),s.target=Ga)))}function Wr(t,s){var a={};return a[t.toLowerCase()]=s.toLowerCase(),a["Webkit"+t]="webkit"+s,a["Moz"+t]="moz"+s,a}var Qa={animationend:Wr("Animation","AnimationEnd"),animationiteration:Wr("Animation","AnimationIteration"),animationstart:Wr("Animation","AnimationStart"),transitionrun:Wr("Transition","TransitionRun"),transitionstart:Wr("Transition","TransitionStart"),transitioncancel:Wr("Transition","TransitionCancel"),transitionend:Wr("Transition","TransitionEnd")},Eh={},Ag={};Zn&&(Ag=document.createElement("div").style,"AnimationEvent"in window||(delete Qa.animationend.animation,delete Qa.animationiteration.animation,delete Qa.animationstart.animation),"TransitionEvent"in window||delete Qa.transitionend.transition);function ea(t){if(Eh[t])return Eh[t];if(!Qa[t])return t;var s=Qa[t],a;for(a in s)if(s.hasOwnProperty(a)&&a in Ag)return Eh[t]=s[a];return t}var Cg=ea("animationend"),Rg=ea("animationiteration"),jg=ea("animationstart"),PE=ea("transitionrun"),LE=ea("transitionstart"),zE=ea("transitioncancel"),Ig=ea("transitionend"),Dg=new Map,wh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");wh.push("scrollEnd");function vs(t,s){Dg.set(t,s),ks(s,[t])}var eu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},es=[],Ka=0,Sh=0;function tu(){for(var t=Ka,s=Sh=Ka=0;s<t;){var a=es[s];es[s++]=null;var o=es[s];es[s++]=null;var h=es[s];es[s++]=null;var m=es[s];if(es[s++]=null,o!==null&&h!==null){var v=o.pending;v===null?h.next=h:(h.next=v.next,v.next=h),o.pending=h}m!==0&&Og(a,h,m)}}function nu(t,s,a,o){es[Ka++]=t,es[Ka++]=s,es[Ka++]=a,es[Ka++]=o,Sh|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function Th(t,s,a,o){return nu(t,s,a,o),su(t)}function ta(t,s){return nu(t,null,null,s),su(t)}function Og(t,s,a){t.lanes|=a;var o=t.alternate;o!==null&&(o.lanes|=a);for(var h=!1,m=t.return;m!==null;)m.childLanes|=a,o=m.alternate,o!==null&&(o.childLanes|=a),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(h=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,h&&s!==null&&(h=31-_t(a),t=m.hiddenUpdates,o=t[h],o===null?t[h]=[s]:o.push(s),s.lane=a|536870912),m):null}function su(t){if(50<Mo)throw Mo=0,Mf=null,Error(r(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var Ya={};function UE(t,s,a,o){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bn(t,s,a,o){return new UE(t,s,a,o)}function Nh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function oi(t,s){var a=t.alternate;return a===null?(a=Bn(t.tag,s,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=s,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,s=t.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function kg(t,s){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,s=a.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function iu(t,s,a,o,h,m){var v=0;if(o=t,typeof t=="function")Nh(t)&&(v=1);else if(typeof t=="string")v=G2(t,a,re.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case I:return t=Bn(31,a,s,h),t.elementType=I,t.lanes=m,t;case Y:return na(a.children,h,m,s);case G:v=8,h|=24;break;case ee:return t=Bn(12,a,s,h|2),t.elementType=ee,t.lanes=m,t;case De:return t=Bn(13,a,s,h),t.elementType=De,t.lanes=m,t;case se:return t=Bn(19,a,s,h),t.elementType=se,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case le:v=10;break e;case ne:v=9;break e;case ue:v=11;break e;case C:v=14;break e;case A:v=16,o=null;break e}v=29,a=Error(r(130,t===null?"null":typeof t,"")),o=null}return s=Bn(v,a,s,h),s.elementType=t,s.type=o,s.lanes=m,s}function na(t,s,a,o){return t=Bn(7,t,o,s),t.lanes=a,t}function Ah(t,s,a){return t=Bn(6,t,null,s),t.lanes=a,t}function Mg(t){var s=Bn(18,null,null,0);return s.stateNode=t,s}function Ch(t,s,a){return s=Bn(4,t.children!==null?t.children:[],t.key,s),s.lanes=a,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var Vg=new WeakMap;function ts(t,s){if(typeof t=="object"&&t!==null){var a=Vg.get(t);return a!==void 0?a:(s={value:t,source:s,stack:ki(s)},Vg.set(t,s),s)}return{value:t,source:s,stack:ki(s)}}var $a=[],Xa=0,ru=null,mo=0,ns=[],ss=0,Qi=null,Hs=1,Fs="";function ci(t,s){$a[Xa++]=mo,$a[Xa++]=ru,ru=t,mo=s}function Pg(t,s,a){ns[ss++]=Hs,ns[ss++]=Fs,ns[ss++]=Qi,Qi=t;var o=Hs;t=Fs;var h=32-_t(o)-1;o&=~(1<<h),a+=1;var m=32-_t(s)+h;if(30<m){var v=h-h%5;m=(o&(1<<v)-1).toString(32),o>>=v,h-=v,Hs=1<<32-_t(s)+h|a<<h|o,Fs=m+t}else Hs=1<<m|a<<h|o,Fs=t}function Rh(t){t.return!==null&&(ci(t,1),Pg(t,1,0))}function jh(t){for(;t===ru;)ru=$a[--Xa],$a[Xa]=null,mo=$a[--Xa],$a[Xa]=null;for(;t===Qi;)Qi=ns[--ss],ns[ss]=null,Fs=ns[--ss],ns[ss]=null,Hs=ns[--ss],ns[ss]=null}function Lg(t,s){ns[ss++]=Hs,ns[ss++]=Fs,ns[ss++]=Qi,Hs=s.id,Fs=s.overflow,Qi=t}var sn=null,mt=null,$e=!1,Ki=null,is=!1,Ih=Error(r(519));function Yi(t){var s=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw po(ts(s,t)),Ih}function zg(t){var s=t.stateNode,a=t.type,o=t.memoizedProps;switch(s[Vt]=t,s[Xt]=o,a){case"dialog":Be("cancel",s),Be("close",s);break;case"iframe":case"object":case"embed":Be("load",s);break;case"video":case"audio":for(a=0;a<Po.length;a++)Be(Po[a],s);break;case"source":Be("error",s);break;case"img":case"image":case"link":Be("error",s),Be("load",s);break;case"details":Be("toggle",s);break;case"input":Be("invalid",s),Lc(s,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":Be("invalid",s);break;case"textarea":Be("invalid",s),zi(s,o.value,o.defaultValue,o.children)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||o.suppressHydrationWarning===!0||nx(s.textContent,a)?(o.popover!=null&&(Be("beforetoggle",s),Be("toggle",s)),o.onScroll!=null&&Be("scroll",s),o.onScrollEnd!=null&&Be("scrollend",s),o.onClick!=null&&(s.onclick=ms),s=!0):s=!1,s||Yi(t,!0)}function Ug(t){for(sn=t.return;sn;)switch(sn.tag){case 5:case 31:case 13:is=!1;return;case 27:case 3:is=!0;return;default:sn=sn.return}}function Ja(t){if(t!==sn)return!1;if(!$e)return Ug(t),$e=!0,!1;var s=t.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Xf(t.type,t.memoizedProps)),a=!a),a&&mt&&Yi(t),Ug(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));mt=dx(t)}else if(s===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));mt=dx(t)}else s===27?(s=mt,or(t.type)?(t=tm,tm=null,mt=t):mt=s):mt=sn?as(t.stateNode.nextSibling):null;return!0}function sa(){mt=sn=null,$e=!1}function Dh(){var t=Ki;return t!==null&&(jn===null?jn=t:jn.push.apply(jn,t),Ki=null),t}function po(t){Ki===null?Ki=[t]:Ki.push(t)}var Oh=N(null),ia=null,ui=null;function $i(t,s,a){ae(Oh,s._currentValue),s._currentValue=a}function di(t){t._currentValue=Oh.current,L(Oh)}function kh(t,s,a){for(;t!==null;){var o=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,o!==null&&(o.childLanes|=s)):o!==null&&(o.childLanes&s)!==s&&(o.childLanes|=s),t===a)break;t=t.return}}function Mh(t,s,a,o){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var m=h.dependencies;if(m!==null){var v=h.child;m=m.firstContext;e:for(;m!==null;){var E=m;m=h;for(var j=0;j<s.length;j++)if(E.context===s[j]){m.lanes|=a,E=m.alternate,E!==null&&(E.lanes|=a),kh(m.return,a,t),o||(v=null);break e}m=E.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(r(341));v.lanes|=a,m=v.alternate,m!==null&&(m.lanes|=a),kh(v,a,t),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===t){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function Za(t,s,a,o){t=null;for(var h=s,m=!1;h!==null;){if(!m){if((h.flags&524288)!==0)m=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(r(387));if(v=v.memoizedProps,v!==null){var E=h.type;Un(h.pendingProps.value,v.value)||(t!==null?t.push(E):t=[E])}}else if(h===Pe.current){if(v=h.alternate,v===null)throw Error(r(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(qo):t=[qo])}h=h.return}t!==null&&Mh(s,t,a,o),s.flags|=262144}function au(t){for(t=t.firstContext;t!==null;){if(!Un(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ra(t){ia=t,ui=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function rn(t){return Bg(ia,t)}function lu(t,s){return ia===null&&ra(t),Bg(t,s)}function Bg(t,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},ui===null){if(t===null)throw Error(r(308));ui=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else ui=ui.next=s;return a}var BE=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(a,o){t.push(o)}};this.abort=function(){s.aborted=!0,t.forEach(function(a){return a()})}},qE=i.unstable_scheduleCallback,HE=i.unstable_NormalPriority,zt={$$typeof:le,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Vh(){return{controller:new BE,data:new Map,refCount:0}}function go(t){t.refCount--,t.refCount===0&&qE(HE,function(){t.controller.abort()})}var yo=null,Ph=0,Wa=0,el=null;function FE(t,s){if(yo===null){var a=yo=[];Ph=0,Wa=Bf(),el={status:"pending",value:void 0,then:function(o){a.push(o)}}}return Ph++,s.then(qg,qg),s}function qg(){if(--Ph===0&&yo!==null){el!==null&&(el.status="fulfilled");var t=yo;yo=null,Wa=0,el=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function GE(t,s){var a=[],o={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){o.status="fulfilled",o.value=s;for(var h=0;h<a.length;h++)(0,a[h])(s)},function(h){for(o.status="rejected",o.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),o}var Hg=K.S;K.S=function(t,s){Ny=tn(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&FE(t,s),Hg!==null&&Hg(t,s)};var aa=N(null);function Lh(){var t=aa.current;return t!==null?t:ht.pooledCache}function ou(t,s){s===null?ae(aa,aa.current):ae(aa,s.pool)}function Fg(){var t=Lh();return t===null?null:{parent:zt._currentValue,pool:t}}var tl=Error(r(460)),zh=Error(r(474)),cu=Error(r(542)),uu={then:function(){}};function Gg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Qg(t,s,a){switch(a=t[a],a===void 0?t.push(s):a!==s&&(s.then(ms,ms),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Yg(t),t;default:if(typeof s.status=="string")s.then(ms,ms);else{if(t=ht,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=s,t.status="pending",t.then(function(o){if(s.status==="pending"){var h=s;h.status="fulfilled",h.value=o}},function(o){if(s.status==="pending"){var h=s;h.status="rejected",h.reason=o}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Yg(t),t}throw oa=s,tl}}function la(t){try{var s=t._init;return s(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(oa=a,tl):a}}var oa=null;function Kg(){if(oa===null)throw Error(r(459));var t=oa;return oa=null,t}function Yg(t){if(t===tl||t===cu)throw Error(r(483))}var nl=null,xo=0;function du(t){var s=xo;return xo+=1,nl===null&&(nl=[]),Qg(nl,t,s)}function vo(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function hu(t,s){throw s.$$typeof===T?Error(r(525)):(t=Object.prototype.toString.call(s),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function $g(t){function s(P,O){if(t){var U=P.deletions;U===null?(P.deletions=[O],P.flags|=16):U.push(O)}}function a(P,O){if(!t)return null;for(;O!==null;)s(P,O),O=O.sibling;return null}function o(P){for(var O=new Map;P!==null;)P.key!==null?O.set(P.key,P):O.set(P.index,P),P=P.sibling;return O}function h(P,O){return P=oi(P,O),P.index=0,P.sibling=null,P}function m(P,O,U){return P.index=U,t?(U=P.alternate,U!==null?(U=U.index,U<O?(P.flags|=67108866,O):U):(P.flags|=67108866,O)):(P.flags|=1048576,O)}function v(P){return t&&P.alternate===null&&(P.flags|=67108866),P}function E(P,O,U,X){return O===null||O.tag!==6?(O=Ah(U,P.mode,X),O.return=P,O):(O=h(O,U),O.return=P,O)}function j(P,O,U,X){var ve=U.type;return ve===Y?$(P,O,U.props.children,X,U.key):O!==null&&(O.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===A&&la(ve)===O.type)?(O=h(O,U.props),vo(O,U),O.return=P,O):(O=iu(U.type,U.key,U.props,null,P.mode,X),vo(O,U),O.return=P,O)}function B(P,O,U,X){return O===null||O.tag!==4||O.stateNode.containerInfo!==U.containerInfo||O.stateNode.implementation!==U.implementation?(O=Ch(U,P.mode,X),O.return=P,O):(O=h(O,U.children||[]),O.return=P,O)}function $(P,O,U,X,ve){return O===null||O.tag!==7?(O=na(U,P.mode,X,ve),O.return=P,O):(O=h(O,U),O.return=P,O)}function W(P,O,U){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=Ah(""+O,P.mode,U),O.return=P,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case M:return U=iu(O.type,O.key,O.props,null,P.mode,U),vo(U,O),U.return=P,U;case F:return O=Ch(O,P.mode,U),O.return=P,O;case A:return O=la(O),W(P,O,U)}if(Ye(O)||V(O))return O=na(O,P.mode,U,null),O.return=P,O;if(typeof O.then=="function")return W(P,du(O),U);if(O.$$typeof===le)return W(P,lu(P,O),U);hu(P,O)}return null}function q(P,O,U,X){var ve=O!==null?O.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return ve!==null?null:E(P,O,""+U,X);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case M:return U.key===ve?j(P,O,U,X):null;case F:return U.key===ve?B(P,O,U,X):null;case A:return U=la(U),q(P,O,U,X)}if(Ye(U)||V(U))return ve!==null?null:$(P,O,U,X,null);if(typeof U.then=="function")return q(P,O,du(U),X);if(U.$$typeof===le)return q(P,O,lu(P,U),X);hu(P,U)}return null}function Q(P,O,U,X,ve){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return P=P.get(U)||null,E(O,P,""+X,ve);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case M:return P=P.get(X.key===null?U:X.key)||null,j(O,P,X,ve);case F:return P=P.get(X.key===null?U:X.key)||null,B(O,P,X,ve);case A:return X=la(X),Q(P,O,U,X,ve)}if(Ye(X)||V(X))return P=P.get(U)||null,$(O,P,X,ve,null);if(typeof X.then=="function")return Q(P,O,U,du(X),ve);if(X.$$typeof===le)return Q(P,O,U,lu(O,X),ve);hu(O,X)}return null}function ge(P,O,U,X){for(var ve=null,Je=null,ye=O,Le=O=0,He=null;ye!==null&&Le<U.length;Le++){ye.index>Le?(He=ye,ye=null):He=ye.sibling;var Ze=q(P,ye,U[Le],X);if(Ze===null){ye===null&&(ye=He);break}t&&ye&&Ze.alternate===null&&s(P,ye),O=m(Ze,O,Le),Je===null?ve=Ze:Je.sibling=Ze,Je=Ze,ye=He}if(Le===U.length)return a(P,ye),$e&&ci(P,Le),ve;if(ye===null){for(;Le<U.length;Le++)ye=W(P,U[Le],X),ye!==null&&(O=m(ye,O,Le),Je===null?ve=ye:Je.sibling=ye,Je=ye);return $e&&ci(P,Le),ve}for(ye=o(ye);Le<U.length;Le++)He=Q(ye,P,Le,U[Le],X),He!==null&&(t&&He.alternate!==null&&ye.delete(He.key===null?Le:He.key),O=m(He,O,Le),Je===null?ve=He:Je.sibling=He,Je=He);return t&&ye.forEach(function(fr){return s(P,fr)}),$e&&ci(P,Le),ve}function _e(P,O,U,X){if(U==null)throw Error(r(151));for(var ve=null,Je=null,ye=O,Le=O=0,He=null,Ze=U.next();ye!==null&&!Ze.done;Le++,Ze=U.next()){ye.index>Le?(He=ye,ye=null):He=ye.sibling;var fr=q(P,ye,Ze.value,X);if(fr===null){ye===null&&(ye=He);break}t&&ye&&fr.alternate===null&&s(P,ye),O=m(fr,O,Le),Je===null?ve=fr:Je.sibling=fr,Je=fr,ye=He}if(Ze.done)return a(P,ye),$e&&ci(P,Le),ve;if(ye===null){for(;!Ze.done;Le++,Ze=U.next())Ze=W(P,Ze.value,X),Ze!==null&&(O=m(Ze,O,Le),Je===null?ve=Ze:Je.sibling=Ze,Je=Ze);return $e&&ci(P,Le),ve}for(ye=o(ye);!Ze.done;Le++,Ze=U.next())Ze=Q(ye,P,Le,Ze.value,X),Ze!==null&&(t&&Ze.alternate!==null&&ye.delete(Ze.key===null?Le:Ze.key),O=m(Ze,O,Le),Je===null?ve=Ze:Je.sibling=Ze,Je=Ze);return t&&ye.forEach(function(nw){return s(P,nw)}),$e&&ci(P,Le),ve}function dt(P,O,U,X){if(typeof U=="object"&&U!==null&&U.type===Y&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case M:e:{for(var ve=U.key;O!==null;){if(O.key===ve){if(ve=U.type,ve===Y){if(O.tag===7){a(P,O.sibling),X=h(O,U.props.children),X.return=P,P=X;break e}}else if(O.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===A&&la(ve)===O.type){a(P,O.sibling),X=h(O,U.props),vo(X,U),X.return=P,P=X;break e}a(P,O);break}else s(P,O);O=O.sibling}U.type===Y?(X=na(U.props.children,P.mode,X,U.key),X.return=P,P=X):(X=iu(U.type,U.key,U.props,null,P.mode,X),vo(X,U),X.return=P,P=X)}return v(P);case F:e:{for(ve=U.key;O!==null;){if(O.key===ve)if(O.tag===4&&O.stateNode.containerInfo===U.containerInfo&&O.stateNode.implementation===U.implementation){a(P,O.sibling),X=h(O,U.children||[]),X.return=P,P=X;break e}else{a(P,O);break}else s(P,O);O=O.sibling}X=Ch(U,P.mode,X),X.return=P,P=X}return v(P);case A:return U=la(U),dt(P,O,U,X)}if(Ye(U))return ge(P,O,U,X);if(V(U)){if(ve=V(U),typeof ve!="function")throw Error(r(150));return U=ve.call(U),_e(P,O,U,X)}if(typeof U.then=="function")return dt(P,O,du(U),X);if(U.$$typeof===le)return dt(P,O,lu(P,U),X);hu(P,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,O!==null&&O.tag===6?(a(P,O.sibling),X=h(O,U),X.return=P,P=X):(a(P,O),X=Ah(U,P.mode,X),X.return=P,P=X),v(P)):a(P,O)}return function(P,O,U,X){try{xo=0;var ve=dt(P,O,U,X);return nl=null,ve}catch(ye){if(ye===tl||ye===cu)throw ye;var Je=Bn(29,ye,null,P.mode);return Je.lanes=X,Je.return=P,Je}finally{}}}var ca=$g(!0),Xg=$g(!1),Xi=!1;function Uh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Bh(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ji(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Zi(t,s,a){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(st&2)!==0){var h=o.pending;return h===null?s.next=s:(s.next=h.next,h.next=s),o.pending=s,s=su(t),Og(t,null,a),s}return nu(t,o,s,a),su(t)}function bo(t,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var o=s.lanes;o&=t.pendingLanes,a|=o,s.lanes=a,Ql(t,a)}}function qh(t,s){var a=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var h=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?h=m=v:m=m.next=v,a=a.next}while(a!==null);m===null?h=m=s:m=m.next=s}else h=m=s;a={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:m,shared:o.shared,callbacks:o.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=s:t.next=s,a.lastBaseUpdate=s}var Hh=!1;function _o(){if(Hh){var t=el;if(t!==null)throw t}}function Eo(t,s,a,o){Hh=!1;var h=t.updateQueue;Xi=!1;var m=h.firstBaseUpdate,v=h.lastBaseUpdate,E=h.shared.pending;if(E!==null){h.shared.pending=null;var j=E,B=j.next;j.next=null,v===null?m=B:v.next=B,v=j;var $=t.alternate;$!==null&&($=$.updateQueue,E=$.lastBaseUpdate,E!==v&&(E===null?$.firstBaseUpdate=B:E.next=B,$.lastBaseUpdate=j))}if(m!==null){var W=h.baseState;v=0,$=B=j=null,E=m;do{var q=E.lane&-536870913,Q=q!==E.lane;if(Q?(qe&q)===q:(o&q)===q){q!==0&&q===Wa&&(Hh=!0),$!==null&&($=$.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var ge=t,_e=E;q=s;var dt=a;switch(_e.tag){case 1:if(ge=_e.payload,typeof ge=="function"){W=ge.call(dt,W,q);break e}W=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=_e.payload,q=typeof ge=="function"?ge.call(dt,W,q):ge,q==null)break e;W=w({},W,q);break e;case 2:Xi=!0}}q=E.callback,q!==null&&(t.flags|=64,Q&&(t.flags|=8192),Q=h.callbacks,Q===null?h.callbacks=[q]:Q.push(q))}else Q={lane:q,tag:E.tag,payload:E.payload,callback:E.callback,next:null},$===null?(B=$=Q,j=W):$=$.next=Q,v|=q;if(E=E.next,E===null){if(E=h.shared.pending,E===null)break;Q=E,E=Q.next,Q.next=null,h.lastBaseUpdate=Q,h.shared.pending=null}}while(!0);$===null&&(j=W),h.baseState=j,h.firstBaseUpdate=B,h.lastBaseUpdate=$,m===null&&(h.shared.lanes=0),sr|=v,t.lanes=v,t.memoizedState=W}}function Jg(t,s){if(typeof t!="function")throw Error(r(191,t));t.call(s)}function Zg(t,s){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Jg(a[t],s)}var sl=N(null),fu=N(0);function Wg(t,s){t=bi,ae(fu,t),ae(sl,s),bi=t|s.baseLanes}function Fh(){ae(fu,bi),ae(sl,sl.current)}function Gh(){bi=fu.current,L(sl),L(fu)}var qn=N(null),rs=null;function Wi(t){var s=t.alternate;ae(jt,jt.current&1),ae(qn,t),rs===null&&(s===null||sl.current!==null||s.memoizedState!==null)&&(rs=t)}function Qh(t){ae(jt,jt.current),ae(qn,t),rs===null&&(rs=t)}function e0(t){t.tag===22?(ae(jt,jt.current),ae(qn,t),rs===null&&(rs=t)):er()}function er(){ae(jt,jt.current),ae(qn,qn.current)}function Hn(t){L(qn),rs===t&&(rs=null),L(jt)}var jt=N(0);function mu(t){for(var s=t;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Wf(a)||em(a)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var hi=0,Ve=null,ct=null,Ut=null,pu=!1,il=!1,ua=!1,gu=0,wo=0,rl=null,QE=0;function St(){throw Error(r(321))}function Kh(t,s){if(s===null)return!1;for(var a=0;a<s.length&&a<t.length;a++)if(!Un(t[a],s[a]))return!1;return!0}function Yh(t,s,a,o,h,m){return hi=m,Ve=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,K.H=t===null||t.memoizedState===null?P0:uf,ua=!1,m=a(o,h),ua=!1,il&&(m=n0(s,a,o,h)),t0(t),m}function t0(t){K.H=No;var s=ct!==null&&ct.next!==null;if(hi=0,Ut=ct=Ve=null,pu=!1,wo=0,rl=null,s)throw Error(r(300));t===null||Bt||(t=t.dependencies,t!==null&&au(t)&&(Bt=!0))}function n0(t,s,a,o){Ve=t;var h=0;do{if(il&&(rl=null),wo=0,il=!1,25<=h)throw Error(r(301));if(h+=1,Ut=ct=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}K.H=L0,m=s(a,o)}while(il);return m}function KE(){var t=K.H,s=t.useState()[0];return s=typeof s.then=="function"?So(s):s,t=t.useState()[0],(ct!==null?ct.memoizedState:null)!==t&&(Ve.flags|=1024),s}function $h(){var t=gu!==0;return gu=0,t}function Xh(t,s,a){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a}function Jh(t){if(pu){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}pu=!1}hi=0,Ut=ct=Ve=null,il=!1,wo=gu=0,rl=null}function vn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ut===null?Ve.memoizedState=Ut=t:Ut=Ut.next=t,Ut}function It(){if(ct===null){var t=Ve.alternate;t=t!==null?t.memoizedState:null}else t=ct.next;var s=Ut===null?Ve.memoizedState:Ut.next;if(s!==null)Ut=s,ct=t;else{if(t===null)throw Ve.alternate===null?Error(r(467)):Error(r(310));ct=t,t={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},Ut===null?Ve.memoizedState=Ut=t:Ut=Ut.next=t}return Ut}function yu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function So(t){var s=wo;return wo+=1,rl===null&&(rl=[]),t=Qg(rl,t,s),s=Ve,(Ut===null?s.memoizedState:Ut.next)===null&&(s=s.alternate,K.H=s===null||s.memoizedState===null?P0:uf),t}function xu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return So(t);if(t.$$typeof===le)return rn(t)}throw Error(r(438,String(t)))}function Zh(t){var s=null,a=Ve.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var o=Ve.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(s={data:o.data.map(function(h){return h.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=yu(),Ve.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(t),o=0;o<t;o++)a[o]=k;return s.index++,a}function fi(t,s){return typeof s=="function"?s(t):s}function vu(t){var s=It();return Wh(s,ct,t)}function Wh(t,s,a){var o=t.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=a;var h=t.baseQueue,m=o.pending;if(m!==null){if(h!==null){var v=h.next;h.next=m.next,m.next=v}s.baseQueue=h=m,o.pending=null}if(m=t.baseState,h===null)t.memoizedState=m;else{s=h.next;var E=v=null,j=null,B=s,$=!1;do{var W=B.lane&-536870913;if(W!==B.lane?(qe&W)===W:(hi&W)===W){var q=B.revertLane;if(q===0)j!==null&&(j=j.next={lane:0,revertLane:0,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),W===Wa&&($=!0);else if((hi&q)===q){B=B.next,q===Wa&&($=!0);continue}else W={lane:0,revertLane:B.revertLane,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},j===null?(E=j=W,v=m):j=j.next=W,Ve.lanes|=q,sr|=q;W=B.action,ua&&a(m,W),m=B.hasEagerState?B.eagerState:a(m,W)}else q={lane:W,revertLane:B.revertLane,gesture:B.gesture,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},j===null?(E=j=q,v=m):j=j.next=q,Ve.lanes|=W,sr|=W;B=B.next}while(B!==null&&B!==s);if(j===null?v=m:j.next=E,!Un(m,t.memoizedState)&&(Bt=!0,$&&(a=el,a!==null)))throw a;t.memoizedState=m,t.baseState=v,t.baseQueue=j,o.lastRenderedState=m}return h===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function ef(t){var s=It(),a=s.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=t;var o=a.dispatch,h=a.pending,m=s.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do m=t(m,v.action),v=v.next;while(v!==h);Un(m,s.memoizedState)||(Bt=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),a.lastRenderedState=m}return[m,o]}function s0(t,s,a){var o=Ve,h=It(),m=$e;if(m){if(a===void 0)throw Error(r(407));a=a()}else a=s();var v=!Un((ct||h).memoizedState,a);if(v&&(h.memoizedState=a,Bt=!0),h=h.queue,sf(a0.bind(null,o,h,t),[t]),h.getSnapshot!==s||v||Ut!==null&&Ut.memoizedState.tag&1){if(o.flags|=2048,al(9,{destroy:void 0},r0.bind(null,o,h,a,s),null),ht===null)throw Error(r(349));m||(hi&127)!==0||i0(o,s,a)}return a}function i0(t,s,a){t.flags|=16384,t={getSnapshot:s,value:a},s=Ve.updateQueue,s===null?(s=yu(),Ve.updateQueue=s,s.stores=[t]):(a=s.stores,a===null?s.stores=[t]:a.push(t))}function r0(t,s,a,o){s.value=a,s.getSnapshot=o,l0(s)&&o0(t)}function a0(t,s,a){return a(function(){l0(s)&&o0(t)})}function l0(t){var s=t.getSnapshot;t=t.value;try{var a=s();return!Un(t,a)}catch{return!0}}function o0(t){var s=ta(t,2);s!==null&&In(s,t,2)}function tf(t){var s=vn();if(typeof t=="function"){var a=t;if(t=a(),ua){Sn(!0);try{a()}finally{Sn(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fi,lastRenderedState:t},s}function c0(t,s,a,o){return t.baseState=a,Wh(t,ct,typeof o=="function"?o:fi)}function YE(t,s,a,o,h){if(Eu(t))throw Error(r(485));if(t=s.action,t!==null){var m={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){m.listeners.push(v)}};K.T!==null?a(!0):m.isTransition=!1,o(m),a=s.pending,a===null?(m.next=s.pending=m,u0(s,m)):(m.next=a.next,s.pending=a.next=m)}}function u0(t,s){var a=s.action,o=s.payload,h=t.state;if(s.isTransition){var m=K.T,v={};K.T=v;try{var E=a(h,o),j=K.S;j!==null&&j(v,E),d0(t,s,E)}catch(B){nf(t,s,B)}finally{m!==null&&v.types!==null&&(m.types=v.types),K.T=m}}else try{m=a(h,o),d0(t,s,m)}catch(B){nf(t,s,B)}}function d0(t,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){h0(t,s,o)},function(o){return nf(t,s,o)}):h0(t,s,a)}function h0(t,s,a){s.status="fulfilled",s.value=a,f0(s),t.state=a,s=t.pending,s!==null&&(a=s.next,a===s?t.pending=null:(a=a.next,s.next=a,u0(t,a)))}function nf(t,s,a){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do s.status="rejected",s.reason=a,f0(s),s=s.next;while(s!==o)}t.action=null}function f0(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function m0(t,s){return s}function p0(t,s){if($e){var a=ht.formState;if(a!==null){e:{var o=Ve;if($e){if(mt){t:{for(var h=mt,m=is;h.nodeType!==8;){if(!m){h=null;break t}if(h=as(h.nextSibling),h===null){h=null;break t}}m=h.data,h=m==="F!"||m==="F"?h:null}if(h){mt=as(h.nextSibling),o=h.data==="F!";break e}}Yi(o)}o=!1}o&&(s=a[0])}}return a=vn(),a.memoizedState=a.baseState=s,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:m0,lastRenderedState:s},a.queue=o,a=k0.bind(null,Ve,o),o.dispatch=a,o=tf(!1),m=cf.bind(null,Ve,!1,o.queue),o=vn(),h={state:s,dispatch:null,action:t,pending:null},o.queue=h,a=YE.bind(null,Ve,h,m,a),h.dispatch=a,o.memoizedState=t,[s,a,!1]}function g0(t){var s=It();return y0(s,ct,t)}function y0(t,s,a){if(s=Wh(t,s,m0)[0],t=vu(fi)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var o=So(s)}catch(v){throw v===tl?cu:v}else o=s;s=It();var h=s.queue,m=h.dispatch;return a!==s.memoizedState&&(Ve.flags|=2048,al(9,{destroy:void 0},$E.bind(null,h,a),null)),[o,m,t]}function $E(t,s){t.action=s}function x0(t){var s=It(),a=ct;if(a!==null)return y0(s,a,t);It(),s=s.memoizedState,a=It();var o=a.queue.dispatch;return a.memoizedState=t,[s,o,!1]}function al(t,s,a,o){return t={tag:t,create:a,deps:o,inst:s,next:null},s=Ve.updateQueue,s===null&&(s=yu(),Ve.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=t.next=t:(o=a.next,a.next=t,t.next=o,s.lastEffect=t),t}function v0(){return It().memoizedState}function bu(t,s,a,o){var h=vn();Ve.flags|=t,h.memoizedState=al(1|s,{destroy:void 0},a,o===void 0?null:o)}function _u(t,s,a,o){var h=It();o=o===void 0?null:o;var m=h.memoizedState.inst;ct!==null&&o!==null&&Kh(o,ct.memoizedState.deps)?h.memoizedState=al(s,m,a,o):(Ve.flags|=t,h.memoizedState=al(1|s,m,a,o))}function b0(t,s){bu(8390656,8,t,s)}function sf(t,s){_u(2048,8,t,s)}function XE(t){Ve.flags|=4;var s=Ve.updateQueue;if(s===null)s=yu(),Ve.updateQueue=s,s.events=[t];else{var a=s.events;a===null?s.events=[t]:a.push(t)}}function _0(t){var s=It().memoizedState;return XE({ref:s,nextImpl:t}),function(){if((st&2)!==0)throw Error(r(440));return s.impl.apply(void 0,arguments)}}function E0(t,s){return _u(4,2,t,s)}function w0(t,s){return _u(4,4,t,s)}function S0(t,s){if(typeof s=="function"){t=t();var a=s(t);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function T0(t,s,a){a=a!=null?a.concat([t]):null,_u(4,4,S0.bind(null,s,t),a)}function rf(){}function N0(t,s){var a=It();s=s===void 0?null:s;var o=a.memoizedState;return s!==null&&Kh(s,o[1])?o[0]:(a.memoizedState=[t,s],t)}function A0(t,s){var a=It();s=s===void 0?null:s;var o=a.memoizedState;if(s!==null&&Kh(s,o[1]))return o[0];if(o=t(),ua){Sn(!0);try{t()}finally{Sn(!1)}}return a.memoizedState=[o,s],o}function af(t,s,a){return a===void 0||(hi&1073741824)!==0&&(qe&261930)===0?t.memoizedState=s:(t.memoizedState=a,t=Cy(),Ve.lanes|=t,sr|=t,a)}function C0(t,s,a,o){return Un(a,s)?a:sl.current!==null?(t=af(t,a,o),Un(t,s)||(Bt=!0),t):(hi&42)===0||(hi&1073741824)!==0&&(qe&261930)===0?(Bt=!0,t.memoizedState=a):(t=Cy(),Ve.lanes|=t,sr|=t,s)}function R0(t,s,a,o,h){var m=ce.p;ce.p=m!==0&&8>m?m:8;var v=K.T,E={};K.T=E,cf(t,!1,s,a);try{var j=h(),B=K.S;if(B!==null&&B(E,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var $=GE(j,o);To(t,s,$,Qn(t))}else To(t,s,o,Qn(t))}catch(W){To(t,s,{then:function(){},status:"rejected",reason:W},Qn())}finally{ce.p=m,v!==null&&E.types!==null&&(v.types=E.types),K.T=v}}function JE(){}function lf(t,s,a,o){if(t.tag!==5)throw Error(r(476));var h=j0(t).queue;R0(t,h,s,xe,a===null?JE:function(){return I0(t),a(o)})}function j0(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:xe,baseState:xe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fi,lastRenderedState:xe},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fi,lastRenderedState:a},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function I0(t){var s=j0(t);s.next===null&&(s=t.alternate.memoizedState),To(t,s.next.queue,{},Qn())}function of(){return rn(qo)}function D0(){return It().memoizedState}function O0(){return It().memoizedState}function ZE(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var a=Qn();t=Ji(a);var o=Zi(s,t,a);o!==null&&(In(o,s,a),bo(o,s,a)),s={cache:Vh()},t.payload=s;return}s=s.return}}function WE(t,s,a){var o=Qn();a={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Eu(t)?M0(s,a):(a=Th(t,s,a,o),a!==null&&(In(a,t,o),V0(a,s,o)))}function k0(t,s,a){var o=Qn();To(t,s,a,o)}function To(t,s,a,o){var h={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Eu(t))M0(s,h);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var v=s.lastRenderedState,E=m(v,a);if(h.hasEagerState=!0,h.eagerState=E,Un(E,v))return nu(t,s,h,0),ht===null&&tu(),!1}catch{}finally{}if(a=Th(t,s,h,o),a!==null)return In(a,t,o),V0(a,s,o),!0}return!1}function cf(t,s,a,o){if(o={lane:2,revertLane:Bf(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Eu(t)){if(s)throw Error(r(479))}else s=Th(t,a,o,2),s!==null&&In(s,t,2)}function Eu(t){var s=t.alternate;return t===Ve||s!==null&&s===Ve}function M0(t,s){il=pu=!0;var a=t.pending;a===null?s.next=s:(s.next=a.next,a.next=s),t.pending=s}function V0(t,s,a){if((a&4194048)!==0){var o=s.lanes;o&=t.pendingLanes,a|=o,s.lanes=a,Ql(t,a)}}var No={readContext:rn,use:xu,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useLayoutEffect:St,useInsertionEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useSyncExternalStore:St,useId:St,useHostTransitionStatus:St,useFormState:St,useActionState:St,useOptimistic:St,useMemoCache:St,useCacheRefresh:St};No.useEffectEvent=St;var P0={readContext:rn,use:xu,useCallback:function(t,s){return vn().memoizedState=[t,s===void 0?null:s],t},useContext:rn,useEffect:b0,useImperativeHandle:function(t,s,a){a=a!=null?a.concat([t]):null,bu(4194308,4,S0.bind(null,s,t),a)},useLayoutEffect:function(t,s){return bu(4194308,4,t,s)},useInsertionEffect:function(t,s){bu(4,2,t,s)},useMemo:function(t,s){var a=vn();s=s===void 0?null:s;var o=t();if(ua){Sn(!0);try{t()}finally{Sn(!1)}}return a.memoizedState=[o,s],o},useReducer:function(t,s,a){var o=vn();if(a!==void 0){var h=a(s);if(ua){Sn(!0);try{a(s)}finally{Sn(!1)}}}else h=s;return o.memoizedState=o.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},o.queue=t,t=t.dispatch=WE.bind(null,Ve,t),[o.memoizedState,t]},useRef:function(t){var s=vn();return t={current:t},s.memoizedState=t},useState:function(t){t=tf(t);var s=t.queue,a=k0.bind(null,Ve,s);return s.dispatch=a,[t.memoizedState,a]},useDebugValue:rf,useDeferredValue:function(t,s){var a=vn();return af(a,t,s)},useTransition:function(){var t=tf(!1);return t=R0.bind(null,Ve,t.queue,!0,!1),vn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,a){var o=Ve,h=vn();if($e){if(a===void 0)throw Error(r(407));a=a()}else{if(a=s(),ht===null)throw Error(r(349));(qe&127)!==0||i0(o,s,a)}h.memoizedState=a;var m={value:a,getSnapshot:s};return h.queue=m,b0(a0.bind(null,o,m,t),[t]),o.flags|=2048,al(9,{destroy:void 0},r0.bind(null,o,m,a,s),null),a},useId:function(){var t=vn(),s=ht.identifierPrefix;if($e){var a=Fs,o=Hs;a=(o&~(1<<32-_t(o)-1)).toString(32)+a,s="_"+s+"R_"+a,a=gu++,0<a&&(s+="H"+a.toString(32)),s+="_"}else a=QE++,s="_"+s+"r_"+a.toString(32)+"_";return t.memoizedState=s},useHostTransitionStatus:of,useFormState:p0,useActionState:p0,useOptimistic:function(t){var s=vn();s.memoizedState=s.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=cf.bind(null,Ve,!0,a),a.dispatch=s,[t,s]},useMemoCache:Zh,useCacheRefresh:function(){return vn().memoizedState=ZE.bind(null,Ve)},useEffectEvent:function(t){var s=vn(),a={impl:t};return s.memoizedState=a,function(){if((st&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},uf={readContext:rn,use:xu,useCallback:N0,useContext:rn,useEffect:sf,useImperativeHandle:T0,useInsertionEffect:E0,useLayoutEffect:w0,useMemo:A0,useReducer:vu,useRef:v0,useState:function(){return vu(fi)},useDebugValue:rf,useDeferredValue:function(t,s){var a=It();return C0(a,ct.memoizedState,t,s)},useTransition:function(){var t=vu(fi)[0],s=It().memoizedState;return[typeof t=="boolean"?t:So(t),s]},useSyncExternalStore:s0,useId:D0,useHostTransitionStatus:of,useFormState:g0,useActionState:g0,useOptimistic:function(t,s){var a=It();return c0(a,ct,t,s)},useMemoCache:Zh,useCacheRefresh:O0};uf.useEffectEvent=_0;var L0={readContext:rn,use:xu,useCallback:N0,useContext:rn,useEffect:sf,useImperativeHandle:T0,useInsertionEffect:E0,useLayoutEffect:w0,useMemo:A0,useReducer:ef,useRef:v0,useState:function(){return ef(fi)},useDebugValue:rf,useDeferredValue:function(t,s){var a=It();return ct===null?af(a,t,s):C0(a,ct.memoizedState,t,s)},useTransition:function(){var t=ef(fi)[0],s=It().memoizedState;return[typeof t=="boolean"?t:So(t),s]},useSyncExternalStore:s0,useId:D0,useHostTransitionStatus:of,useFormState:x0,useActionState:x0,useOptimistic:function(t,s){var a=It();return ct!==null?c0(a,ct,t,s):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Zh,useCacheRefresh:O0};L0.useEffectEvent=_0;function df(t,s,a,o){s=t.memoizedState,a=a(o,s),a=a==null?s:w({},s,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var hf={enqueueSetState:function(t,s,a){t=t._reactInternals;var o=Qn(),h=Ji(o);h.payload=s,a!=null&&(h.callback=a),s=Zi(t,h,o),s!==null&&(In(s,t,o),bo(s,t,o))},enqueueReplaceState:function(t,s,a){t=t._reactInternals;var o=Qn(),h=Ji(o);h.tag=1,h.payload=s,a!=null&&(h.callback=a),s=Zi(t,h,o),s!==null&&(In(s,t,o),bo(s,t,o))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var a=Qn(),o=Ji(a);o.tag=2,s!=null&&(o.callback=s),s=Zi(t,o,a),s!==null&&(In(s,t,a),bo(s,t,a))}};function z0(t,s,a,o,h,m,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,m,v):s.prototype&&s.prototype.isPureReactComponent?!ho(a,o)||!ho(h,m):!0}function U0(t,s,a,o){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,o),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,o),s.state!==t&&hf.enqueueReplaceState(s,s.state,null)}function da(t,s){var a=s;if("ref"in s){a={};for(var o in s)o!=="ref"&&(a[o]=s[o])}if(t=t.defaultProps){a===s&&(a=w({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}function B0(t){eu(t)}function q0(t){console.error(t)}function H0(t){eu(t)}function wu(t,s){try{var a=t.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(o){setTimeout(function(){throw o})}}function F0(t,s,a){try{var o=t.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function ff(t,s,a){return a=Ji(a),a.tag=3,a.payload={element:null},a.callback=function(){wu(t,s)},a}function G0(t){return t=Ji(t),t.tag=3,t}function Q0(t,s,a,o){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var m=o.value;t.payload=function(){return h(m)},t.callback=function(){F0(s,a,o)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){F0(s,a,o),typeof h!="function"&&(ir===null?ir=new Set([this]):ir.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})})}function e2(t,s,a,o,h){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(s=a.alternate,s!==null&&Za(s,a,h,!0),a=qn.current,a!==null){switch(a.tag){case 31:case 13:return rs===null?Mu():a.alternate===null&&Tt===0&&(Tt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,o===uu?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([o]):s.add(o),Lf(t,o,h)),!1;case 22:return a.flags|=65536,o===uu?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([o]):a.add(o)),Lf(t,o,h)),!1}throw Error(r(435,a.tag))}return Lf(t,o,h),Mu(),!1}if($e)return s=qn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=h,o!==Ih&&(t=Error(r(422),{cause:o}),po(ts(t,a)))):(o!==Ih&&(s=Error(r(423),{cause:o}),po(ts(s,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,o=ts(o,a),h=ff(t.stateNode,o,h),qh(t,h),Tt!==4&&(Tt=2)),!1;var m=Error(r(520),{cause:o});if(m=ts(m,a),ko===null?ko=[m]:ko.push(m),Tt!==4&&(Tt=2),s===null)return!0;o=ts(o,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=ff(a.stateNode,o,t),qh(a,t),!1;case 1:if(s=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(ir===null||!ir.has(m))))return a.flags|=65536,h&=-h,a.lanes|=h,h=G0(h),Q0(h,t,a,o),qh(a,h),!1}a=a.return}while(a!==null);return!1}var mf=Error(r(461)),Bt=!1;function an(t,s,a,o){s.child=t===null?Xg(s,null,a,o):ca(s,t.child,a,o)}function K0(t,s,a,o,h){a=a.render;var m=s.ref;if("ref"in o){var v={};for(var E in o)E!=="ref"&&(v[E]=o[E])}else v=o;return ra(s),o=Yh(t,s,a,v,m,h),E=$h(),t!==null&&!Bt?(Xh(t,s,h),mi(t,s,h)):($e&&E&&Rh(s),s.flags|=1,an(t,s,o,h),s.child)}function Y0(t,s,a,o,h){if(t===null){var m=a.type;return typeof m=="function"&&!Nh(m)&&m.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=m,$0(t,s,m,o,h)):(t=iu(a.type,null,o,s,s.mode,h),t.ref=s.ref,t.return=s,s.child=t)}if(m=t.child,!Ef(t,h)){var v=m.memoizedProps;if(a=a.compare,a=a!==null?a:ho,a(v,o)&&t.ref===s.ref)return mi(t,s,h)}return s.flags|=1,t=oi(m,o),t.ref=s.ref,t.return=s,s.child=t}function $0(t,s,a,o,h){if(t!==null){var m=t.memoizedProps;if(ho(m,o)&&t.ref===s.ref)if(Bt=!1,s.pendingProps=o=m,Ef(t,h))(t.flags&131072)!==0&&(Bt=!0);else return s.lanes=t.lanes,mi(t,s,h)}return pf(t,s,a,o,h)}function X0(t,s,a,o){var h=o.children,m=t!==null?t.memoizedState:null;if(t===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((s.flags&128)!==0){if(m=m!==null?m.baseLanes|a:a,t!==null){for(o=s.child=t.child,h=0;o!==null;)h=h|o.lanes|o.childLanes,o=o.sibling;o=h&~m}else o=0,s.child=null;return J0(t,s,m,a,o)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&ou(s,m!==null?m.cachePool:null),m!==null?Wg(s,m):Fh(),e0(s);else return o=s.lanes=536870912,J0(t,s,m!==null?m.baseLanes|a:a,a,o)}else m!==null?(ou(s,m.cachePool),Wg(s,m),er(),s.memoizedState=null):(t!==null&&ou(s,null),Fh(),er());return an(t,s,h,a),s.child}function Ao(t,s){return t!==null&&t.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function J0(t,s,a,o,h){var m=Lh();return m=m===null?null:{parent:zt._currentValue,pool:m},s.memoizedState={baseLanes:a,cachePool:m},t!==null&&ou(s,null),Fh(),e0(s),t!==null&&Za(t,s,o,!0),s.childLanes=h,null}function Su(t,s){return s=Nu({mode:s.mode,children:s.children},t.mode),s.ref=t.ref,t.child=s,s.return=t,s}function Z0(t,s,a){return ca(s,t.child,null,a),t=Su(s,s.pendingProps),t.flags|=2,Hn(s),s.memoizedState=null,t}function t2(t,s,a){var o=s.pendingProps,h=(s.flags&128)!==0;if(s.flags&=-129,t===null){if($e){if(o.mode==="hidden")return t=Su(s,o),s.lanes=536870912,Ao(null,t);if(Qh(s),(t=mt)?(t=ux(t,is),t=t!==null&&t.data==="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:Qi!==null?{id:Hs,overflow:Fs}:null,retryLane:536870912,hydrationErrors:null},a=Mg(t),a.return=s,s.child=a,sn=s,mt=null)):t=null,t===null)throw Yi(s);return s.lanes=536870912,null}return Su(s,o)}var m=t.memoizedState;if(m!==null){var v=m.dehydrated;if(Qh(s),h)if(s.flags&256)s.flags&=-257,s=Z0(t,s,a);else if(s.memoizedState!==null)s.child=t.child,s.flags|=128,s=null;else throw Error(r(558));else if(Bt||Za(t,s,a,!1),h=(a&t.childLanes)!==0,Bt||h){if(o=ht,o!==null&&(v=Kl(o,a),v!==0&&v!==m.retryLane))throw m.retryLane=v,ta(t,v),In(o,t,v),mf;Mu(),s=Z0(t,s,a)}else t=m.treeContext,mt=as(v.nextSibling),sn=s,$e=!0,Ki=null,is=!1,t!==null&&Lg(s,t),s=Su(s,o),s.flags|=4096;return s}return t=oi(t.child,{mode:o.mode,children:o.children}),t.ref=s.ref,s.child=t,t.return=s,t}function Tu(t,s){var a=s.ref;if(a===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(t===null||t.ref!==a)&&(s.flags|=4194816)}}function pf(t,s,a,o,h){return ra(s),a=Yh(t,s,a,o,void 0,h),o=$h(),t!==null&&!Bt?(Xh(t,s,h),mi(t,s,h)):($e&&o&&Rh(s),s.flags|=1,an(t,s,a,h),s.child)}function W0(t,s,a,o,h,m){return ra(s),s.updateQueue=null,a=n0(s,o,a,h),t0(t),o=$h(),t!==null&&!Bt?(Xh(t,s,m),mi(t,s,m)):($e&&o&&Rh(s),s.flags|=1,an(t,s,a,m),s.child)}function ey(t,s,a,o,h){if(ra(s),s.stateNode===null){var m=Ya,v=a.contextType;typeof v=="object"&&v!==null&&(m=rn(v)),m=new a(o,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=hf,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=o,m.state=s.memoizedState,m.refs={},Uh(s),v=a.contextType,m.context=typeof v=="object"&&v!==null?rn(v):Ya,m.state=s.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(df(s,a,v,o),m.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(v=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),v!==m.state&&hf.enqueueReplaceState(m,m.state,null),Eo(s,o,m,h),_o(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),o=!0}else if(t===null){m=s.stateNode;var E=s.memoizedProps,j=da(a,E);m.props=j;var B=m.context,$=a.contextType;v=Ya,typeof $=="object"&&$!==null&&(v=rn($));var W=a.getDerivedStateFromProps;$=typeof W=="function"||typeof m.getSnapshotBeforeUpdate=="function",E=s.pendingProps!==E,$||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(E||B!==v)&&U0(s,m,o,v),Xi=!1;var q=s.memoizedState;m.state=q,Eo(s,o,m,h),_o(),B=s.memoizedState,E||q!==B||Xi?(typeof W=="function"&&(df(s,a,W,o),B=s.memoizedState),(j=Xi||z0(s,a,j,o,q,B,v))?($||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=o,s.memoizedState=B),m.props=o,m.state=B,m.context=v,o=j):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),o=!1)}else{m=s.stateNode,Bh(t,s),v=s.memoizedProps,$=da(a,v),m.props=$,W=s.pendingProps,q=m.context,B=a.contextType,j=Ya,typeof B=="object"&&B!==null&&(j=rn(B)),E=a.getDerivedStateFromProps,(B=typeof E=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(v!==W||q!==j)&&U0(s,m,o,j),Xi=!1,q=s.memoizedState,m.state=q,Eo(s,o,m,h),_o();var Q=s.memoizedState;v!==W||q!==Q||Xi||t!==null&&t.dependencies!==null&&au(t.dependencies)?(typeof E=="function"&&(df(s,a,E,o),Q=s.memoizedState),($=Xi||z0(s,a,$,o,q,Q,j)||t!==null&&t.dependencies!==null&&au(t.dependencies))?(B||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(o,Q,j),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(o,Q,j)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||v===t.memoizedProps&&q===t.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&q===t.memoizedState||(s.flags|=1024),s.memoizedProps=o,s.memoizedState=Q),m.props=o,m.state=Q,m.context=j,o=$):(typeof m.componentDidUpdate!="function"||v===t.memoizedProps&&q===t.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&q===t.memoizedState||(s.flags|=1024),o=!1)}return m=o,Tu(t,s),o=(s.flags&128)!==0,m||o?(m=s.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,t!==null&&o?(s.child=ca(s,t.child,null,h),s.child=ca(s,null,a,h)):an(t,s,a,h),s.memoizedState=m.state,t=s.child):t=mi(t,s,h),t}function ty(t,s,a,o){return sa(),s.flags|=256,an(t,s,a,o),s.child}var gf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function yf(t){return{baseLanes:t,cachePool:Fg()}}function xf(t,s,a){return t=t!==null?t.childLanes&~a:0,s&&(t|=Gn),t}function ny(t,s,a){var o=s.pendingProps,h=!1,m=(s.flags&128)!==0,v;if((v=m)||(v=t!==null&&t.memoizedState===null?!1:(jt.current&2)!==0),v&&(h=!0,s.flags&=-129),v=(s.flags&32)!==0,s.flags&=-33,t===null){if($e){if(h?Wi(s):er(),(t=mt)?(t=ux(t,is),t=t!==null&&t.data!=="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:Qi!==null?{id:Hs,overflow:Fs}:null,retryLane:536870912,hydrationErrors:null},a=Mg(t),a.return=s,s.child=a,sn=s,mt=null)):t=null,t===null)throw Yi(s);return em(t)?s.lanes=32:s.lanes=536870912,null}var E=o.children;return o=o.fallback,h?(er(),h=s.mode,E=Nu({mode:"hidden",children:E},h),o=na(o,h,a,null),E.return=s,o.return=s,E.sibling=o,s.child=E,o=s.child,o.memoizedState=yf(a),o.childLanes=xf(t,v,a),s.memoizedState=gf,Ao(null,o)):(Wi(s),vf(s,E))}var j=t.memoizedState;if(j!==null&&(E=j.dehydrated,E!==null)){if(m)s.flags&256?(Wi(s),s.flags&=-257,s=bf(t,s,a)):s.memoizedState!==null?(er(),s.child=t.child,s.flags|=128,s=null):(er(),E=o.fallback,h=s.mode,o=Nu({mode:"visible",children:o.children},h),E=na(E,h,a,null),E.flags|=2,o.return=s,E.return=s,o.sibling=E,s.child=o,ca(s,t.child,null,a),o=s.child,o.memoizedState=yf(a),o.childLanes=xf(t,v,a),s.memoizedState=gf,s=Ao(null,o));else if(Wi(s),em(E)){if(v=E.nextSibling&&E.nextSibling.dataset,v)var B=v.dgst;v=B,o=Error(r(419)),o.stack="",o.digest=v,po({value:o,source:null,stack:null}),s=bf(t,s,a)}else if(Bt||Za(t,s,a,!1),v=(a&t.childLanes)!==0,Bt||v){if(v=ht,v!==null&&(o=Kl(v,a),o!==0&&o!==j.retryLane))throw j.retryLane=o,ta(t,o),In(v,t,o),mf;Wf(E)||Mu(),s=bf(t,s,a)}else Wf(E)?(s.flags|=192,s.child=t.child,s=null):(t=j.treeContext,mt=as(E.nextSibling),sn=s,$e=!0,Ki=null,is=!1,t!==null&&Lg(s,t),s=vf(s,o.children),s.flags|=4096);return s}return h?(er(),E=o.fallback,h=s.mode,j=t.child,B=j.sibling,o=oi(j,{mode:"hidden",children:o.children}),o.subtreeFlags=j.subtreeFlags&65011712,B!==null?E=oi(B,E):(E=na(E,h,a,null),E.flags|=2),E.return=s,o.return=s,o.sibling=E,s.child=o,Ao(null,o),o=s.child,E=t.child.memoizedState,E===null?E=yf(a):(h=E.cachePool,h!==null?(j=zt._currentValue,h=h.parent!==j?{parent:j,pool:j}:h):h=Fg(),E={baseLanes:E.baseLanes|a,cachePool:h}),o.memoizedState=E,o.childLanes=xf(t,v,a),s.memoizedState=gf,Ao(t.child,o)):(Wi(s),a=t.child,t=a.sibling,a=oi(a,{mode:"visible",children:o.children}),a.return=s,a.sibling=null,t!==null&&(v=s.deletions,v===null?(s.deletions=[t],s.flags|=16):v.push(t)),s.child=a,s.memoizedState=null,a)}function vf(t,s){return s=Nu({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function Nu(t,s){return t=Bn(22,t,null,s),t.lanes=0,t}function bf(t,s,a){return ca(s,t.child,null,a),t=vf(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function sy(t,s,a){t.lanes|=s;var o=t.alternate;o!==null&&(o.lanes|=s),kh(t.return,s,a)}function _f(t,s,a,o,h,m){var v=t.memoizedState;v===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:h,treeForkCount:m}:(v.isBackwards=s,v.rendering=null,v.renderingStartTime=0,v.last=o,v.tail=a,v.tailMode=h,v.treeForkCount=m)}function iy(t,s,a){var o=s.pendingProps,h=o.revealOrder,m=o.tail;o=o.children;var v=jt.current,E=(v&2)!==0;if(E?(v=v&1|2,s.flags|=128):v&=1,ae(jt,v),an(t,s,o,a),o=$e?mo:0,!E&&t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&sy(t,a,s);else if(t.tag===19)sy(t,a,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(a=s.child,h=null;a!==null;)t=a.alternate,t!==null&&mu(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=s.child,s.child=null):(h=a.sibling,a.sibling=null),_f(s,!1,h,a,m,o);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=s.child,s.child=null;h!==null;){if(t=h.alternate,t!==null&&mu(t)===null){s.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}_f(s,!0,a,null,m,o);break;case"together":_f(s,!1,null,null,void 0,o);break;default:s.memoizedState=null}return s.child}function mi(t,s,a){if(t!==null&&(s.dependencies=t.dependencies),sr|=s.lanes,(a&s.childLanes)===0)if(t!==null){if(Za(t,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(r(153));if(s.child!==null){for(t=s.child,a=oi(t,t.pendingProps),s.child=a,a.return=s;t.sibling!==null;)t=t.sibling,a=a.sibling=oi(t,t.pendingProps),a.return=s;a.sibling=null}return s.child}function Ef(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&au(t)))}function n2(t,s,a){switch(s.tag){case 3:yt(s,s.stateNode.containerInfo),$i(s,zt,t.memoizedState.cache),sa();break;case 27:case 5:Mn(s);break;case 4:yt(s,s.stateNode.containerInfo);break;case 10:$i(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Qh(s),null;break;case 13:var o=s.memoizedState;if(o!==null)return o.dehydrated!==null?(Wi(s),s.flags|=128,null):(a&s.child.childLanes)!==0?ny(t,s,a):(Wi(s),t=mi(t,s,a),t!==null?t.sibling:null);Wi(s);break;case 19:var h=(t.flags&128)!==0;if(o=(a&s.childLanes)!==0,o||(Za(t,s,a,!1),o=(a&s.childLanes)!==0),h){if(o)return iy(t,s,a);s.flags|=128}if(h=s.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ae(jt,jt.current),o)break;return null;case 22:return s.lanes=0,X0(t,s,a,s.pendingProps);case 24:$i(s,zt,t.memoizedState.cache)}return mi(t,s,a)}function ry(t,s,a){if(t!==null)if(t.memoizedProps!==s.pendingProps)Bt=!0;else{if(!Ef(t,a)&&(s.flags&128)===0)return Bt=!1,n2(t,s,a);Bt=(t.flags&131072)!==0}else Bt=!1,$e&&(s.flags&1048576)!==0&&Pg(s,mo,s.index);switch(s.lanes=0,s.tag){case 16:e:{var o=s.pendingProps;if(t=la(s.elementType),s.type=t,typeof t=="function")Nh(t)?(o=da(t,o),s.tag=1,s=ey(null,s,t,o,a)):(s.tag=0,s=pf(null,s,t,o,a));else{if(t!=null){var h=t.$$typeof;if(h===ue){s.tag=11,s=K0(null,s,t,o,a);break e}else if(h===C){s.tag=14,s=Y0(null,s,t,o,a);break e}}throw s=et(t)||t,Error(r(306,s,""))}}return s;case 0:return pf(t,s,s.type,s.pendingProps,a);case 1:return o=s.type,h=da(o,s.pendingProps),ey(t,s,o,h,a);case 3:e:{if(yt(s,s.stateNode.containerInfo),t===null)throw Error(r(387));o=s.pendingProps;var m=s.memoizedState;h=m.element,Bh(t,s),Eo(s,o,null,a);var v=s.memoizedState;if(o=v.cache,$i(s,zt,o),o!==m.cache&&Mh(s,[zt],a,!0),_o(),o=v.element,m.isDehydrated)if(m={element:o,isDehydrated:!1,cache:v.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=ty(t,s,o,a);break e}else if(o!==h){h=ts(Error(r(424)),s),po(h),s=ty(t,s,o,a);break e}else{switch(t=s.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(mt=as(t.firstChild),sn=s,$e=!0,Ki=null,is=!0,a=Xg(s,null,o,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(sa(),o===h){s=mi(t,s,a);break e}an(t,s,o,a)}s=s.child}return s;case 26:return Tu(t,s),t===null?(a=gx(s.type,null,s.pendingProps,null))?s.memoizedState=a:$e||(a=s.type,t=s.pendingProps,o=qu(Ee.current).createElement(a),o[Vt]=s,o[Xt]=t,ln(o,a,t),Pt(o),s.stateNode=o):s.memoizedState=gx(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return Mn(s),t===null&&$e&&(o=s.stateNode=fx(s.type,s.pendingProps,Ee.current),sn=s,is=!0,h=mt,or(s.type)?(tm=h,mt=as(o.firstChild)):mt=h),an(t,s,s.pendingProps.children,a),Tu(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&$e&&((h=o=mt)&&(o=D2(o,s.type,s.pendingProps,is),o!==null?(s.stateNode=o,sn=s,mt=as(o.firstChild),is=!1,h=!0):h=!1),h||Yi(s)),Mn(s),h=s.type,m=s.pendingProps,v=t!==null?t.memoizedProps:null,o=m.children,Xf(h,m)?o=null:v!==null&&Xf(h,v)&&(s.flags|=32),s.memoizedState!==null&&(h=Yh(t,s,KE,null,null,a),qo._currentValue=h),Tu(t,s),an(t,s,o,a),s.child;case 6:return t===null&&$e&&((t=a=mt)&&(a=O2(a,s.pendingProps,is),a!==null?(s.stateNode=a,sn=s,mt=null,t=!0):t=!1),t||Yi(s)),null;case 13:return ny(t,s,a);case 4:return yt(s,s.stateNode.containerInfo),o=s.pendingProps,t===null?s.child=ca(s,null,o,a):an(t,s,o,a),s.child;case 11:return K0(t,s,s.type,s.pendingProps,a);case 7:return an(t,s,s.pendingProps,a),s.child;case 8:return an(t,s,s.pendingProps.children,a),s.child;case 12:return an(t,s,s.pendingProps.children,a),s.child;case 10:return o=s.pendingProps,$i(s,s.type,o.value),an(t,s,o.children,a),s.child;case 9:return h=s.type._context,o=s.pendingProps.children,ra(s),h=rn(h),o=o(h),s.flags|=1,an(t,s,o,a),s.child;case 14:return Y0(t,s,s.type,s.pendingProps,a);case 15:return $0(t,s,s.type,s.pendingProps,a);case 19:return iy(t,s,a);case 31:return t2(t,s,a);case 22:return X0(t,s,a,s.pendingProps);case 24:return ra(s),o=rn(zt),t===null?(h=Lh(),h===null&&(h=ht,m=Vh(),h.pooledCache=m,m.refCount++,m!==null&&(h.pooledCacheLanes|=a),h=m),s.memoizedState={parent:o,cache:h},Uh(s),$i(s,zt,h)):((t.lanes&a)!==0&&(Bh(t,s),Eo(s,null,null,a),_o()),h=t.memoizedState,m=s.memoizedState,h.parent!==o?(h={parent:o,cache:o},s.memoizedState=h,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=h),$i(s,zt,o)):(o=m.cache,$i(s,zt,o),o!==h.cache&&Mh(s,[zt],a,!0))),an(t,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function pi(t){t.flags|=4}function wf(t,s,a,o,h){if((s=(t.mode&32)!==0)&&(s=!1),s){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(Dy())t.flags|=8192;else throw oa=uu,zh}else t.flags&=-16777217}function ay(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!_x(s))if(Dy())t.flags|=8192;else throw oa=uu,zh}function Au(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?Oc():536870912,t.lanes|=s,ul|=s)}function Co(t,s){if(!$e)switch(t.tailMode){case"hidden":s=t.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function pt(t){var s=t.alternate!==null&&t.alternate.child===t.child,a=0,o=0;if(s)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=o,t.childLanes=a,s}function s2(t,s,a){var o=s.pendingProps;switch(jh(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(s),null;case 1:return pt(s),null;case 3:return a=s.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),di(zt),tt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Ja(s)?pi(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Dh())),pt(s),null;case 26:var h=s.type,m=s.memoizedState;return t===null?(pi(s),m!==null?(pt(s),ay(s,m)):(pt(s),wf(s,h,null,o,a))):m?m!==t.memoizedState?(pi(s),pt(s),ay(s,m)):(pt(s),s.flags&=-16777217):(t=t.memoizedProps,t!==o&&pi(s),pt(s),wf(s,h,t,o,a)),null;case 27:if(Yt(s),a=Ee.current,h=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==o&&pi(s);else{if(!o){if(s.stateNode===null)throw Error(r(166));return pt(s),null}t=re.current,Ja(s)?zg(s):(t=fx(h,o,a),s.stateNode=t,pi(s))}return pt(s),null;case 5:if(Yt(s),h=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==o&&pi(s);else{if(!o){if(s.stateNode===null)throw Error(r(166));return pt(s),null}if(m=re.current,Ja(s))zg(s);else{var v=qu(Ee.current);switch(m){case 1:m=v.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:m=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":m=v.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":m=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":m=v.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof o.is=="string"?v.createElement("select",{is:o.is}):v.createElement("select"),o.multiple?m.multiple=!0:o.size&&(m.size=o.size);break;default:m=typeof o.is=="string"?v.createElement(h,{is:o.is}):v.createElement(h)}}m[Vt]=s,m[Xt]=o;e:for(v=s.child;v!==null;){if(v.tag===5||v.tag===6)m.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===s)break e;for(;v.sibling===null;){if(v.return===null||v.return===s)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}s.stateNode=m;e:switch(ln(m,h,o),h){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&pi(s)}}return pt(s),wf(s,s.type,t===null?null:t.memoizedProps,s.pendingProps,a),null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==o&&pi(s);else{if(typeof o!="string"&&s.stateNode===null)throw Error(r(166));if(t=Ee.current,Ja(s)){if(t=s.stateNode,a=s.memoizedProps,o=null,h=sn,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}t[Vt]=s,t=!!(t.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||nx(t.nodeValue,a)),t||Yi(s,!0)}else t=qu(t).createTextNode(o),t[Vt]=s,s.stateNode=t}return pt(s),null;case 31:if(a=s.memoizedState,t===null||t.memoizedState!==null){if(o=Ja(s),a!==null){if(t===null){if(!o)throw Error(r(318));if(t=s.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(557));t[Vt]=s}else sa(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;pt(s),t=!1}else a=Dh(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return s.flags&256?(Hn(s),s):(Hn(s),null);if((s.flags&128)!==0)throw Error(r(558))}return pt(s),null;case 13:if(o=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Ja(s),o!==null&&o.dehydrated!==null){if(t===null){if(!h)throw Error(r(318));if(h=s.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[Vt]=s}else sa(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;pt(s),h=!1}else h=Dh(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return s.flags&256?(Hn(s),s):(Hn(s),null)}return Hn(s),(s.flags&128)!==0?(s.lanes=a,s):(a=o!==null,t=t!==null&&t.memoizedState!==null,a&&(o=s.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool),m=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),m!==h&&(o.flags|=2048)),a!==t&&a&&(s.child.flags|=8192),Au(s,s.updateQueue),pt(s),null);case 4:return tt(),t===null&&Gf(s.stateNode.containerInfo),pt(s),null;case 10:return di(s.type),pt(s),null;case 19:if(L(jt),o=s.memoizedState,o===null)return pt(s),null;if(h=(s.flags&128)!==0,m=o.rendering,m===null)if(h)Co(o,!1);else{if(Tt!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(m=mu(t),m!==null){for(s.flags|=128,Co(o,!1),t=m.updateQueue,s.updateQueue=t,Au(s,t),s.subtreeFlags=0,t=a,a=s.child;a!==null;)kg(a,t),a=a.sibling;return ae(jt,jt.current&1|2),$e&&ci(s,o.treeForkCount),s.child}t=t.sibling}o.tail!==null&&tn()>Du&&(s.flags|=128,h=!0,Co(o,!1),s.lanes=4194304)}else{if(!h)if(t=mu(m),t!==null){if(s.flags|=128,h=!0,t=t.updateQueue,s.updateQueue=t,Au(s,t),Co(o,!0),o.tail===null&&o.tailMode==="hidden"&&!m.alternate&&!$e)return pt(s),null}else 2*tn()-o.renderingStartTime>Du&&a!==536870912&&(s.flags|=128,h=!0,Co(o,!1),s.lanes=4194304);o.isBackwards?(m.sibling=s.child,s.child=m):(t=o.last,t!==null?t.sibling=m:s.child=m,o.last=m)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=tn(),t.sibling=null,a=jt.current,ae(jt,h?a&1|2:a&1),$e&&ci(s,o.treeForkCount),t):(pt(s),null);case 22:case 23:return Hn(s),Gh(),o=s.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(s.flags|=8192):o&&(s.flags|=8192),o?(a&536870912)!==0&&(s.flags&128)===0&&(pt(s),s.subtreeFlags&6&&(s.flags|=8192)):pt(s),a=s.updateQueue,a!==null&&Au(s,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),o=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),o!==a&&(s.flags|=2048),t!==null&&L(aa),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),di(zt),pt(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function i2(t,s){switch(jh(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return di(zt),tt(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return Yt(s),null;case 31:if(s.memoizedState!==null){if(Hn(s),s.alternate===null)throw Error(r(340));sa()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 13:if(Hn(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(r(340));sa()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return L(jt),null;case 4:return tt(),null;case 10:return di(s.type),null;case 22:case 23:return Hn(s),Gh(),t!==null&&L(aa),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return di(zt),null;case 25:return null;default:return null}}function ly(t,s){switch(jh(s),s.tag){case 3:di(zt),tt();break;case 26:case 27:case 5:Yt(s);break;case 4:tt();break;case 31:s.memoizedState!==null&&Hn(s);break;case 13:Hn(s);break;case 19:L(jt);break;case 10:di(s.type);break;case 22:case 23:Hn(s),Gh(),t!==null&&L(aa);break;case 24:di(zt)}}function Ro(t,s){try{var a=s.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var h=o.next;a=h;do{if((a.tag&t)===t){o=void 0;var m=a.create,v=a.inst;o=m(),v.destroy=o}a=a.next}while(a!==h)}}catch(E){lt(s,s.return,E)}}function tr(t,s,a){try{var o=s.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var m=h.next;o=m;do{if((o.tag&t)===t){var v=o.inst,E=v.destroy;if(E!==void 0){v.destroy=void 0,h=s;var j=a,B=E;try{B()}catch($){lt(h,j,$)}}}o=o.next}while(o!==m)}}catch($){lt(s,s.return,$)}}function oy(t){var s=t.updateQueue;if(s!==null){var a=t.stateNode;try{Zg(s,a)}catch(o){lt(t,t.return,o)}}}function cy(t,s,a){a.props=da(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(o){lt(t,s,o)}}function jo(t,s){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof a=="function"?t.refCleanup=a(o):a.current=o}}catch(h){lt(t,s,h)}}function Gs(t,s){var a=t.ref,o=t.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(h){lt(t,s,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){lt(t,s,h)}else a.current=null}function uy(t){var s=t.type,a=t.memoizedProps,o=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break e;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(h){lt(t,t.return,h)}}function Sf(t,s,a){try{var o=t.stateNode;N2(o,t.type,a,s),o[Xt]=s}catch(h){lt(t,t.return,h)}}function dy(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&or(t.type)||t.tag===4}function Tf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||dy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&or(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Nf(t,s,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(t),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=ms));else if(o!==4&&(o===27&&or(t.type)&&(a=t.stateNode,s=null),t=t.child,t!==null))for(Nf(t,s,a),t=t.sibling;t!==null;)Nf(t,s,a),t=t.sibling}function Cu(t,s,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,s?a.insertBefore(t,s):a.appendChild(t);else if(o!==4&&(o===27&&or(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Cu(t,s,a),t=t.sibling;t!==null;)Cu(t,s,a),t=t.sibling}function hy(t){var s=t.stateNode,a=t.memoizedProps;try{for(var o=t.type,h=s.attributes;h.length;)s.removeAttributeNode(h[0]);ln(s,o,a),s[Vt]=t,s[Xt]=a}catch(m){lt(t,t.return,m)}}var gi=!1,qt=!1,Af=!1,fy=typeof WeakSet=="function"?WeakSet:Set,Zt=null;function r2(t,s){if(t=t.containerInfo,Yf=$u,t=Tg(t),vh(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var h=o.anchorOffset,m=o.focusNode;o=o.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var v=0,E=-1,j=-1,B=0,$=0,W=t,q=null;t:for(;;){for(var Q;W!==a||h!==0&&W.nodeType!==3||(E=v+h),W!==m||o!==0&&W.nodeType!==3||(j=v+o),W.nodeType===3&&(v+=W.nodeValue.length),(Q=W.firstChild)!==null;)q=W,W=Q;for(;;){if(W===t)break t;if(q===a&&++B===h&&(E=v),q===m&&++$===o&&(j=v),(Q=W.nextSibling)!==null)break;W=q,q=W.parentNode}W=Q}a=E===-1||j===-1?null:{start:E,end:j}}else a=null}a=a||{start:0,end:0}}else a=null;for($f={focusedElem:t,selectionRange:a},$u=!1,Zt=s;Zt!==null;)if(s=Zt,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,Zt=t;else for(;Zt!==null;){switch(s=Zt,m=s.alternate,t=s.flags,s.tag){case 0:if((t&4)!==0&&(t=s.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)h=t[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,a=s,h=m.memoizedProps,m=m.memoizedState,o=a.stateNode;try{var ge=da(a.type,h);t=o.getSnapshotBeforeUpdate(ge,m),o.__reactInternalSnapshotBeforeUpdate=t}catch(_e){lt(a,a.return,_e)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,a=t.nodeType,a===9)Zf(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Zf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=s.sibling,t!==null){t.return=s.return,Zt=t;break}Zt=s.return}}function my(t,s,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:xi(t,a),o&4&&Ro(5,a);break;case 1:if(xi(t,a),o&4)if(t=a.stateNode,s===null)try{t.componentDidMount()}catch(v){lt(a,a.return,v)}else{var h=da(a.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(h,s,t.__reactInternalSnapshotBeforeUpdate)}catch(v){lt(a,a.return,v)}}o&64&&oy(a),o&512&&jo(a,a.return);break;case 3:if(xi(t,a),o&64&&(t=a.updateQueue,t!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{Zg(t,s)}catch(v){lt(a,a.return,v)}}break;case 27:s===null&&o&4&&hy(a);case 26:case 5:xi(t,a),s===null&&o&4&&uy(a),o&512&&jo(a,a.return);break;case 12:xi(t,a);break;case 31:xi(t,a),o&4&&yy(t,a);break;case 13:xi(t,a),o&4&&xy(t,a),o&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=m2.bind(null,a),k2(t,a))));break;case 22:if(o=a.memoizedState!==null||gi,!o){s=s!==null&&s.memoizedState!==null||qt,h=gi;var m=qt;gi=o,(qt=s)&&!m?vi(t,a,(a.subtreeFlags&8772)!==0):xi(t,a),gi=h,qt=m}break;case 30:break;default:xi(t,a)}}function py(t){var s=t.alternate;s!==null&&(t.alternate=null,py(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&ka(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var vt=null,An=!1;function yi(t,s,a){for(a=a.child;a!==null;)gy(t,s,a),a=a.sibling}function gy(t,s,a){if(At&&typeof At.onCommitFiberUnmount=="function")try{At.onCommitFiberUnmount(Pn,a)}catch{}switch(a.tag){case 26:qt||Gs(a,s),yi(t,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:qt||Gs(a,s);var o=vt,h=An;or(a.type)&&(vt=a.stateNode,An=!1),yi(t,s,a),zo(a.stateNode),vt=o,An=h;break;case 5:qt||Gs(a,s);case 6:if(o=vt,h=An,vt=null,yi(t,s,a),vt=o,An=h,vt!==null)if(An)try{(vt.nodeType===9?vt.body:vt.nodeName==="HTML"?vt.ownerDocument.body:vt).removeChild(a.stateNode)}catch(m){lt(a,s,m)}else try{vt.removeChild(a.stateNode)}catch(m){lt(a,s,m)}break;case 18:vt!==null&&(An?(t=vt,ox(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),xl(t)):ox(vt,a.stateNode));break;case 4:o=vt,h=An,vt=a.stateNode.containerInfo,An=!0,yi(t,s,a),vt=o,An=h;break;case 0:case 11:case 14:case 15:tr(2,a,s),qt||tr(4,a,s),yi(t,s,a);break;case 1:qt||(Gs(a,s),o=a.stateNode,typeof o.componentWillUnmount=="function"&&cy(a,s,o)),yi(t,s,a);break;case 21:yi(t,s,a);break;case 22:qt=(o=qt)||a.memoizedState!==null,yi(t,s,a),qt=o;break;default:yi(t,s,a)}}function yy(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{xl(t)}catch(a){lt(s,s.return,a)}}}function xy(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{xl(t)}catch(a){lt(s,s.return,a)}}function a2(t){switch(t.tag){case 31:case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new fy),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new fy),s;default:throw Error(r(435,t.tag))}}function Ru(t,s){var a=a2(t);s.forEach(function(o){if(!a.has(o)){a.add(o);var h=p2.bind(null,t,o);o.then(h,h)}})}function Cn(t,s){var a=s.deletions;if(a!==null)for(var o=0;o<a.length;o++){var h=a[o],m=t,v=s,E=v;e:for(;E!==null;){switch(E.tag){case 27:if(or(E.type)){vt=E.stateNode,An=!1;break e}break;case 5:vt=E.stateNode,An=!1;break e;case 3:case 4:vt=E.stateNode.containerInfo,An=!0;break e}E=E.return}if(vt===null)throw Error(r(160));gy(m,v,h),vt=null,An=!1,m=h.alternate,m!==null&&(m.return=null),h.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)vy(s,t),s=s.sibling}var bs=null;function vy(t,s){var a=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Cn(s,t),Rn(t),o&4&&(tr(3,t,t.return),Ro(3,t),tr(5,t,t.return));break;case 1:Cn(s,t),Rn(t),o&512&&(qt||a===null||Gs(a,a.return)),o&64&&gi&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var h=bs;if(Cn(s,t),Rn(t),o&512&&(qt||a===null||Gs(a,a.return)),o&4){var m=a!==null?a.memoizedState:null;if(o=t.memoizedState,a===null)if(o===null)if(t.stateNode===null){e:{o=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(o){case"title":m=h.getElementsByTagName("title")[0],(!m||m[Is]||m[Vt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=h.createElement(o),h.head.insertBefore(m,h.querySelector("head > title"))),ln(m,o,a),m[Vt]=t,Pt(m),o=m;break e;case"link":var v=vx("link","href",h).get(o+(a.href||""));if(v){for(var E=0;E<v.length;E++)if(m=v[E],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(E,1);break t}}m=h.createElement(o),ln(m,o,a),h.head.appendChild(m);break;case"meta":if(v=vx("meta","content",h).get(o+(a.content||""))){for(E=0;E<v.length;E++)if(m=v[E],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(E,1);break t}}m=h.createElement(o),ln(m,o,a),h.head.appendChild(m);break;default:throw Error(r(468,o))}m[Vt]=t,Pt(m),o=m}t.stateNode=o}else bx(h,t.type,t.stateNode);else t.stateNode=xx(h,o,t.memoizedProps);else m!==o?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,o===null?bx(h,t.type,t.stateNode):xx(h,o,t.memoizedProps)):o===null&&t.stateNode!==null&&Sf(t,t.memoizedProps,a.memoizedProps)}break;case 27:Cn(s,t),Rn(t),o&512&&(qt||a===null||Gs(a,a.return)),a!==null&&o&4&&Sf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Cn(s,t),Rn(t),o&512&&(qt||a===null||Gs(a,a.return)),t.flags&32){h=t.stateNode;try{Nn(h,"")}catch(ge){lt(t,t.return,ge)}}o&4&&t.stateNode!=null&&(h=t.memoizedProps,Sf(t,h,a!==null?a.memoizedProps:h)),o&1024&&(Af=!0);break;case 6:if(Cn(s,t),Rn(t),o&4){if(t.stateNode===null)throw Error(r(162));o=t.memoizedProps,a=t.stateNode;try{a.nodeValue=o}catch(ge){lt(t,t.return,ge)}}break;case 3:if(Gu=null,h=bs,bs=Hu(s.containerInfo),Cn(s,t),bs=h,Rn(t),o&4&&a!==null&&a.memoizedState.isDehydrated)try{xl(s.containerInfo)}catch(ge){lt(t,t.return,ge)}Af&&(Af=!1,by(t));break;case 4:o=bs,bs=Hu(t.stateNode.containerInfo),Cn(s,t),Rn(t),bs=o;break;case 12:Cn(s,t),Rn(t);break;case 31:Cn(s,t),Rn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Ru(t,o)));break;case 13:Cn(s,t),Rn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Iu=tn()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Ru(t,o)));break;case 22:h=t.memoizedState!==null;var j=a!==null&&a.memoizedState!==null,B=gi,$=qt;if(gi=B||h,qt=$||j,Cn(s,t),qt=$,gi=B,Rn(t),o&8192)e:for(s=t.stateNode,s._visibility=h?s._visibility&-2:s._visibility|1,h&&(a===null||j||gi||qt||ha(t)),a=null,s=t;;){if(s.tag===5||s.tag===26){if(a===null){j=a=s;try{if(m=j.stateNode,h)v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{E=j.stateNode;var W=j.memoizedProps.style,q=W!=null&&W.hasOwnProperty("display")?W.display:null;E.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(ge){lt(j,j.return,ge)}}}else if(s.tag===6){if(a===null){j=s;try{j.stateNode.nodeValue=h?"":j.memoizedProps}catch(ge){lt(j,j.return,ge)}}}else if(s.tag===18){if(a===null){j=s;try{var Q=j.stateNode;h?cx(Q,!0):cx(j.stateNode,!1)}catch(ge){lt(j,j.return,ge)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}o&4&&(o=t.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,Ru(t,a))));break;case 19:Cn(s,t),Rn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Ru(t,o)));break;case 30:break;case 21:break;default:Cn(s,t),Rn(t)}}function Rn(t){var s=t.flags;if(s&2){try{for(var a,o=t.return;o!==null;){if(dy(o)){a=o;break}o=o.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var h=a.stateNode,m=Tf(t);Cu(t,m,h);break;case 5:var v=a.stateNode;a.flags&32&&(Nn(v,""),a.flags&=-33);var E=Tf(t);Cu(t,E,v);break;case 3:case 4:var j=a.stateNode.containerInfo,B=Tf(t);Nf(t,B,j);break;default:throw Error(r(161))}}catch($){lt(t,t.return,$)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function by(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;by(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function xi(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)my(t,s.alternate,s),s=s.sibling}function ha(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:tr(4,s,s.return),ha(s);break;case 1:Gs(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&cy(s,s.return,a),ha(s);break;case 27:zo(s.stateNode);case 26:case 5:Gs(s,s.return),ha(s);break;case 22:s.memoizedState===null&&ha(s);break;case 30:ha(s);break;default:ha(s)}t=t.sibling}}function vi(t,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var o=s.alternate,h=t,m=s,v=m.flags;switch(m.tag){case 0:case 11:case 15:vi(h,m,a),Ro(4,m);break;case 1:if(vi(h,m,a),o=m,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(B){lt(o,o.return,B)}if(o=m,h=o.updateQueue,h!==null){var E=o.stateNode;try{var j=h.shared.hiddenCallbacks;if(j!==null)for(h.shared.hiddenCallbacks=null,h=0;h<j.length;h++)Jg(j[h],E)}catch(B){lt(o,o.return,B)}}a&&v&64&&oy(m),jo(m,m.return);break;case 27:hy(m);case 26:case 5:vi(h,m,a),a&&o===null&&v&4&&uy(m),jo(m,m.return);break;case 12:vi(h,m,a);break;case 31:vi(h,m,a),a&&v&4&&yy(h,m);break;case 13:vi(h,m,a),a&&v&4&&xy(h,m);break;case 22:m.memoizedState===null&&vi(h,m,a),jo(m,m.return);break;case 30:break;default:vi(h,m,a)}s=s.sibling}}function Cf(t,s){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&go(a))}function Rf(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&go(t))}function _s(t,s,a,o){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)_y(t,s,a,o),s=s.sibling}function _y(t,s,a,o){var h=s.flags;switch(s.tag){case 0:case 11:case 15:_s(t,s,a,o),h&2048&&Ro(9,s);break;case 1:_s(t,s,a,o);break;case 3:_s(t,s,a,o),h&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&go(t)));break;case 12:if(h&2048){_s(t,s,a,o),t=s.stateNode;try{var m=s.memoizedProps,v=m.id,E=m.onPostCommit;typeof E=="function"&&E(v,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(j){lt(s,s.return,j)}}else _s(t,s,a,o);break;case 31:_s(t,s,a,o);break;case 13:_s(t,s,a,o);break;case 23:break;case 22:m=s.stateNode,v=s.alternate,s.memoizedState!==null?m._visibility&2?_s(t,s,a,o):Io(t,s):m._visibility&2?_s(t,s,a,o):(m._visibility|=2,ll(t,s,a,o,(s.subtreeFlags&10256)!==0||!1)),h&2048&&Cf(v,s);break;case 24:_s(t,s,a,o),h&2048&&Rf(s.alternate,s);break;default:_s(t,s,a,o)}}function ll(t,s,a,o,h){for(h=h&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var m=t,v=s,E=a,j=o,B=v.flags;switch(v.tag){case 0:case 11:case 15:ll(m,v,E,j,h),Ro(8,v);break;case 23:break;case 22:var $=v.stateNode;v.memoizedState!==null?$._visibility&2?ll(m,v,E,j,h):Io(m,v):($._visibility|=2,ll(m,v,E,j,h)),h&&B&2048&&Cf(v.alternate,v);break;case 24:ll(m,v,E,j,h),h&&B&2048&&Rf(v.alternate,v);break;default:ll(m,v,E,j,h)}s=s.sibling}}function Io(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=t,o=s,h=o.flags;switch(o.tag){case 22:Io(a,o),h&2048&&Cf(o.alternate,o);break;case 24:Io(a,o),h&2048&&Rf(o.alternate,o);break;default:Io(a,o)}s=s.sibling}}var Do=8192;function ol(t,s,a){if(t.subtreeFlags&Do)for(t=t.child;t!==null;)Ey(t,s,a),t=t.sibling}function Ey(t,s,a){switch(t.tag){case 26:ol(t,s,a),t.flags&Do&&t.memoizedState!==null&&Q2(a,bs,t.memoizedState,t.memoizedProps);break;case 5:ol(t,s,a);break;case 3:case 4:var o=bs;bs=Hu(t.stateNode.containerInfo),ol(t,s,a),bs=o;break;case 22:t.memoizedState===null&&(o=t.alternate,o!==null&&o.memoizedState!==null?(o=Do,Do=16777216,ol(t,s,a),Do=o):ol(t,s,a));break;default:ol(t,s,a)}}function wy(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function Oo(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var o=s[a];Zt=o,Ty(o,t)}wy(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Sy(t),t=t.sibling}function Sy(t){switch(t.tag){case 0:case 11:case 15:Oo(t),t.flags&2048&&tr(9,t,t.return);break;case 3:Oo(t);break;case 12:Oo(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,ju(t)):Oo(t);break;default:Oo(t)}}function ju(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var o=s[a];Zt=o,Ty(o,t)}wy(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:tr(8,s,s.return),ju(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,ju(s));break;default:ju(s)}t=t.sibling}}function Ty(t,s){for(;Zt!==null;){var a=Zt;switch(a.tag){case 0:case 11:case 15:tr(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:go(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,Zt=o;else e:for(a=t;Zt!==null;){o=Zt;var h=o.sibling,m=o.return;if(py(o),o===a){Zt=null;break e}if(h!==null){h.return=m,Zt=h;break e}Zt=m}}}var l2={getCacheForType:function(t){var s=rn(zt),a=s.data.get(t);return a===void 0&&(a=t(),s.data.set(t,a)),a},cacheSignal:function(){return rn(zt).controller.signal}},o2=typeof WeakMap=="function"?WeakMap:Map,st=0,ht=null,Ue=null,qe=0,at=0,Fn=null,nr=!1,cl=!1,jf=!1,bi=0,Tt=0,sr=0,fa=0,If=0,Gn=0,ul=0,ko=null,jn=null,Df=!1,Iu=0,Ny=0,Du=1/0,Ou=null,ir=null,Qt=0,rr=null,dl=null,_i=0,Of=0,kf=null,Ay=null,Mo=0,Mf=null;function Qn(){return(st&2)!==0&&qe!==0?qe&-qe:K.T!==null?Bf():kc()}function Cy(){if(Gn===0)if((qe&536870912)===0||$e){var t=Oe;Oe<<=1,(Oe&3932160)===0&&(Oe=262144),Gn=t}else Gn=536870912;return t=qn.current,t!==null&&(t.flags|=32),Gn}function In(t,s,a){(t===ht&&(at===2||at===9)||t.cancelPendingCommit!==null)&&(hl(t,0),ar(t,qe,Gn,!1)),Br(t,a),((st&2)===0||t!==ht)&&(t===ht&&((st&2)===0&&(fa|=a),Tt===4&&ar(t,qe,Gn,!1)),Qs(t))}function Ry(t,s,a){if((st&6)!==0)throw Error(r(327));var o=!a&&(s&127)===0&&(s&t.expiredLanes)===0||Mt(t,s),h=o?d2(t,s):Pf(t,s,!0),m=o;do{if(h===0){cl&&!o&&ar(t,s,0,!1);break}else{if(a=t.current.alternate,m&&!c2(a)){h=Pf(t,s,!1),m=!1;continue}if(h===2){if(m=s,t.errorRecoveryDisabledLanes&m)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){s=v;e:{var E=t;h=ko;var j=E.current.memoizedState.isDehydrated;if(j&&(hl(E,v).flags|=256),v=Pf(E,v,!1),v!==2){if(jf&&!j){E.errorRecoveryDisabledLanes|=m,fa|=m,h=4;break e}m=jn,jn=h,m!==null&&(jn===null?jn=m:jn.push.apply(jn,m))}h=v}if(m=!1,h!==2)continue}}if(h===1){hl(t,0),ar(t,s,0,!0);break}e:{switch(o=t,m=h,m){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:ar(o,s,Gn,!nr);break e;case 2:jn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(h=Iu+300-tn(),10<h)){if(ar(o,s,Gn,!nr),$t(o,0,!0)!==0)break e;_i=s,o.timeoutHandle=ax(jy.bind(null,o,a,jn,Ou,Df,s,Gn,fa,ul,nr,m,"Throttled",-0,0),h);break e}jy(o,a,jn,Ou,Df,s,Gn,fa,ul,nr,m,null,-0,0)}}break}while(!0);Qs(t)}function jy(t,s,a,o,h,m,v,E,j,B,$,W,q,Q){if(t.timeoutHandle=-1,W=s.subtreeFlags,W&8192||(W&16785408)===16785408){W={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ms},Ey(s,m,W);var ge=(m&62914560)===m?Iu-tn():(m&4194048)===m?Ny-tn():0;if(ge=K2(W,ge),ge!==null){_i=m,t.cancelPendingCommit=ge(Ly.bind(null,t,s,m,a,o,h,v,E,j,$,W,null,q,Q)),ar(t,m,v,!B);return}}Ly(t,s,m,a,o,h,v,E,j)}function c2(t){for(var s=t;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var h=a[o],m=h.getSnapshot;h=h.value;try{if(!Un(m(),h))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ar(t,s,a,o){s&=~If,s&=~fa,t.suspendedLanes|=s,t.pingedLanes&=~s,o&&(t.warmLanes|=s),o=t.expirationTimes;for(var h=s;0<h;){var m=31-_t(h),v=1<<m;o[m]=-1,h&=~v}a!==0&&qr(t,a,s)}function ku(){return(st&6)===0?(Vo(0),!1):!0}function Vf(){if(Ue!==null){if(at===0)var t=Ue.return;else t=Ue,ui=ia=null,Jh(t),nl=null,xo=0,t=Ue;for(;t!==null;)ly(t.alternate,t),t=t.return;Ue=null}}function hl(t,s){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,R2(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),_i=0,Vf(),ht=t,Ue=a=oi(t.current,null),qe=s,at=0,Fn=null,nr=!1,cl=Mt(t,s),jf=!1,ul=Gn=If=fa=sr=Tt=0,jn=ko=null,Df=!1,(s&8)!==0&&(s|=s&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=s;0<o;){var h=31-_t(o),m=1<<h;s|=t[h],o&=~m}return bi=s,tu(),a}function Iy(t,s){Ve=null,K.H=No,s===tl||s===cu?(s=Kg(),at=3):s===zh?(s=Kg(),at=4):at=s===mf?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Fn=s,Ue===null&&(Tt=1,wu(t,ts(s,t.current)))}function Dy(){var t=qn.current;return t===null?!0:(qe&4194048)===qe?rs===null:(qe&62914560)===qe||(qe&536870912)!==0?t===rs:!1}function Oy(){var t=K.H;return K.H=No,t===null?No:t}function ky(){var t=K.A;return K.A=l2,t}function Mu(){Tt=4,nr||(qe&4194048)!==qe&&qn.current!==null||(cl=!0),(sr&134217727)===0&&(fa&134217727)===0||ht===null||ar(ht,qe,Gn,!1)}function Pf(t,s,a){var o=st;st|=2;var h=Oy(),m=ky();(ht!==t||qe!==s)&&(Ou=null,hl(t,s)),s=!1;var v=Tt;e:do try{if(at!==0&&Ue!==null){var E=Ue,j=Fn;switch(at){case 8:Vf(),v=6;break e;case 3:case 2:case 9:case 6:qn.current===null&&(s=!0);var B=at;if(at=0,Fn=null,fl(t,E,j,B),a&&cl){v=0;break e}break;default:B=at,at=0,Fn=null,fl(t,E,j,B)}}u2(),v=Tt;break}catch($){Iy(t,$)}while(!0);return s&&t.shellSuspendCounter++,ui=ia=null,st=o,K.H=h,K.A=m,Ue===null&&(ht=null,qe=0,tu()),v}function u2(){for(;Ue!==null;)My(Ue)}function d2(t,s){var a=st;st|=2;var o=Oy(),h=ky();ht!==t||qe!==s?(Ou=null,Du=tn()+500,hl(t,s)):cl=Mt(t,s);e:do try{if(at!==0&&Ue!==null){s=Ue;var m=Fn;t:switch(at){case 1:at=0,Fn=null,fl(t,s,m,1);break;case 2:case 9:if(Gg(m)){at=0,Fn=null,Vy(s);break}s=function(){at!==2&&at!==9||ht!==t||(at=7),Qs(t)},m.then(s,s);break e;case 3:at=7;break e;case 4:at=5;break e;case 7:Gg(m)?(at=0,Fn=null,Vy(s)):(at=0,Fn=null,fl(t,s,m,7));break;case 5:var v=null;switch(Ue.tag){case 26:v=Ue.memoizedState;case 5:case 27:var E=Ue;if(v?_x(v):E.stateNode.complete){at=0,Fn=null;var j=E.sibling;if(j!==null)Ue=j;else{var B=E.return;B!==null?(Ue=B,Vu(B)):Ue=null}break t}}at=0,Fn=null,fl(t,s,m,5);break;case 6:at=0,Fn=null,fl(t,s,m,6);break;case 8:Vf(),Tt=6;break e;default:throw Error(r(462))}}h2();break}catch($){Iy(t,$)}while(!0);return ui=ia=null,K.H=o,K.A=h,st=a,Ue!==null?0:(ht=null,qe=0,tu(),Tt)}function h2(){for(;Ue!==null&&!ja();)My(Ue)}function My(t){var s=ry(t.alternate,t,bi);t.memoizedProps=t.pendingProps,s===null?Vu(t):Ue=s}function Vy(t){var s=t,a=s.alternate;switch(s.tag){case 15:case 0:s=W0(a,s,s.pendingProps,s.type,void 0,qe);break;case 11:s=W0(a,s,s.pendingProps,s.type.render,s.ref,qe);break;case 5:Jh(s);default:ly(a,s),s=Ue=kg(s,bi),s=ry(a,s,bi)}t.memoizedProps=t.pendingProps,s===null?Vu(t):Ue=s}function fl(t,s,a,o){ui=ia=null,Jh(s),nl=null,xo=0;var h=s.return;try{if(e2(t,h,s,a,qe)){Tt=1,wu(t,ts(a,t.current)),Ue=null;return}}catch(m){if(h!==null)throw Ue=h,m;Tt=1,wu(t,ts(a,t.current)),Ue=null;return}s.flags&32768?($e||o===1?t=!0:cl||(qe&536870912)!==0?t=!1:(nr=t=!0,(o===2||o===9||o===3||o===6)&&(o=qn.current,o!==null&&o.tag===13&&(o.flags|=16384))),Py(s,t)):Vu(s)}function Vu(t){var s=t;do{if((s.flags&32768)!==0){Py(s,nr);return}t=s.return;var a=s2(s.alternate,s,bi);if(a!==null){Ue=a;return}if(s=s.sibling,s!==null){Ue=s;return}Ue=s=t}while(s!==null);Tt===0&&(Tt=5)}function Py(t,s){do{var a=i2(t.alternate,t);if(a!==null){a.flags&=32767,Ue=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(t=t.sibling,t!==null)){Ue=t;return}Ue=t=a}while(t!==null);Tt=6,Ue=null}function Ly(t,s,a,o,h,m,v,E,j){t.cancelPendingCommit=null;do Pu();while(Qt!==0);if((st&6)!==0)throw Error(r(327));if(s!==null){if(s===t.current)throw Error(r(177));if(m=s.lanes|s.childLanes,m|=Sh,ph(t,a,m,v,E,j),t===ht&&(Ue=ht=null,qe=0),dl=s,rr=t,_i=a,Of=m,kf=h,Ay=o,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,g2(wn,function(){return Hy(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||o){o=K.T,K.T=null,h=ce.p,ce.p=2,v=st,st|=4;try{r2(t,s,a)}finally{st=v,ce.p=h,K.T=o}}Qt=1,zy(),Uy(),By()}}function zy(){if(Qt===1){Qt=0;var t=rr,s=dl,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=K.T,K.T=null;var o=ce.p;ce.p=2;var h=st;st|=4;try{vy(s,t);var m=$f,v=Tg(t.containerInfo),E=m.focusedElem,j=m.selectionRange;if(v!==E&&E&&E.ownerDocument&&Sg(E.ownerDocument.documentElement,E)){if(j!==null&&vh(E)){var B=j.start,$=j.end;if($===void 0&&($=B),"selectionStart"in E)E.selectionStart=B,E.selectionEnd=Math.min($,E.value.length);else{var W=E.ownerDocument||document,q=W&&W.defaultView||window;if(q.getSelection){var Q=q.getSelection(),ge=E.textContent.length,_e=Math.min(j.start,ge),dt=j.end===void 0?_e:Math.min(j.end,ge);!Q.extend&&_e>dt&&(v=dt,dt=_e,_e=v);var P=wg(E,_e),O=wg(E,dt);if(P&&O&&(Q.rangeCount!==1||Q.anchorNode!==P.node||Q.anchorOffset!==P.offset||Q.focusNode!==O.node||Q.focusOffset!==O.offset)){var U=W.createRange();U.setStart(P.node,P.offset),Q.removeAllRanges(),_e>dt?(Q.addRange(U),Q.extend(O.node,O.offset)):(U.setEnd(O.node,O.offset),Q.addRange(U))}}}}for(W=[],Q=E;Q=Q.parentNode;)Q.nodeType===1&&W.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<W.length;E++){var X=W[E];X.element.scrollLeft=X.left,X.element.scrollTop=X.top}}$u=!!Yf,$f=Yf=null}finally{st=h,ce.p=o,K.T=a}}t.current=s,Qt=2}}function Uy(){if(Qt===2){Qt=0;var t=rr,s=dl,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=K.T,K.T=null;var o=ce.p;ce.p=2;var h=st;st|=4;try{my(t,s.alternate,s)}finally{st=h,ce.p=o,K.T=a}}Qt=3}}function By(){if(Qt===4||Qt===3){Qt=0,zr();var t=rr,s=dl,a=_i,o=Ay;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Qt=5:(Qt=0,dl=rr=null,qy(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(ir=null),ii(a),s=s.stateNode,At&&typeof At.onCommitFiberRoot=="function")try{At.onCommitFiberRoot(Pn,s,void 0,(s.current.flags&128)===128)}catch{}if(o!==null){s=K.T,h=ce.p,ce.p=2,K.T=null;try{for(var m=t.onRecoverableError,v=0;v<o.length;v++){var E=o[v];m(E.value,{componentStack:E.stack})}}finally{K.T=s,ce.p=h}}(_i&3)!==0&&Pu(),Qs(t),h=t.pendingLanes,(a&261930)!==0&&(h&42)!==0?t===Mf?Mo++:(Mo=0,Mf=t):Mo=0,Vo(0)}}function qy(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,go(s)))}function Pu(){return zy(),Uy(),By(),Hy()}function Hy(){if(Qt!==5)return!1;var t=rr,s=Of;Of=0;var a=ii(_i),o=K.T,h=ce.p;try{ce.p=32>a?32:a,K.T=null,a=kf,kf=null;var m=rr,v=_i;if(Qt=0,dl=rr=null,_i=0,(st&6)!==0)throw Error(r(331));var E=st;if(st|=4,Sy(m.current),_y(m,m.current,v,a),st=E,Vo(0,!1),At&&typeof At.onPostCommitFiberRoot=="function")try{At.onPostCommitFiberRoot(Pn,m)}catch{}return!0}finally{ce.p=h,K.T=o,qy(t,s)}}function Fy(t,s,a){s=ts(a,s),s=ff(t.stateNode,s,2),t=Zi(t,s,2),t!==null&&(Br(t,2),Qs(t))}function lt(t,s,a){if(t.tag===3)Fy(t,t,a);else for(;s!==null;){if(s.tag===3){Fy(s,t,a);break}else if(s.tag===1){var o=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(ir===null||!ir.has(o))){t=ts(a,t),a=G0(2),o=Zi(s,a,2),o!==null&&(Q0(a,o,s,t),Br(o,2),Qs(o));break}}s=s.return}}function Lf(t,s,a){var o=t.pingCache;if(o===null){o=t.pingCache=new o2;var h=new Set;o.set(s,h)}else h=o.get(s),h===void 0&&(h=new Set,o.set(s,h));h.has(a)||(jf=!0,h.add(a),t=f2.bind(null,t,s,a),s.then(t,t))}function f2(t,s,a){var o=t.pingCache;o!==null&&o.delete(s),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,ht===t&&(qe&a)===a&&(Tt===4||Tt===3&&(qe&62914560)===qe&&300>tn()-Iu?(st&2)===0&&hl(t,0):If|=a,ul===qe&&(ul=0)),Qs(t)}function Gy(t,s){s===0&&(s=Oc()),t=ta(t,s),t!==null&&(Br(t,s),Qs(t))}function m2(t){var s=t.memoizedState,a=0;s!==null&&(a=s.retryLane),Gy(t,a)}function p2(t,s){var a=0;switch(t.tag){case 31:case 13:var o=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(r(314))}o!==null&&o.delete(s),Gy(t,a)}function g2(t,s){return wt(t,s)}var Lu=null,ml=null,zf=!1,zu=!1,Uf=!1,lr=0;function Qs(t){t!==ml&&t.next===null&&(ml===null?Lu=ml=t:ml=ml.next=t),zu=!0,zf||(zf=!0,x2())}function Vo(t,s){if(!Uf&&zu){Uf=!0;do for(var a=!1,o=Lu;o!==null;){if(t!==0){var h=o.pendingLanes;if(h===0)var m=0;else{var v=o.suspendedLanes,E=o.pingedLanes;m=(1<<31-_t(42|t)+1)-1,m&=h&~(v&~E),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,$y(o,m))}else m=qe,m=$t(o,o===ht?m:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(m&3)===0||Mt(o,m)||(a=!0,$y(o,m));o=o.next}while(a);Uf=!1}}function y2(){Qy()}function Qy(){zu=zf=!1;var t=0;lr!==0&&C2()&&(t=lr);for(var s=tn(),a=null,o=Lu;o!==null;){var h=o.next,m=Ky(o,s);m===0?(o.next=null,a===null?Lu=h:a.next=h,h===null&&(ml=a)):(a=o,(t!==0||(m&3)!==0)&&(zu=!0)),o=h}Qt!==0&&Qt!==5||Vo(t),lr!==0&&(lr=0)}function Ky(t,s){for(var a=t.suspendedLanes,o=t.pingedLanes,h=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var v=31-_t(m),E=1<<v,j=h[v];j===-1?((E&a)===0||(E&o)!==0)&&(h[v]=dn(E,s)):j<=s&&(t.expiredLanes|=E),m&=~E}if(s=ht,a=qe,a=$t(t,t===s?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,a===0||t===s&&(at===2||at===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&$n(o),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Mt(t,a)){if(s=a&-a,s===t.callbackPriority)return s;switch(o!==null&&$n(o),ii(a)){case 2:case 8:a=Vi;break;case 32:a=wn;break;case 268435456:a=Ia;break;default:a=wn}return o=Yy.bind(null,t),a=wt(a,o),t.callbackPriority=s,t.callbackNode=a,s}return o!==null&&o!==null&&$n(o),t.callbackPriority=2,t.callbackNode=null,2}function Yy(t,s){if(Qt!==0&&Qt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Pu()&&t.callbackNode!==a)return null;var o=qe;return o=$t(t,t===ht?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(Ry(t,o,s),Ky(t,tn()),t.callbackNode!=null&&t.callbackNode===a?Yy.bind(null,t):null)}function $y(t,s){if(Pu())return null;Ry(t,s,!0)}function x2(){j2(function(){(st&6)!==0?wt(Mi,y2):Qy()})}function Bf(){if(lr===0){var t=Wa;t===0&&(t=pe,pe<<=1,(pe&261888)===0&&(pe=256)),lr=t}return lr}function Xy(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:La(""+t)}function Jy(t,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,t.id&&a.setAttribute("form",t.id),s.parentNode.insertBefore(a,s),t=new FormData(t),a.parentNode.removeChild(a),t}function v2(t,s,a,o,h){if(s==="submit"&&a&&a.stateNode===h){var m=Xy((h[Xt]||null).action),v=o.submitter;v&&(s=(s=v[Xt]||null)?Xy(s.formAction):v.getAttribute("formAction"),s!==null&&(m=s,v=null));var E=new zs("action","action",null,o,h);t.push({event:E,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(lr!==0){var j=v?Jy(h,v):new FormData(h);lf(a,{pending:!0,data:j,method:h.method,action:m},null,j)}}else typeof m=="function"&&(E.preventDefault(),j=v?Jy(h,v):new FormData(h),lf(a,{pending:!0,data:j,method:h.method,action:m},m,j))},currentTarget:h}]})}}for(var qf=0;qf<wh.length;qf++){var Hf=wh[qf],b2=Hf.toLowerCase(),_2=Hf[0].toUpperCase()+Hf.slice(1);vs(b2,"on"+_2)}vs(Cg,"onAnimationEnd"),vs(Rg,"onAnimationIteration"),vs(jg,"onAnimationStart"),vs("dblclick","onDoubleClick"),vs("focusin","onFocus"),vs("focusout","onBlur"),vs(PE,"onTransitionRun"),vs(LE,"onTransitionStart"),vs(zE,"onTransitionCancel"),vs(Ig,"onTransitionEnd"),Ms("onMouseEnter",["mouseout","mouseover"]),Ms("onMouseLeave",["mouseout","mouseover"]),Ms("onPointerEnter",["pointerout","pointerover"]),Ms("onPointerLeave",["pointerout","pointerover"]),ks("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ks("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ks("onBeforeInput",["compositionend","keypress","textInput","paste"]),ks("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ks("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ks("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Po="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),E2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Po));function Zy(t,s){s=(s&4)!==0;for(var a=0;a<t.length;a++){var o=t[a],h=o.event;o=o.listeners;e:{var m=void 0;if(s)for(var v=o.length-1;0<=v;v--){var E=o[v],j=E.instance,B=E.currentTarget;if(E=E.listener,j!==m&&h.isPropagationStopped())break e;m=E,h.currentTarget=B;try{m(h)}catch($){eu($)}h.currentTarget=null,m=j}else for(v=0;v<o.length;v++){if(E=o[v],j=E.instance,B=E.currentTarget,E=E.listener,j!==m&&h.isPropagationStopped())break e;m=E,h.currentTarget=B;try{m(h)}catch($){eu($)}h.currentTarget=null,m=j}}}}function Be(t,s){var a=s[Oa];a===void 0&&(a=s[Oa]=new Set);var o=t+"__bubble";a.has(o)||(Wy(s,t,2,!1),a.add(o))}function Ff(t,s,a){var o=0;s&&(o|=4),Wy(a,t,o,s)}var Uu="_reactListening"+Math.random().toString(36).slice(2);function Gf(t){if(!t[Uu]){t[Uu]=!0,Yl.forEach(function(a){a!=="selectionchange"&&(E2.has(a)||Ff(a,!1,t),Ff(a,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[Uu]||(s[Uu]=!0,Ff("selectionchange",!1,s))}}function Wy(t,s,a,o){switch(Cx(s)){case 2:var h=X2;break;case 8:h=J2;break;default:h=am}a=h.bind(null,s,a,t),h=void 0,!Kr||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(h=!0),o?h!==void 0?t.addEventListener(s,a,{capture:!0,passive:h}):t.addEventListener(s,a,!0):h!==void 0?t.addEventListener(s,a,{passive:h}):t.addEventListener(s,a,!1)}function Qf(t,s,a,o,h){var m=o;if((s&1)===0&&(s&2)===0&&o!==null)e:for(;;){if(o===null)return;var v=o.tag;if(v===3||v===4){var E=o.stateNode.containerInfo;if(E===h)break;if(v===4)for(v=o.return;v!==null;){var j=v.tag;if((j===3||j===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;E!==null;){if(v=Ds(E),v===null)return;if(j=v.tag,j===5||j===6||j===26||j===27){o=m=v;continue e}E=E.parentNode}}o=o.return}qi(function(){var B=m,$=Jn(a),W=[];e:{var q=Dg.get(t);if(q!==void 0){var Q=zs,ge=t;switch(t){case"keypress":if($r(a)===0)break e;case"keydown":case"keyup":Q=Jc;break;case"focusin":ge="focus",Q=Jr;break;case"focusout":ge="blur",Q=Jr;break;case"beforeblur":case"afterblur":Q=Jr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=lo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=qc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=y;break;case Cg:case Rg:case jg:Q=Fc;break;case Ig:Q=S;break;case"scroll":case"scrollend":Q=ao;break;case"wheel":Q=H;break;case"copy":case"cut":case"paste":Q=Gc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=li;break;case"toggle":case"beforetoggle":Q=Me}var _e=(s&4)!==0,dt=!_e&&(t==="scroll"||t==="scrollend"),P=_e?q!==null?q+"Capture":null:q;_e=[];for(var O=B,U;O!==null;){var X=O;if(U=X.stateNode,X=X.tag,X!==5&&X!==26&&X!==27||U===null||P===null||(X=ps(O,P),X!=null&&_e.push(Lo(O,X,U))),dt)break;O=O.return}0<_e.length&&(q=new Q(q,ge,null,a,$),W.push({event:q,listeners:_e}))}}if((s&7)===0){e:{if(q=t==="mouseover"||t==="pointerover",Q=t==="mouseout"||t==="pointerout",q&&a!==so&&(ge=a.relatedTarget||a.fromElement)&&(Ds(ge)||ge[js]))break e;if((Q||q)&&(q=$.window===$?$:(q=$.ownerDocument)?q.defaultView||q.parentWindow:window,Q?(ge=a.relatedTarget||a.toElement,Q=B,ge=ge?Ds(ge):null,ge!==null&&(dt=u(ge),_e=ge.tag,ge!==dt||_e!==5&&_e!==27&&_e!==6)&&(ge=null)):(Q=null,ge=B),Q!==ge)){if(_e=lo,X="onMouseLeave",P="onMouseEnter",O="mouse",(t==="pointerout"||t==="pointerover")&&(_e=li,X="onPointerLeave",P="onPointerEnter",O="pointer"),dt=Q==null?q:Ln(Q),U=ge==null?q:Ln(ge),q=new _e(X,O+"leave",Q,a,$),q.target=dt,q.relatedTarget=U,X=null,Ds($)===B&&(_e=new _e(P,O+"enter",ge,a,$),_e.target=U,_e.relatedTarget=dt,X=_e),dt=X,Q&&ge)t:{for(_e=w2,P=Q,O=ge,U=0,X=P;X;X=_e(X))U++;X=0;for(var ve=O;ve;ve=_e(ve))X++;for(;0<U-X;)P=_e(P),U--;for(;0<X-U;)O=_e(O),X--;for(;U--;){if(P===O||O!==null&&P===O.alternate){_e=P;break t}P=_e(P),O=_e(O)}_e=null}else _e=null;Q!==null&&ex(W,q,Q,_e,!1),ge!==null&&dt!==null&&ex(W,dt,ge,_e,!0)}}e:{if(q=B?Ln(B):window,Q=q.nodeName&&q.nodeName.toLowerCase(),Q==="select"||Q==="input"&&q.type==="file")var Je=yg;else if(pg(q))if(xg)Je=kE;else{Je=DE;var ye=IE}else Q=q.nodeName,!Q||Q.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?B&&Pa(B.elementType)&&(Je=yg):Je=OE;if(Je&&(Je=Je(t,B))){gg(W,Je,a,$);break e}ye&&ye(t,q,B),t==="focusout"&&B&&q.type==="number"&&B.memoizedProps.value!=null&&eo(q,"number",q.value)}switch(ye=B?Ln(B):window,t){case"focusin":(pg(ye)||ye.contentEditable==="true")&&(Ga=ye,bh=B,fo=null);break;case"focusout":fo=bh=Ga=null;break;case"mousedown":_h=!0;break;case"contextmenu":case"mouseup":case"dragend":_h=!1,Ng(W,a,$);break;case"selectionchange":if(VE)break;case"keydown":case"keyup":Ng(W,a,$)}var Le;if(nt)e:{switch(t){case"compositionstart":var He="onCompositionStart";break e;case"compositionend":He="onCompositionEnd";break e;case"compositionupdate":He="onCompositionUpdate";break e}He=void 0}else Fa?Zr(t,a)&&(He="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(He="onCompositionStart");He&&(qs&&a.locale!=="ko"&&(Fa||He!=="onCompositionStart"?He==="onCompositionEnd"&&Fa&&(Le=ro()):(Ls=$,io="value"in Ls?Ls.value:Ls.textContent,Fa=!0)),ye=Bu(B,He),0<ye.length&&(He=new Bs(He,t,null,a,$),W.push({event:He,listeners:ye}),Le?He.data=Le:(Le=Ha(a),Le!==null&&(He.data=Le)))),(Le=Wn?AE(t,a):CE(t,a))&&(He=Bu(B,"onBeforeInput"),0<He.length&&(ye=new Bs("onBeforeInput","beforeinput",null,a,$),W.push({event:ye,listeners:He}),ye.data=Le)),v2(W,t,B,a,$)}Zy(W,s)})}function Lo(t,s,a){return{instance:t,listener:s,currentTarget:a}}function Bu(t,s){for(var a=s+"Capture",o=[];t!==null;){var h=t,m=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||m===null||(h=ps(t,a),h!=null&&o.unshift(Lo(t,h,m)),h=ps(t,s),h!=null&&o.push(Lo(t,h,m))),t.tag===3)return o;t=t.return}return[]}function w2(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function ex(t,s,a,o,h){for(var m=s._reactName,v=[];a!==null&&a!==o;){var E=a,j=E.alternate,B=E.stateNode;if(E=E.tag,j!==null&&j===o)break;E!==5&&E!==26&&E!==27||B===null||(j=B,h?(B=ps(a,m),B!=null&&v.unshift(Lo(a,B,j))):h||(B=ps(a,m),B!=null&&v.push(Lo(a,B,j)))),a=a.return}v.length!==0&&t.push({event:s,listeners:v})}var S2=/\r\n?/g,T2=/\u0000|\uFFFD/g;function tx(t){return(typeof t=="string"?t:""+t).replace(S2,`
`).replace(T2,"")}function nx(t,s){return s=tx(s),tx(t)===s}function ut(t,s,a,o,h,m){switch(a){case"children":typeof o=="string"?s==="body"||s==="textarea"&&o===""||Nn(t,o):(typeof o=="number"||typeof o=="bigint")&&s!=="body"&&Nn(t,""+o);break;case"className":zn(t,"class",o);break;case"tabIndex":zn(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":zn(t,a,o);break;case"style":no(t,o,m);break;case"data":if(s!=="object"){zn(t,"data",o);break}case"src":case"href":if(o===""&&(s!=="a"||a!=="href")){t.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=La(""+o),t.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(s!=="input"&&ut(t,s,"name",h.name,h,null),ut(t,s,"formEncType",h.formEncType,h,null),ut(t,s,"formMethod",h.formMethod,h,null),ut(t,s,"formTarget",h.formTarget,h,null)):(ut(t,s,"encType",h.encType,h,null),ut(t,s,"method",h.method,h,null),ut(t,s,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=La(""+o),t.setAttribute(a,o);break;case"onClick":o!=null&&(t.onclick=ms);break;case"onScroll":o!=null&&Be("scroll",t);break;case"onScrollEnd":o!=null&&Be("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}a=La(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""+o):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":o===!0?t.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,o):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(a,o):t.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(a):t.setAttribute(a,o);break;case"popover":Be("beforetoggle",t),Be("toggle",t),Ma(t,"popover",o);break;case"xlinkActuate":Lt(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Lt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Lt(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Lt(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Lt(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Lt(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Lt(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Lt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Lt(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Ma(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Bc.get(a)||a,Ma(t,a,o))}}function Kf(t,s,a,o,h,m){switch(a){case"style":no(t,o,m);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"children":typeof o=="string"?Nn(t,o):(typeof o=="number"||typeof o=="bigint")&&Nn(t,""+o);break;case"onScroll":o!=null&&Be("scroll",t);break;case"onScrollEnd":o!=null&&Be("scrollend",t);break;case"onClick":o!=null&&(t.onclick=ms);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!$l.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),s=a.slice(2,h?a.length-7:void 0),m=t[Xt]||null,m=m!=null?m[a]:null,typeof m=="function"&&t.removeEventListener(s,m,h),typeof o=="function")){typeof m!="function"&&m!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(s,o,h);break e}a in t?t[a]=o:o===!0?t.setAttribute(a,""):Ma(t,a,o)}}}function ln(t,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Be("error",t),Be("load",t);var o=!1,h=!1,m;for(m in a)if(a.hasOwnProperty(m)){var v=a[m];if(v!=null)switch(m){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:ut(t,s,m,v,a,null)}}h&&ut(t,s,"srcSet",a.srcSet,a,null),o&&ut(t,s,"src",a.src,a,null);return;case"input":Be("invalid",t);var E=m=v=h=null,j=null,B=null;for(o in a)if(a.hasOwnProperty(o)){var $=a[o];if($!=null)switch(o){case"name":h=$;break;case"type":v=$;break;case"checked":j=$;break;case"defaultChecked":B=$;break;case"value":m=$;break;case"defaultValue":E=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(r(137,s));break;default:ut(t,s,o,$,a,null)}}Lc(t,m,E,j,B,v,h,!1);return;case"select":Be("invalid",t),o=v=m=null;for(h in a)if(a.hasOwnProperty(h)&&(E=a[h],E!=null))switch(h){case"value":m=E;break;case"defaultValue":v=E;break;case"multiple":o=E;default:ut(t,s,h,E,a,null)}s=m,a=v,t.multiple=!!o,s!=null?Li(t,!!o,s,!1):a!=null&&Li(t,!!o,a,!0);return;case"textarea":Be("invalid",t),m=h=o=null;for(v in a)if(a.hasOwnProperty(v)&&(E=a[v],E!=null))switch(v){case"value":o=E;break;case"defaultValue":h=E;break;case"children":m=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(r(91));break;default:ut(t,s,v,E,a,null)}zi(t,o,h,m);return;case"option":for(j in a)if(a.hasOwnProperty(j)&&(o=a[j],o!=null))switch(j){case"selected":t.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:ut(t,s,j,o,a,null)}return;case"dialog":Be("beforetoggle",t),Be("toggle",t),Be("cancel",t),Be("close",t);break;case"iframe":case"object":Be("load",t);break;case"video":case"audio":for(o=0;o<Po.length;o++)Be(Po[o],t);break;case"image":Be("error",t),Be("load",t);break;case"details":Be("toggle",t);break;case"embed":case"source":case"link":Be("error",t),Be("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in a)if(a.hasOwnProperty(B)&&(o=a[B],o!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:ut(t,s,B,o,a,null)}return;default:if(Pa(s)){for($ in a)a.hasOwnProperty($)&&(o=a[$],o!==void 0&&Kf(t,s,$,o,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(o=a[E],o!=null&&ut(t,s,E,o,a,null))}function N2(t,s,a,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,m=null,v=null,E=null,j=null,B=null,$=null;for(Q in a){var W=a[Q];if(a.hasOwnProperty(Q)&&W!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":j=W;default:o.hasOwnProperty(Q)||ut(t,s,Q,null,o,W)}}for(var q in o){var Q=o[q];if(W=a[q],o.hasOwnProperty(q)&&(Q!=null||W!=null))switch(q){case"type":m=Q;break;case"name":h=Q;break;case"checked":B=Q;break;case"defaultChecked":$=Q;break;case"value":v=Q;break;case"defaultValue":E=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(r(137,s));break;default:Q!==W&&ut(t,s,q,Q,o,W)}}Va(t,v,E,j,B,$,m,h);return;case"select":Q=v=E=q=null;for(m in a)if(j=a[m],a.hasOwnProperty(m)&&j!=null)switch(m){case"value":break;case"multiple":Q=j;default:o.hasOwnProperty(m)||ut(t,s,m,null,o,j)}for(h in o)if(m=o[h],j=a[h],o.hasOwnProperty(h)&&(m!=null||j!=null))switch(h){case"value":q=m;break;case"defaultValue":E=m;break;case"multiple":v=m;default:m!==j&&ut(t,s,h,m,o,j)}s=E,a=v,o=Q,q!=null?Li(t,!!a,q,!1):!!o!=!!a&&(s!=null?Li(t,!!a,s,!0):Li(t,!!a,a?[]:"",!1));return;case"textarea":Q=q=null;for(E in a)if(h=a[E],a.hasOwnProperty(E)&&h!=null&&!o.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:ut(t,s,E,null,o,h)}for(v in o)if(h=o[v],m=a[v],o.hasOwnProperty(v)&&(h!=null||m!=null))switch(v){case"value":q=h;break;case"defaultValue":Q=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(r(91));break;default:h!==m&&ut(t,s,v,h,o,m)}zc(t,q,Q);return;case"option":for(var ge in a)if(q=a[ge],a.hasOwnProperty(ge)&&q!=null&&!o.hasOwnProperty(ge))switch(ge){case"selected":t.selected=!1;break;default:ut(t,s,ge,null,o,q)}for(j in o)if(q=o[j],Q=a[j],o.hasOwnProperty(j)&&q!==Q&&(q!=null||Q!=null))switch(j){case"selected":t.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:ut(t,s,j,q,o,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _e in a)q=a[_e],a.hasOwnProperty(_e)&&q!=null&&!o.hasOwnProperty(_e)&&ut(t,s,_e,null,o,q);for(B in o)if(q=o[B],Q=a[B],o.hasOwnProperty(B)&&q!==Q&&(q!=null||Q!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(137,s));break;default:ut(t,s,B,q,o,Q)}return;default:if(Pa(s)){for(var dt in a)q=a[dt],a.hasOwnProperty(dt)&&q!==void 0&&!o.hasOwnProperty(dt)&&Kf(t,s,dt,void 0,o,q);for($ in o)q=o[$],Q=a[$],!o.hasOwnProperty($)||q===Q||q===void 0&&Q===void 0||Kf(t,s,$,q,o,Q);return}}for(var P in a)q=a[P],a.hasOwnProperty(P)&&q!=null&&!o.hasOwnProperty(P)&&ut(t,s,P,null,o,q);for(W in o)q=o[W],Q=a[W],!o.hasOwnProperty(W)||q===Q||q==null&&Q==null||ut(t,s,W,q,o,Q)}function sx(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function A2(){if(typeof performance.getEntriesByType=="function"){for(var t=0,s=0,a=performance.getEntriesByType("resource"),o=0;o<a.length;o++){var h=a[o],m=h.transferSize,v=h.initiatorType,E=h.duration;if(m&&E&&sx(v)){for(v=0,E=h.responseEnd,o+=1;o<a.length;o++){var j=a[o],B=j.startTime;if(B>E)break;var $=j.transferSize,W=j.initiatorType;$&&sx(W)&&(j=j.responseEnd,v+=$*(j<E?1:(E-B)/(j-B)))}if(--o,s+=8*(m+v)/(h.duration/1e3),t++,10<t)break}}if(0<t)return s/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Yf=null,$f=null;function qu(t){return t.nodeType===9?t:t.ownerDocument}function ix(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function rx(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function Xf(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Jf=null;function C2(){var t=window.event;return t&&t.type==="popstate"?t===Jf?!1:(Jf=t,!0):(Jf=null,!1)}var ax=typeof setTimeout=="function"?setTimeout:void 0,R2=typeof clearTimeout=="function"?clearTimeout:void 0,lx=typeof Promise=="function"?Promise:void 0,j2=typeof queueMicrotask=="function"?queueMicrotask:typeof lx<"u"?function(t){return lx.resolve(null).then(t).catch(I2)}:ax;function I2(t){setTimeout(function(){throw t})}function or(t){return t==="head"}function ox(t,s){var a=s,o=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(o===0){t.removeChild(h),xl(s);return}o--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")o++;else if(a==="html")zo(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,zo(a);for(var m=a.firstChild;m;){var v=m.nextSibling,E=m.nodeName;m[Is]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&m.rel.toLowerCase()==="stylesheet"||a.removeChild(m),m=v}}else a==="body"&&zo(t.ownerDocument.body);a=h}while(a);xl(s)}function cx(t,s){var a=t;t=0;do{var o=a.nextSibling;if(a.nodeType===1?s?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(s?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),o&&o.nodeType===8)if(a=o.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=o}while(a)}function Zf(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Zf(a),ka(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function D2(t,s,a,o){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[Is])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var m=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=as(t.nextSibling),t===null)break}return null}function O2(t,s,a){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=as(t.nextSibling),t===null))return null;return t}function ux(t,s){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=as(t.nextSibling),t===null))return null;return t}function Wf(t){return t.data==="$?"||t.data==="$~"}function em(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function k2(t,s){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=s;else if(t.data!=="$?"||a.readyState!=="loading")s();else{var o=function(){s(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function as(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return t}var tm=null;function dx(t){t=t.nextSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(s===0)return as(t.nextSibling);s--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||s++}t=t.nextSibling}return null}function hx(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(s===0)return t;s--}else a!=="/$"&&a!=="/&"||s++}t=t.previousSibling}return null}function fx(t,s,a){switch(s=qu(a),t){case"html":if(t=s.documentElement,!t)throw Error(r(452));return t;case"head":if(t=s.head,!t)throw Error(r(453));return t;case"body":if(t=s.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function zo(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);ka(t)}var ls=new Map,mx=new Set;function Hu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Ei=ce.d;ce.d={f:M2,r:V2,D:P2,C:L2,L:z2,m:U2,X:q2,S:B2,M:H2};function M2(){var t=Ei.f(),s=ku();return t||s}function V2(t){var s=Xn(t);s!==null&&s.tag===5&&s.type==="form"?I0(s):Ei.r(t)}var pl=typeof document>"u"?null:document;function px(t,s,a){var o=pl;if(o&&typeof s=="string"&&s){var h=Tn(s);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),mx.has(h)||(mx.add(h),t={rel:t,crossOrigin:a,href:s},o.querySelector(h)===null&&(s=o.createElement("link"),ln(s,"link",t),Pt(s),o.head.appendChild(s)))}}function P2(t){Ei.D(t),px("dns-prefetch",t,null)}function L2(t,s){Ei.C(t,s),px("preconnect",t,s)}function z2(t,s,a){Ei.L(t,s,a);var o=pl;if(o&&t&&s){var h='link[rel="preload"][as="'+Tn(s)+'"]';s==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+Tn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+Tn(a.imageSizes)+'"]')):h+='[href="'+Tn(t)+'"]';var m=h;switch(s){case"style":m=gl(t);break;case"script":m=yl(t)}ls.has(m)||(t=w({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:t,as:s},a),ls.set(m,t),o.querySelector(h)!==null||s==="style"&&o.querySelector(Uo(m))||s==="script"&&o.querySelector(Bo(m))||(s=o.createElement("link"),ln(s,"link",t),Pt(s),o.head.appendChild(s)))}}function U2(t,s){Ei.m(t,s);var a=pl;if(a&&t){var o=s&&typeof s.as=="string"?s.as:"script",h='link[rel="modulepreload"][as="'+Tn(o)+'"][href="'+Tn(t)+'"]',m=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=yl(t)}if(!ls.has(m)&&(t=w({rel:"modulepreload",href:t},s),ls.set(m,t),a.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Bo(m)))return}o=a.createElement("link"),ln(o,"link",t),Pt(o),a.head.appendChild(o)}}}function B2(t,s,a){Ei.S(t,s,a);var o=pl;if(o&&t){var h=Os(o).hoistableStyles,m=gl(t);s=s||"default";var v=h.get(m);if(!v){var E={loading:0,preload:null};if(v=o.querySelector(Uo(m)))E.loading=5;else{t=w({rel:"stylesheet",href:t,"data-precedence":s},a),(a=ls.get(m))&&nm(t,a);var j=v=o.createElement("link");Pt(j),ln(j,"link",t),j._p=new Promise(function(B,$){j.onload=B,j.onerror=$}),j.addEventListener("load",function(){E.loading|=1}),j.addEventListener("error",function(){E.loading|=2}),E.loading|=4,Fu(v,s,o)}v={type:"stylesheet",instance:v,count:1,state:E},h.set(m,v)}}}function q2(t,s){Ei.X(t,s);var a=pl;if(a&&t){var o=Os(a).hoistableScripts,h=yl(t),m=o.get(h);m||(m=a.querySelector(Bo(h)),m||(t=w({src:t,async:!0},s),(s=ls.get(h))&&sm(t,s),m=a.createElement("script"),Pt(m),ln(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},o.set(h,m))}}function H2(t,s){Ei.M(t,s);var a=pl;if(a&&t){var o=Os(a).hoistableScripts,h=yl(t),m=o.get(h);m||(m=a.querySelector(Bo(h)),m||(t=w({src:t,async:!0,type:"module"},s),(s=ls.get(h))&&sm(t,s),m=a.createElement("script"),Pt(m),ln(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},o.set(h,m))}}function gx(t,s,a,o){var h=(h=Ee.current)?Hu(h):null;if(!h)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=gl(a.href),a=Os(h).hoistableStyles,o=a.get(s),o||(o={type:"style",instance:null,count:0,state:null},a.set(s,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=gl(a.href);var m=Os(h).hoistableStyles,v=m.get(t);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,v),(m=h.querySelector(Uo(t)))&&!m._p&&(v.instance=m,v.state.loading=5),ls.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ls.set(t,a),m||F2(h,t,a,v.state))),s&&o===null)throw Error(r(528,""));return v}if(s&&o!==null)throw Error(r(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=yl(a),a=Os(h).hoistableScripts,o=a.get(s),o||(o={type:"script",instance:null,count:0,state:null},a.set(s,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function gl(t){return'href="'+Tn(t)+'"'}function Uo(t){return'link[rel="stylesheet"]['+t+"]"}function yx(t){return w({},t,{"data-precedence":t.precedence,precedence:null})}function F2(t,s,a,o){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?o.loading=1:(s=t.createElement("link"),o.preload=s,s.addEventListener("load",function(){return o.loading|=1}),s.addEventListener("error",function(){return o.loading|=2}),ln(s,"link",a),Pt(s),t.head.appendChild(s))}function yl(t){return'[src="'+Tn(t)+'"]'}function Bo(t){return"script[async]"+t}function xx(t,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var o=t.querySelector('style[data-href~="'+Tn(a.href)+'"]');if(o)return s.instance=o,Pt(o),o;var h=w({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),Pt(o),ln(o,"style",h),Fu(o,a.precedence,t),s.instance=o;case"stylesheet":h=gl(a.href);var m=t.querySelector(Uo(h));if(m)return s.state.loading|=4,s.instance=m,Pt(m),m;o=yx(a),(h=ls.get(h))&&nm(o,h),m=(t.ownerDocument||t).createElement("link"),Pt(m);var v=m;return v._p=new Promise(function(E,j){v.onload=E,v.onerror=j}),ln(m,"link",o),s.state.loading|=4,Fu(m,a.precedence,t),s.instance=m;case"script":return m=yl(a.src),(h=t.querySelector(Bo(m)))?(s.instance=h,Pt(h),h):(o=a,(h=ls.get(m))&&(o=w({},a),sm(o,h)),t=t.ownerDocument||t,h=t.createElement("script"),Pt(h),ln(h,"link",o),t.head.appendChild(h),s.instance=h);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(o=s.instance,s.state.loading|=4,Fu(o,a.precedence,t));return s.instance}function Fu(t,s,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,m=h,v=0;v<o.length;v++){var E=o[v];if(E.dataset.precedence===s)m=E;else if(m!==h)break}m?m.parentNode.insertBefore(t,m.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(t,s.firstChild))}function nm(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function sm(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var Gu=null;function vx(t,s,a){if(Gu===null){var o=new Map,h=Gu=new Map;h.set(a,o)}else h=Gu,o=h.get(a),o||(o=new Map,h.set(a,o));if(o.has(t))return o;for(o.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var m=a[h];if(!(m[Is]||m[Vt]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var v=m.getAttribute(s)||"";v=t+v;var E=o.get(v);E?E.push(m):o.set(v,[m])}}return o}function bx(t,s,a){t=t.ownerDocument||t,t.head.insertBefore(a,s==="title"?t.querySelector("head > title"):null)}function G2(t,s,a){if(a===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return t=s.disabled,typeof s.precedence=="string"&&t==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function _x(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function Q2(t,s,a,o){if(a.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=gl(o.href),m=s.querySelector(Uo(h));if(m){s=m._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(t.count++,t=Qu.bind(t),s.then(t,t)),a.state.loading|=4,a.instance=m,Pt(m);return}m=s.ownerDocument||s,o=yx(o),(h=ls.get(h))&&nm(o,h),m=m.createElement("link"),Pt(m);var v=m;v._p=new Promise(function(E,j){v.onload=E,v.onerror=j}),ln(m,"link",o),a.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Qu.bind(t),s.addEventListener("load",a),s.addEventListener("error",a))}}var im=0;function K2(t,s){return t.stylesheets&&t.count===0&&Yu(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var o=setTimeout(function(){if(t.stylesheets&&Yu(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+s);0<t.imgBytes&&im===0&&(im=62500*A2());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Yu(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>im?50:800)+s);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(o),clearTimeout(h)}}:null}function Qu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Yu(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Ku=null;function Yu(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Ku=new Map,s.forEach(Y2,t),Ku=null,Qu.call(t))}function Y2(t,s){if(!(s.state.loading&4)){var a=Ku.get(t);if(a)var o=a.get(null);else{a=new Map,Ku.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<h.length;m++){var v=h[m];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),o=v)}o&&a.set(null,o)}h=s.instance,v=h.getAttribute("data-precedence"),m=a.get(v)||o,m===o&&a.set(null,h),a.set(v,h),this.count++,o=Qu.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),m?m.parentNode.insertBefore(h,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),s.state.loading|=4}}var qo={$$typeof:le,Provider:null,Consumer:null,_currentValue:xe,_currentValue2:xe,_threadCount:0};function $2(t,s,a,o,h,m,v,E,j){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Rs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rs(0),this.hiddenUpdates=Rs(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=m,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=j,this.incompleteTransitions=new Map}function Ex(t,s,a,o,h,m,v,E,j,B,$,W){return t=new $2(t,s,a,v,j,B,$,W,E),s=1,m===!0&&(s|=24),m=Bn(3,null,null,s),t.current=m,m.stateNode=t,s=Vh(),s.refCount++,t.pooledCache=s,s.refCount++,m.memoizedState={element:o,isDehydrated:a,cache:s},Uh(m),t}function wx(t){return t?(t=Ya,t):Ya}function Sx(t,s,a,o,h,m){h=wx(h),o.context===null?o.context=h:o.pendingContext=h,o=Ji(s),o.payload={element:a},m=m===void 0?null:m,m!==null&&(o.callback=m),a=Zi(t,o,s),a!==null&&(In(a,t,s),bo(a,t,s))}function Tx(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<s?a:s}}function rm(t,s){Tx(t,s),(t=t.alternate)&&Tx(t,s)}function Nx(t){if(t.tag===13||t.tag===31){var s=ta(t,67108864);s!==null&&In(s,t,67108864),rm(t,67108864)}}function Ax(t){if(t.tag===13||t.tag===31){var s=Qn();s=Hr(s);var a=ta(t,s);a!==null&&In(a,t,s),rm(t,s)}}var $u=!0;function X2(t,s,a,o){var h=K.T;K.T=null;var m=ce.p;try{ce.p=2,am(t,s,a,o)}finally{ce.p=m,K.T=h}}function J2(t,s,a,o){var h=K.T;K.T=null;var m=ce.p;try{ce.p=8,am(t,s,a,o)}finally{ce.p=m,K.T=h}}function am(t,s,a,o){if($u){var h=lm(o);if(h===null)Qf(t,s,o,Xu,a),Rx(t,o);else if(W2(h,t,s,a,o))o.stopPropagation();else if(Rx(t,o),s&4&&-1<Z2.indexOf(t)){for(;h!==null;){var m=Xn(h);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var v=Ct(m.pendingLanes);if(v!==0){var E=m;for(E.pendingLanes|=2,E.entangledLanes|=2;v;){var j=1<<31-_t(v);E.entanglements[1]|=j,v&=~j}Qs(m),(st&6)===0&&(Du=tn()+500,Vo(0))}}break;case 31:case 13:E=ta(m,2),E!==null&&In(E,m,2),ku(),rm(m,2)}if(m=lm(o),m===null&&Qf(t,s,o,Xu,a),m===h)break;h=m}h!==null&&o.stopPropagation()}else Qf(t,s,o,null,a)}}function lm(t){return t=Jn(t),om(t)}var Xu=null;function om(t){if(Xu=null,t=Ds(t),t!==null){var s=u(t);if(s===null)t=null;else{var a=s.tag;if(a===13){if(t=f(s),t!==null)return t;t=null}else if(a===31){if(t=p(s),t!==null)return t;t=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return Xu=t,null}function Cx(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Cs()){case Mi:return 2;case Vi:return 8;case wn:case Gl:return 32;case Ia:return 268435456;default:return 32}default:return 32}}var cm=!1,cr=null,ur=null,dr=null,Ho=new Map,Fo=new Map,hr=[],Z2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Rx(t,s){switch(t){case"focusin":case"focusout":cr=null;break;case"dragenter":case"dragleave":ur=null;break;case"mouseover":case"mouseout":dr=null;break;case"pointerover":case"pointerout":Ho.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fo.delete(s.pointerId)}}function Go(t,s,a,o,h,m){return t===null||t.nativeEvent!==m?(t={blockedOn:s,domEventName:a,eventSystemFlags:o,nativeEvent:m,targetContainers:[h]},s!==null&&(s=Xn(s),s!==null&&Nx(s)),t):(t.eventSystemFlags|=o,s=t.targetContainers,h!==null&&s.indexOf(h)===-1&&s.push(h),t)}function W2(t,s,a,o,h){switch(s){case"focusin":return cr=Go(cr,t,s,a,o,h),!0;case"dragenter":return ur=Go(ur,t,s,a,o,h),!0;case"mouseover":return dr=Go(dr,t,s,a,o,h),!0;case"pointerover":var m=h.pointerId;return Ho.set(m,Go(Ho.get(m)||null,t,s,a,o,h)),!0;case"gotpointercapture":return m=h.pointerId,Fo.set(m,Go(Fo.get(m)||null,t,s,a,o,h)),!0}return!1}function jx(t){var s=Ds(t.target);if(s!==null){var a=u(s);if(a!==null){if(s=a.tag,s===13){if(s=f(a),s!==null){t.blockedOn=s,hs(t.priority,function(){Ax(a)});return}}else if(s===31){if(s=p(a),s!==null){t.blockedOn=s,hs(t.priority,function(){Ax(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ju(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var a=lm(t.nativeEvent);if(a===null){a=t.nativeEvent;var o=new a.constructor(a.type,a);so=o,a.target.dispatchEvent(o),so=null}else return s=Xn(a),s!==null&&Nx(s),t.blockedOn=a,!1;s.shift()}return!0}function Ix(t,s,a){Ju(t)&&a.delete(s)}function ew(){cm=!1,cr!==null&&Ju(cr)&&(cr=null),ur!==null&&Ju(ur)&&(ur=null),dr!==null&&Ju(dr)&&(dr=null),Ho.forEach(Ix),Fo.forEach(Ix)}function Zu(t,s){t.blockedOn===s&&(t.blockedOn=null,cm||(cm=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,ew)))}var Wu=null;function Dx(t){Wu!==t&&(Wu=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Wu===t&&(Wu=null);for(var s=0;s<t.length;s+=3){var a=t[s],o=t[s+1],h=t[s+2];if(typeof o!="function"){if(om(o||a)===null)continue;break}var m=Xn(a);m!==null&&(t.splice(s,3),s-=3,lf(m,{pending:!0,data:h,method:a.method,action:o},o,h))}}))}function xl(t){function s(j){return Zu(j,t)}cr!==null&&Zu(cr,t),ur!==null&&Zu(ur,t),dr!==null&&Zu(dr,t),Ho.forEach(s),Fo.forEach(s);for(var a=0;a<hr.length;a++){var o=hr[a];o.blockedOn===t&&(o.blockedOn=null)}for(;0<hr.length&&(a=hr[0],a.blockedOn===null);)jx(a),a.blockedOn===null&&hr.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var h=a[o],m=a[o+1],v=h[Xt]||null;if(typeof m=="function")v||Dx(a);else if(v){var E=null;if(m&&m.hasAttribute("formAction")){if(h=m,v=m[Xt]||null)E=v.formAction;else if(om(h)!==null)continue}else E=v.action;typeof E=="function"?a[o+1]=E:(a.splice(o,3),o-=3),Dx(a)}}}function Ox(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(v){return h=v})},focusReset:"manual",scroll:"manual"})}function s(){h!==null&&(h(),h=null),o||setTimeout(a,20)}function a(){if(!o&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(a,100),function(){o=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),h!==null&&(h(),h=null)}}}function um(t){this._internalRoot=t}ed.prototype.render=um.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(r(409));var a=s.current,o=Qn();Sx(a,o,t,s,null,null)},ed.prototype.unmount=um.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;Sx(t.current,2,null,t,null,null),ku(),s[js]=null}};function ed(t){this._internalRoot=t}ed.prototype.unstable_scheduleHydration=function(t){if(t){var s=kc();t={blockedOn:null,target:t,priority:s};for(var a=0;a<hr.length&&s!==0&&s<hr[a].priority;a++);hr.splice(a,0,t),a===0&&jx(t)}};var kx=e.version;if(kx!=="19.2.3")throw Error(r(527,kx,"19.2.3"));ce.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=g(s),t=t!==null?_(t):null,t=t===null?null:t.stateNode,t};var tw={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var td=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!td.isDisabled&&td.supportsFiber)try{Pn=td.inject(tw),At=td}catch{}}return Ko.createRoot=function(t,s){if(!l(t))throw Error(r(299));var a=!1,o="",h=B0,m=q0,v=H0;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(o=s.identifierPrefix),s.onUncaughtError!==void 0&&(h=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(v=s.onRecoverableError)),s=Ex(t,1,!1,null,null,a,o,null,h,m,v,Ox),t[js]=s.current,Gf(t),new um(s)},Ko.hydrateRoot=function(t,s,a){if(!l(t))throw Error(r(299));var o=!1,h="",m=B0,v=q0,E=H0,j=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.formState!==void 0&&(j=a.formState)),s=Ex(t,1,!0,s,a??null,o,h,j,m,v,E,Ox),s.context=wx(null),a=s.current,o=Qn(),o=Hr(o),h=Ji(o),h.callback=null,Zi(a,h,o),a=o,s.current.lanes=a,Br(s,a),Qs(s),t[js]=s.current,Gf(t),new ed(s)},Ko.version="19.2.3",Ko}var Fx;function uw(){if(Fx)return fm.exports;Fx=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),fm.exports=cw(),fm.exports}var dw=uw();const hw=Ab(dw);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fw=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),mw=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),Gx=i=>{const e=mw(i);return e.charAt(0).toUpperCase()+e.slice(1)},jb=(...i)=>i.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),pw=i=>{for(const e in i)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var gw={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yw=Z.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:l="",children:u,iconNode:f,...p},x)=>Z.createElement("svg",{ref:x,...gw,width:e,height:e,stroke:i,strokeWidth:r?Number(n)*24/Number(e):n,className:jb("lucide",l),...!u&&!pw(p)&&{"aria-hidden":"true"},...p},[...f.map(([g,_])=>Z.createElement(g,_)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=(i,e)=>{const n=Z.forwardRef(({className:r,...l},u)=>Z.createElement(yw,{ref:u,iconNode:e,className:jb(`lucide-${fw(Gx(i))}`,`lucide-${i}`,r),...l}));return n.displayName=Gx(i),n};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xw=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],vw=me("arrow-down",xw);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bw=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],_w=me("arrow-left",bw);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ew=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],qd=me("arrow-right",Ew);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ww=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],Sw=me("arrow-up",ww);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tw=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],Ib=me("banknote",Tw);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nw=[["path",{d:"M3 5v14",key:"1nt18q"}],["path",{d:"M8 5v14",key:"1ybrkv"}],["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"M17 5v14",key:"ycjyhj"}],["path",{d:"M21 5v14",key:"nzette"}]],Aw=me("barcode",Nw);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cw=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Rw=me("bell",Cw);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jw=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Db=me("calendar",jw);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iw=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Qx=me("camera",Iw);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dw=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ow=me("check",Dw);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kw=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Kx=me("chevron-down",kw);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mw=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],fp=me("chevron-right",Mw);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vw=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Dm=me("circle-alert",Vw);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pw=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Hd=me("circle-check-big",Pw);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lw=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],zw=me("clock",Lw);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uw=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],Bw=me("cloud-upload",Uw);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qw=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Ob=me("credit-card",qw);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hw=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],kb=me("database",Hw);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fw=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Fd=me("download",Fw);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gw=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Mb=me("eye",Gw);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qw=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],mp=me("file-text",Qw);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kw=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]],Yw=me("file-up",Kw);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $w=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],Xw=me("file",$w);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jw=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],Zw=me("flame",Jw);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ww=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],eS=me("funnel",Ww);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],nS=me("globe",tS);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sS=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],bd=me("layers",sS);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iS=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Yx=me("layout-dashboard",iS);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rS=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],pp=me("loader-circle",rS);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aS=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Vb=me("lock",aS);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lS=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],$x=me("log-out",lS);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oS=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Gd=me("mail",oS);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cS=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],od=me("map-pin",cS);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uS=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Pb=me("message-square",uS);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dS=[["path",{d:"M5 12h14",key:"1ays0h"}]],hS=me("minus",dS);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fS=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Ti=me("package",fS);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mS=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],pS=me("panels-top-left",mS);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gS=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Om=me("phone",gS);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yS=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],xa=me("plus",yS);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xS=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],vS=me("printer",xS);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bS=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Lb=me("save",bS);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _S=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M8 7v10",key:"23sfjj"}],["path",{d:"M12 7v10",key:"jspqdw"}],["path",{d:"M17 7v10",key:"578dap"}]],cd=me("scan-barcode",_S);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ES=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],zb=me("search",ES);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wS=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],SS=me("send",wS);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TS=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],NS=me("server",TS);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AS=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],km=me("settings",AS);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CS=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Mm=me("shield-check",CS);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RS=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Ub=me("shield",RS);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jS=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],IS=me("shopping-bag",jS);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DS=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],vr=me("shopping-cart",DS);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OS=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],kS=me("smartphone",OS);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MS=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],VS=me("square-check-big",MS);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PS=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],LS=me("square-pen",PS);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zS=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],US=me("square",zS);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BS=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],ws=me("store",BS);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qS=[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],HS=me("toggle-left",qS);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FS=[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],Bb=me("toggle-right",FS);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GS=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],gp=me("trash-2",GS);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QS=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],KS=me("trending-up",QS);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YS=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Qd=me("triangle-alert",YS);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $S=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],qb=me("upload",$S);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XS=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],JS=me("user-plus",XS);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZS=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Cr=me("user",ZS);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WS=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],lc=me("users",WS);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eT=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],tT=me("wifi-off",eT);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nT=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],kn=me("x",nT),sT=()=>{};var Xx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hb=function(i){const e=[];let n=0;for(let r=0;r<i.length;r++){let l=i.charCodeAt(r);l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):(l&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(l=65536+((l&1023)<<10)+(i.charCodeAt(++r)&1023),e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},iT=function(i){const e=[];let n=0,r=0;for(;n<i.length;){const l=i[n++];if(l<128)e[r++]=String.fromCharCode(l);else if(l>191&&l<224){const u=i[n++];e[r++]=String.fromCharCode((l&31)<<6|u&63)}else if(l>239&&l<365){const u=i[n++],f=i[n++],p=i[n++],x=((l&7)<<18|(u&63)<<12|(f&63)<<6|p&63)-65536;e[r++]=String.fromCharCode(55296+(x>>10)),e[r++]=String.fromCharCode(56320+(x&1023))}else{const u=i[n++],f=i[n++];e[r++]=String.fromCharCode((l&15)<<12|(u&63)<<6|f&63)}}return e.join("")},Fb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let l=0;l<i.length;l+=3){const u=i[l],f=l+1<i.length,p=f?i[l+1]:0,x=l+2<i.length,g=x?i[l+2]:0,_=u>>2,w=(u&3)<<4|p>>4;let T=(p&15)<<2|g>>6,M=g&63;x||(M=64,f||(T=64)),r.push(n[_],n[w],n[T],n[M])}return r.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(Hb(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):iT(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let l=0;l<i.length;){const u=n[i.charAt(l++)],p=l<i.length?n[i.charAt(l)]:0;++l;const g=l<i.length?n[i.charAt(l)]:64;++l;const w=l<i.length?n[i.charAt(l)]:64;if(++l,u==null||p==null||g==null||w==null)throw new rT;const T=u<<2|p>>4;if(r.push(T),g!==64){const M=p<<4&240|g>>2;if(r.push(M),w!==64){const F=g<<6&192|w;r.push(F)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class rT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const aT=function(i){const e=Hb(i);return Fb.encodeByteArray(e,!0)},_d=function(i){return aT(i).replace(/\./g,"")},Gb=function(i){try{return Fb.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT=()=>lT().__FIREBASE_DEFAULTS__,cT=()=>{if(typeof process>"u"||typeof Xx>"u")return;const i=Xx.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},uT=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&Gb(i[1]);return e&&JSON.parse(e)},Kd=()=>{try{return sT()||oT()||cT()||uT()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},Qb=i=>{var e,n;return(n=(e=Kd())==null?void 0:e.emulatorHosts)==null?void 0:n[i]},dT=i=>{const e=Qb(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Kb=()=>{var i;return(i=Kd())==null?void 0:i.config},Yb=i=>{var e;return(e=Kd())==null?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pl(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function $b(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fT(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",l=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${r}`,aud:r,iat:l,exp:l+3600,auth_time:l,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...i};return[_d(JSON.stringify(n)),_d(JSON.stringify(f)),""].join(".")}const ec={};function mT(){const i={prod:[],emulator:[]};for(const e of Object.keys(ec))ec[e]?i.emulator.push(e):i.prod.push(e);return i}function pT(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let Jx=!1;function Xb(i,e){if(typeof window>"u"||typeof document>"u"||!Pl(window.location.host)||ec[i]===e||ec[i]||Jx)return;ec[i]=e;function n(T){return`__firebase__banner__${T}`}const r="__firebase__banner",u=mT().prod.length>0;function f(){const T=document.getElementById(r);T&&T.remove()}function p(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function x(T,M){T.setAttribute("width","24"),T.setAttribute("id",M),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function g(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{Jx=!0,f()},T}function _(T,M){T.setAttribute("id",M),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function w(){const T=pT(r),M=n("text"),F=document.getElementById(M)||document.createElement("span"),Y=n("learnmore"),G=document.getElementById(Y)||document.createElement("a"),ee=n("preprendIcon"),ne=document.getElementById(ee)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const le=T.element;p(le),_(G,Y);const ue=g();x(ne,ee),le.append(ne,F,G,ue),document.body.appendChild(le)}u?(F.innerText="Preview backend disconnected.",ne.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ne.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,F.innerText="Preview backend running in this workspace."),F.setAttribute("id",M)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function gT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(yn())}function yT(){var e;const i=(e=Kd())==null?void 0:e.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function xT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function vT(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function bT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _T(){const i=yn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function ET(){return!yT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function wT(){try{return typeof indexedDB=="object"}catch{return!1}}function ST(){return new Promise((i,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(r);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(r),i(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{var u;e(((u=l.error)==null?void 0:u.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT="FirebaseError";class Di extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=TT,Object.setPrototypeOf(this,Di.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yc.prototype.create)}}class yc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},l=`${this.service}/${e}`,u=this.errors[e],f=u?NT(u,r):"Error",p=`${this.serviceName}: ${f} (${l}).`;return new Di(l,p,r)}}function NT(i,e){return i.replace(AT,(n,r)=>{const l=e[r];return l!=null?String(l):`<${r}?>`})}const AT=/\{\$([^}]+)}/g;function CT(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function va(i,e){if(i===e)return!0;const n=Object.keys(i),r=Object.keys(e);for(const l of n){if(!r.includes(l))return!1;const u=i[l],f=e[l];if(Zx(u)&&Zx(f)){if(!va(u,f))return!1}else if(u!==f)return!1}for(const l of r)if(!n.includes(l))return!1;return!0}function Zx(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xc(i){const e=[];for(const[n,r]of Object.entries(i))Array.isArray(r)?r.forEach(l=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Yo(i){const e={};return i.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[l,u]=r.split("=");e[decodeURIComponent(l)]=decodeURIComponent(u)}}),e}function $o(i){const e=i.indexOf("?");if(!e)return"";const n=i.indexOf("#",e);return i.substring(e,n>0?n:void 0)}function RT(i,e){const n=new jT(i,e);return n.subscribe.bind(n)}class jT{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let l;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");IT(e,["next","error","complete"])?l=e:l={next:e,error:n,complete:r},l.next===void 0&&(l.next=ym),l.error===void 0&&(l.error=ym),l.complete===void 0&&(l.complete=ym);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function IT(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function ym(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ot(i){return i&&i._delegate?i._delegate:i}class ba{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ma="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new hT;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&r.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(r)return null;throw l}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(kT(e))try{this.getOrInitializeService({instanceIdentifier:ma})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:l});r.resolve(u)}catch{}}}}clearInstance(e=ma){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ma){return this.instances.has(e)}getOptions(e=ma){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[u,f]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(u);r===p&&f.resolve(l)}return l}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(r)??new Set;l.add(e),this.onInitCallbacks.set(r,l);const u=this.instances.get(r);return u&&e(u,r),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const l of r)try{l(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:OT(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ma){return this.component?this.component.multipleInstances?e:ma:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function OT(i){return i===ma?void 0:i}function kT(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new DT(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ge;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Ge||(Ge={}));const VT={debug:Ge.DEBUG,verbose:Ge.VERBOSE,info:Ge.INFO,warn:Ge.WARN,error:Ge.ERROR,silent:Ge.SILENT},PT=Ge.INFO,LT={[Ge.DEBUG]:"log",[Ge.VERBOSE]:"log",[Ge.INFO]:"info",[Ge.WARN]:"warn",[Ge.ERROR]:"error"},zT=(i,e,...n)=>{if(e<i.logLevel)return;const r=new Date().toISOString(),l=LT[e];if(l)console[l](`[${r}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class yp{constructor(e){this.name=e,this._logLevel=PT,this._logHandler=zT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?VT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ge.DEBUG,...e),this._logHandler(this,Ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ge.VERBOSE,...e),this._logHandler(this,Ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ge.INFO,...e),this._logHandler(this,Ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ge.WARN,...e),this._logHandler(this,Ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ge.ERROR,...e),this._logHandler(this,Ge.ERROR,...e)}}const UT=(i,e)=>e.some(n=>i instanceof n);let Wx,ev;function BT(){return Wx||(Wx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function qT(){return ev||(ev=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Jb=new WeakMap,Vm=new WeakMap,Zb=new WeakMap,xm=new WeakMap,xp=new WeakMap;function HT(i){const e=new Promise((n,r)=>{const l=()=>{i.removeEventListener("success",u),i.removeEventListener("error",f)},u=()=>{n(wr(i.result)),l()},f=()=>{r(i.error),l()};i.addEventListener("success",u),i.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&Jb.set(n,i)}).catch(()=>{}),xp.set(e,i),e}function FT(i){if(Vm.has(i))return;const e=new Promise((n,r)=>{const l=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",f),i.removeEventListener("abort",f)},u=()=>{n(),l()},f=()=>{r(i.error||new DOMException("AbortError","AbortError")),l()};i.addEventListener("complete",u),i.addEventListener("error",f),i.addEventListener("abort",f)});Vm.set(i,e)}let Pm={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return Vm.get(i);if(e==="objectStoreNames")return i.objectStoreNames||Zb.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return wr(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function GT(i){Pm=i(Pm)}function QT(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=i.call(vm(this),e,...n);return Zb.set(r,e.sort?e.sort():[e]),wr(r)}:qT().includes(i)?function(...e){return i.apply(vm(this),e),wr(Jb.get(this))}:function(...e){return wr(i.apply(vm(this),e))}}function KT(i){return typeof i=="function"?QT(i):(i instanceof IDBTransaction&&FT(i),UT(i,BT())?new Proxy(i,Pm):i)}function wr(i){if(i instanceof IDBRequest)return HT(i);if(xm.has(i))return xm.get(i);const e=KT(i);return e!==i&&(xm.set(i,e),xp.set(e,i)),e}const vm=i=>xp.get(i);function YT(i,e,{blocked:n,upgrade:r,blocking:l,terminated:u}={}){const f=indexedDB.open(i,e),p=wr(f);return r&&f.addEventListener("upgradeneeded",x=>{r(wr(f.result),x.oldVersion,x.newVersion,wr(f.transaction),x)}),n&&f.addEventListener("blocked",x=>n(x.oldVersion,x.newVersion,x)),p.then(x=>{u&&x.addEventListener("close",()=>u()),l&&x.addEventListener("versionchange",g=>l(g.oldVersion,g.newVersion,g))}).catch(()=>{}),p}const $T=["get","getKey","getAll","getAllKeys","count"],XT=["put","add","delete","clear"],bm=new Map;function tv(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(bm.get(e))return bm.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,l=XT.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(l||$T.includes(n)))return;const u=async function(f,...p){const x=this.transaction(f,l?"readwrite":"readonly");let g=x.store;return r&&(g=g.index(p.shift())),(await Promise.all([g[n](...p),l&&x.done]))[0]};return bm.set(e,u),u}GT(i=>({...i,get:(e,n,r)=>tv(e,n)||i.get(e,n,r),has:(e,n)=>!!tv(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(ZT(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function ZT(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Lm="@firebase/app",nv="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ci=new yp("@firebase/app"),WT="@firebase/app-compat",eN="@firebase/analytics-compat",tN="@firebase/analytics",nN="@firebase/app-check-compat",sN="@firebase/app-check",iN="@firebase/auth",rN="@firebase/auth-compat",aN="@firebase/database",lN="@firebase/data-connect",oN="@firebase/database-compat",cN="@firebase/functions",uN="@firebase/functions-compat",dN="@firebase/installations",hN="@firebase/installations-compat",fN="@firebase/messaging",mN="@firebase/messaging-compat",pN="@firebase/performance",gN="@firebase/performance-compat",yN="@firebase/remote-config",xN="@firebase/remote-config-compat",vN="@firebase/storage",bN="@firebase/storage-compat",_N="@firebase/firestore",EN="@firebase/ai",wN="@firebase/firestore-compat",SN="firebase",TN="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zm="[DEFAULT]",NN={[Lm]:"fire-core",[WT]:"fire-core-compat",[tN]:"fire-analytics",[eN]:"fire-analytics-compat",[sN]:"fire-app-check",[nN]:"fire-app-check-compat",[iN]:"fire-auth",[rN]:"fire-auth-compat",[aN]:"fire-rtdb",[lN]:"fire-data-connect",[oN]:"fire-rtdb-compat",[cN]:"fire-fn",[uN]:"fire-fn-compat",[dN]:"fire-iid",[hN]:"fire-iid-compat",[fN]:"fire-fcm",[mN]:"fire-fcm-compat",[pN]:"fire-perf",[gN]:"fire-perf-compat",[yN]:"fire-rc",[xN]:"fire-rc-compat",[vN]:"fire-gcs",[bN]:"fire-gcs-compat",[_N]:"fire-fst",[wN]:"fire-fst-compat",[EN]:"fire-vertex","fire-js":"fire-js",[SN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cl=new Map,Um=new Map,Bm=new Map;function sv(i,e){try{i.container.addComponent(e)}catch(n){Ci.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function Rl(i){const e=i.name;if(Bm.has(e))return Ci.debug(`There were multiple attempts to register component ${e}.`),!1;Bm.set(e,i);for(const n of Cl.values())sv(n,i);for(const n of Um.values())sv(n,i);return!0}function vp(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function os(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Sr=new yc("app","Firebase",AN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ba("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Sr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ll=TN;function bp(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const r={name:zm,automaticDataCollectionEnabled:!0,...e},l=r.name;if(typeof l!="string"||!l)throw Sr.create("bad-app-name",{appName:String(l)});if(n||(n=Kb()),!n)throw Sr.create("no-options");const u=Cl.get(l);if(u){if(va(n,u.options)&&va(r,u.config))return u;throw Sr.create("duplicate-app",{appName:l})}const f=new MT(l);for(const x of Bm.values())f.addComponent(x);const p=new CN(n,r,f);return Cl.set(l,p),p}function _p(i=zm){const e=Cl.get(i);if(!e&&i===zm&&Kb())return bp();if(!e)throw Sr.create("no-app",{appName:i});return e}async function RN(i){let e=!1;const n=i.name;Cl.has(n)?(e=!0,Cl.delete(n)):Um.has(n)&&i.decRefCount()<=0&&(Um.delete(n),e=!0),e&&(await Promise.all(i.container.getProviders().map(r=>r.delete())),i.isDeleted=!0)}function Tr(i,e,n){let r=NN[i]??i;n&&(r+=`-${n}`);const l=r.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const f=[`Unable to register library "${r}" with version "${e}":`];l&&f.push(`library name "${r}" contains illegal characters (whitespace or "/")`),l&&u&&f.push("and"),u&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ci.warn(f.join(" "));return}Rl(new ba(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jN="firebase-heartbeat-database",IN=1,oc="firebase-heartbeat-store";let _m=null;function Wb(){return _m||(_m=YT(jN,IN,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(oc)}catch(n){console.warn(n)}}}}).catch(i=>{throw Sr.create("idb-open",{originalErrorMessage:i.message})})),_m}async function DN(i){try{const n=(await Wb()).transaction(oc),r=await n.objectStore(oc).get(e_(i));return await n.done,r}catch(e){if(e instanceof Di)Ci.warn(e.message);else{const n=Sr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ci.warn(n.message)}}}async function iv(i,e){try{const r=(await Wb()).transaction(oc,"readwrite");await r.objectStore(oc).put(e,e_(i)),await r.done}catch(n){if(n instanceof Di)Ci.warn(n.message);else{const r=Sr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ci.warn(r.message)}}}function e_(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ON=1024,kN=30;class MN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new PN(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const l=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=rv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(f=>f.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:l}),this._heartbeatsCache.heartbeats.length>kN){const f=LN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ci.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=rv(),{heartbeatsToSend:r,unsentEntries:l}=VN(this._heartbeatsCache.heartbeats),u=_d(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,l.length>0?(this._heartbeatsCache.heartbeats=l,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return Ci.warn(n),""}}}function rv(){return new Date().toISOString().substring(0,10)}function VN(i,e=ON){const n=[];let r=i.slice();for(const l of i){const u=n.find(f=>f.agent===l.agent);if(u){if(u.dates.push(l.date),av(n)>e){u.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),av(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class PN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return wT()?ST().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await DN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return iv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return iv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function av(i){return _d(JSON.stringify({version:2,heartbeats:i})).length}function LN(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let r=1;r<i.length;r++)i[r].date<n&&(n=i[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zN(i){Rl(new ba("platform-logger",e=>new JT(e),"PRIVATE")),Rl(new ba("heartbeat",e=>new MN(e),"PRIVATE")),Tr(Lm,nv,i),Tr(Lm,nv,"esm2020"),Tr("fire-js","")}zN("");var UN="firebase",BN="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tr(UN,BN,"app");function t_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const qN=t_,n_=new yc("auth","Firebase",t_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ed=new yp("@firebase/auth");function HN(i,...e){Ed.logLevel<=Ge.WARN&&Ed.warn(`Auth (${Ll}): ${i}`,...e)}function ud(i,...e){Ed.logLevel<=Ge.ERROR&&Ed.error(`Auth (${Ll}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ss(i,...e){throw Ep(i,...e)}function $s(i,...e){return Ep(i,...e)}function s_(i,e,n){const r={...qN(),[e]:n};return new yc("auth","Firebase",r).create(e,{appName:i.name})}function Ni(i){return s_(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ep(i,...e){if(typeof i!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=i.name),i._errorFactory.create(n,...r)}return n_.create(i,...e)}function we(i,e,...n){if(!i)throw Ep(e,...n)}function wi(i){const e="INTERNAL ASSERTION FAILED: "+i;throw ud(e),new Error(e)}function Ri(i,e){i||wi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qm(){var i;return typeof self<"u"&&((i=self.location)==null?void 0:i.href)||""}function FN(){return lv()==="http:"||lv()==="https:"}function lv(){var i;return typeof self<"u"&&((i=self.location)==null?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(FN()||vT()||"connection"in navigator)?navigator.onLine:!0}function QN(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ri(n>e,"Short delay should be less than long delay!"),this.isMobile=gT()||bT()}get(){return GN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wp(i,e){Ri(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;wi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;wi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;wi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],$N=new vc(3e4,6e4);function Mr(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function Vr(i,e,n,r,l={}){return r_(i,l,async()=>{let u={},f={};r&&(e==="GET"?f=r:u={body:JSON.stringify(r)});const p=xc({key:i.config.apiKey,...f}).slice(1),x=await i._getAdditionalHeaders();x["Content-Type"]="application/json",i.languageCode&&(x["X-Firebase-Locale"]=i.languageCode);const g={method:e,headers:x,...u};return xT()||(g.referrerPolicy="no-referrer"),i.emulatorConfig&&Pl(i.emulatorConfig.host)&&(g.credentials="include"),i_.fetch()(await a_(i,i.config.apiHost,n,p),g)})}async function r_(i,e,n){i._canInitEmulator=!1;const r={...KN,...e};try{const l=new JN(i),u=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw nd(i,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const p=u.ok?f.errorMessage:f.error.message,[x,g]=p.split(" : ");if(x==="FEDERATED_USER_ID_ALREADY_LINKED")throw nd(i,"credential-already-in-use",f);if(x==="EMAIL_EXISTS")throw nd(i,"email-already-in-use",f);if(x==="USER_DISABLED")throw nd(i,"user-disabled",f);const _=r[x]||x.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw s_(i,_,g);Ss(i,_)}}catch(l){if(l instanceof Di)throw l;Ss(i,"network-request-failed",{message:String(l)})}}async function bc(i,e,n,r,l={}){const u=await Vr(i,e,n,r,l);return"mfaPendingCredential"in u&&Ss(i,"multi-factor-auth-required",{_serverResponse:u}),u}async function a_(i,e,n,r){const l=`${e}${n}?${r}`,u=i,f=u.config.emulator?wp(i.config,l):`${i.config.apiScheme}://${l}`;return YN.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}function XN(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class JN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r($s(this.auth,"network-request-failed")),$N.get())})}}function nd(i,e,n){const r={appName:i.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const l=$s(i,e,r);return l.customData._tokenResponse=n,l}function ov(i){return i!==void 0&&i.enterprise!==void 0}class ZN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return XN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function WN(i,e){return Vr(i,"GET","/v2/recaptchaConfig",Mr(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eA(i,e){return Vr(i,"POST","/v1/accounts:delete",e)}async function wd(i,e){return Vr(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tc(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function tA(i,e=!1){const n=Ot(i),r=await n.getIdToken(e),l=Sp(r);we(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const u=typeof l.firebase=="object"?l.firebase:void 0,f=u==null?void 0:u.sign_in_provider;return{claims:l,token:r,authTime:tc(Em(l.auth_time)),issuedAtTime:tc(Em(l.iat)),expirationTime:tc(Em(l.exp)),signInProvider:f||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function Em(i){return Number(i)*1e3}function Sp(i){const[e,n,r]=i.split(".");if(e===void 0||n===void 0||r===void 0)return ud("JWT malformed, contained fewer than 3 sections"),null;try{const l=Gb(n);return l?JSON.parse(l):(ud("Failed to decode base64 JWT payload"),null)}catch(l){return ud("Caught error parsing JWT payload as JSON",l==null?void 0:l.toString()),null}}function cv(i){const e=Sp(i);return we(e,"internal-error"),we(typeof e.exp<"u","internal-error"),we(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cc(i,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Di&&nA(r)&&i.auth.currentUser===i&&await i.auth.signOut(),r}}function nA({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=tc(this.lastLoginAt),this.creationTime=tc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sd(i){var w;const e=i.auth,n=await i.getIdToken(),r=await cc(i,wd(e,{idToken:n}));we(r==null?void 0:r.users.length,e,"internal-error");const l=r.users[0];i._notifyReloadListener(l);const u=(w=l.providerUserInfo)!=null&&w.length?l_(l.providerUserInfo):[],f=rA(i.providerData,u),p=i.isAnonymous,x=!(i.email&&l.passwordHash)&&!(f!=null&&f.length),g=p?x:!1,_={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new Hm(l.createdAt,l.lastLoginAt),isAnonymous:g};Object.assign(i,_)}async function iA(i){const e=Ot(i);await Sd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function rA(i,e){return[...i.filter(r=>!e.some(l=>l.providerId===r.providerId)),...e]}function l_(i){return i.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aA(i,e){const n=await r_(i,{},async()=>{const r=xc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:u}=i.config,f=await a_(i,l,"/v1/token",`key=${u}`),p=await i._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const x={method:"POST",headers:p,body:r};return i.emulatorConfig&&Pl(i.emulatorConfig.host)&&(x.credentials="include"),i_.fetch()(f,x)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function lA(i,e){return Vr(i,"POST","/v2/accounts:revokeToken",Mr(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){we(e.idToken,"internal-error"),we(typeof e.idToken<"u","internal-error"),we(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):cv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){we(e.length!==0,"internal-error");const n=cv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(we(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:l,expiresIn:u}=await aA(e,n);this.updateTokensAndExpiration(r,l,Number(u))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:l,expirationTime:u}=n,f=new Sl;return r&&(we(typeof r=="string","internal-error",{appName:e}),f.refreshToken=r),l&&(we(typeof l=="string","internal-error",{appName:e}),f.accessToken=l),u&&(we(typeof u=="number","internal-error",{appName:e}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Sl,this.toJSON())}_performRefresh(){return wi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mr(i,e){we(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class Es{constructor({uid:e,auth:n,stsTokenManager:r,...l}){this.providerId="firebase",this.proactiveRefresh=new sA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Hm(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const n=await cc(this,this.stsTokenManager.getToken(this.auth,e));return we(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return tA(this,e)}reload(){return iA(this)}_assign(e){this!==e&&(we(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Es({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){we(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Sd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(os(this.auth.app))return Promise.reject(Ni(this.auth));const e=await this.getIdToken();return await cc(this,eA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,l=n.email??void 0,u=n.phoneNumber??void 0,f=n.photoURL??void 0,p=n.tenantId??void 0,x=n._redirectEventId??void 0,g=n.createdAt??void 0,_=n.lastLoginAt??void 0,{uid:w,emailVerified:T,isAnonymous:M,providerData:F,stsTokenManager:Y}=n;we(w&&Y,e,"internal-error");const G=Sl.fromJSON(this.name,Y);we(typeof w=="string",e,"internal-error"),mr(r,e.name),mr(l,e.name),we(typeof T=="boolean",e,"internal-error"),we(typeof M=="boolean",e,"internal-error"),mr(u,e.name),mr(f,e.name),mr(p,e.name),mr(x,e.name),mr(g,e.name),mr(_,e.name);const ee=new Es({uid:w,auth:e,email:l,emailVerified:T,displayName:r,isAnonymous:M,photoURL:f,phoneNumber:u,tenantId:p,stsTokenManager:G,createdAt:g,lastLoginAt:_});return F&&Array.isArray(F)&&(ee.providerData=F.map(ne=>({...ne}))),x&&(ee._redirectEventId=x),ee}static async _fromIdTokenResponse(e,n,r=!1){const l=new Sl;l.updateFromServerResponse(n);const u=new Es({uid:n.localId,auth:e,stsTokenManager:l,isAnonymous:r});return await Sd(u),u}static async _fromGetAccountInfoResponse(e,n,r){const l=n.users[0];we(l.localId!==void 0,"internal-error");const u=l.providerUserInfo!==void 0?l_(l.providerUserInfo):[],f=!(l.email&&l.passwordHash)&&!(u!=null&&u.length),p=new Sl;p.updateFromIdToken(r);const x=new Es({uid:l.localId,auth:e,stsTokenManager:p,isAnonymous:f}),g={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:u,metadata:new Hm(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!(u!=null&&u.length)};return Object.assign(x,g),x}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uv=new Map;function Si(i){Ri(i instanceof Function,"Expected a class definition");let e=uv.get(i);return e?(Ri(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,uv.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}o_.type="NONE";const dv=o_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dd(i,e,n){return`firebase:${i}:${e}:${n}`}class Tl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:l,name:u}=this.auth;this.fullUserKey=dd(this.userKey,l.apiKey,u),this.fullPersistenceKey=dd("persistence",l.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await wd(this.auth,{idToken:e}).catch(()=>{});return n?Es._fromGetAccountInfoResponse(this.auth,n,e):null}return Es._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Tl(Si(dv),e,r);const l=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let u=l[0]||Si(dv);const f=dd(r,e.config.apiKey,e.name);let p=null;for(const g of n)try{const _=await g._get(f);if(_){let w;if(typeof _=="string"){const T=await wd(e,{idToken:_}).catch(()=>{});if(!T)break;w=await Es._fromGetAccountInfoResponse(e,T,_)}else w=Es._fromJSON(e,_);g!==u&&(p=w),u=g;break}}catch{}const x=l.filter(g=>g._shouldAllowMigration);return!u._shouldAllowMigration||!x.length?new Tl(u,e,r):(u=x[0],p&&await u._set(f,p.toJSON()),await Promise.all(n.map(async g=>{if(g!==u)try{await g._remove(f)}catch{}})),new Tl(u,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hv(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(h_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(c_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(m_(e))return"Blackberry";if(p_(e))return"Webos";if(u_(e))return"Safari";if((e.includes("chrome/")||d_(e))&&!e.includes("edge/"))return"Chrome";if(f_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=i.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function c_(i=yn()){return/firefox\//i.test(i)}function u_(i=yn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function d_(i=yn()){return/crios\//i.test(i)}function h_(i=yn()){return/iemobile/i.test(i)}function f_(i=yn()){return/android/i.test(i)}function m_(i=yn()){return/blackberry/i.test(i)}function p_(i=yn()){return/webos/i.test(i)}function Tp(i=yn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function oA(i=yn()){var e;return Tp(i)&&!!((e=window.navigator)!=null&&e.standalone)}function cA(){return _T()&&document.documentMode===10}function g_(i=yn()){return Tp(i)||f_(i)||p_(i)||m_(i)||/windows phone/i.test(i)||h_(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y_(i,e=[]){let n;switch(i){case"Browser":n=hv(yn());break;case"Worker":n=`${hv(yn())}-${i}`;break;default:n=i}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ll}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=u=>new Promise((f,p)=>{try{const x=e(u);f(x)}catch(x){p(x)}});r.onAbort=n,this.queue.push(r);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dA(i,e={}){return Vr(i,"GET","/v2/passwordPolicy",Mr(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA=6;class fA{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??hA,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),l&&(n.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let l=0;l<e.length;l++)r=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,l,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e,n,r,l){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fv(this),this.idTokenSubscription=new fv(this),this.beforeStateQueue=new uA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=n_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Si(n)),this._initializationPromise=this.queue(async()=>{var r,l,u;if(!this._deleted&&(this.persistenceManager=await Tl.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((l=this._popupRedirectResolver)!=null&&l._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((u=this.currentUser)==null?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await wd(this,{idToken:e}),r=await Es._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var u;if(os(this.app)){const f=this.app.settings.authIdToken;return f?new Promise(p=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(f).then(p,p))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const f=(u=this.redirectUser)==null?void 0:u._redirectEventId,p=r==null?void 0:r._redirectEventId,x=await this.tryRedirectSignIn(e);(!f||f===p)&&(x!=null&&x.user)&&(r=x.user,l=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(r)}catch(f){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(f))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return we(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Sd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=QN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(os(this.app))return Promise.reject(Ni(this));const n=e?Ot(e):null;return n&&we(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&we(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return os(this.app)?Promise.reject(Ni(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return os(this.app)?Promise.reject(Ni(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Si(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await dA(this),n=new fA(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new yc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await lA(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Si(e)||this._popupRedirectResolver;we(n,this,"argument-error"),this.redirectPersistenceManager=await Tl.create(this,[Si(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,l){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let f=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(we(p,this,"internal-error"),p.then(()=>{f||u(this.currentUser)}),typeof n=="function"){const x=e.addObserver(n,r,l);return()=>{f=!0,x()}}else{const x=e.addObserver(n);return()=>{f=!0,x()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return we(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=y_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var l;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((l=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:l.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(os(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&HN(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Ta(i){return Ot(i)}class fv{constructor(e){this.auth=e,this.observer=null,this.addObserver=RT(n=>this.observer=n)}get next(){return we(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function pA(i){Yd=i}function x_(i){return Yd.loadJS(i)}function gA(){return Yd.recaptchaEnterpriseScript}function yA(){return Yd.gapiScript}function xA(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class vA{constructor(){this.enterprise=new bA}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class bA{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const _A="recaptcha-enterprise",v_="NO_RECAPTCHA";class EA{constructor(e){this.type=_A,this.auth=Ta(e)}async verify(e="verify",n=!1){async function r(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(f,p)=>{WN(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(x=>{if(x.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const g=new ZN(x);return u.tenantId==null?u._agentRecaptchaConfig=g:u._tenantRecaptchaConfigs[u.tenantId]=g,f(g.siteKey)}}).catch(x=>{p(x)})})}function l(u,f,p){const x=window.grecaptcha;ov(x)?x.enterprise.ready(()=>{x.enterprise.execute(u,{action:e}).then(g=>{f(g)}).catch(()=>{f(v_)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new vA().execute("siteKey",{action:"verify"}):new Promise((u,f)=>{r(this.auth).then(p=>{if(!n&&ov(window.grecaptcha))l(p,u,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let x=gA();x.length!==0&&(x+=p),x_(x).then(()=>{l(p,u,f)}).catch(g=>{f(g)})}}).catch(p=>{f(p)})})}}async function mv(i,e,n,r=!1,l=!1){const u=new EA(i);let f;if(l)f=v_;else try{f=await u.verify(n)}catch{f=await u.verify(n,!0)}const p={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const x=p.phoneEnrollmentInfo.phoneNumber,g=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:x,recaptchaToken:g,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const x=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:x,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return r?Object.assign(p,{captchaResp:f}):Object.assign(p,{captchaResponse:f}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function Fm(i,e,n,r,l){var u;if((u=i._getRecaptchaConfig())!=null&&u.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const f=await mv(i,e,n,n==="getOobCode");return r(i,f)}else return r(i,e).catch(async f=>{if(f.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const p=await mv(i,e,n,n==="getOobCode");return r(i,p)}else return Promise.reject(f)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wA(i,e){const n=vp(i,"auth");if(n.isInitialized()){const l=n.getImmediate(),u=n.getOptions();if(va(u,e??{}))return l;Ss(l,"already-initialized")}return n.initialize({options:e})}function SA(i,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Si);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function TA(i,e,n){const r=Ta(i);we(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const l=!1,u=b_(e),{host:f,port:p}=NA(e),x=p===null?"":`:${p}`,g={url:`${u}//${f}${x}/`},_=Object.freeze({host:f,port:p,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!r._canInitEmulator){we(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),we(va(g,r.config.emulator)&&va(_,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=g,r.emulatorConfig=_,r.settings.appVerificationDisabledForTesting=!0,Pl(f)?($b(`${u}//${f}${x}`),Xb("Auth",!0)):AA()}function b_(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function NA(i){const e=b_(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(r);if(l){const u=l[1];return{host:u,port:pv(r.substr(u.length+1))}}else{const[u,f]=r.split(":");return{host:u,port:pv(f)}}}function pv(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function AA(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return wi("not implemented")}_getIdTokenResponse(e){return wi("not implemented")}_linkToIdToken(e,n){return wi("not implemented")}_getReauthenticationResolver(e){return wi("not implemented")}}async function CA(i,e){return Vr(i,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RA(i,e){return bc(i,"POST","/v1/accounts:signInWithPassword",Mr(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jA(i,e){return bc(i,"POST","/v1/accounts:signInWithEmailLink",Mr(i,e))}async function IA(i,e){return bc(i,"POST","/v1/accounts:signInWithEmailLink",Mr(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc extends Np{constructor(e,n,r,l=null){super("password",r),this._email=e,this._password=n,this._tenantId=l}static _fromEmailAndPassword(e,n){return new uc(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new uc(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Fm(e,n,"signInWithPassword",RA);case"emailLink":return jA(e,{email:this._email,oobCode:this._password});default:Ss(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Fm(e,r,"signUpPassword",CA);case"emailLink":return IA(e,{idToken:n,email:this._email,oobCode:this._password});default:Ss(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nl(i,e){return bc(i,"POST","/v1/accounts:signInWithIdp",Mr(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA="http://localhost";class _a extends Np{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new _a(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ss("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:l,...u}=n;if(!r||!l)return null;const f=new _a(r,l);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return Nl(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Nl(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Nl(e,n)}buildRequest(){const e={requestUri:DA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=xc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OA(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function kA(i){const e=Yo($o(i)).link,n=e?Yo($o(e)).deep_link_id:null,r=Yo($o(i)).deep_link_id;return(r?Yo($o(r)).link:null)||r||n||e||i}class Ap{constructor(e){const n=Yo($o(e)),r=n.apiKey??null,l=n.oobCode??null,u=OA(n.mode??null);we(r&&l&&u,"argument-error"),this.apiKey=r,this.operation=u,this.code=l,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=kA(e);try{return new Ap(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(){this.providerId=zl.PROVIDER_ID}static credential(e,n){return uc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Ap.parseLink(n);return we(r,"argument-error"),uc._fromEmailAndCode(e,r.code,r.tenantId)}}zl.PROVIDER_ID="password";zl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";zl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c extends __{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr extends _c{constructor(){super("facebook.com")}static credential(e){return _a._fromParams({providerId:pr.PROVIDER_ID,signInMethod:pr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pr.credentialFromTaggedObject(e)}static credentialFromError(e){return pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return pr.credential(e.oauthAccessToken)}catch{return null}}}pr.FACEBOOK_SIGN_IN_METHOD="facebook.com";pr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr extends _c{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return _a._fromParams({providerId:gr.PROVIDER_ID,signInMethod:gr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return gr.credentialFromTaggedObject(e)}static credentialFromError(e){return gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return gr.credential(n,r)}catch{return null}}}gr.GOOGLE_SIGN_IN_METHOD="google.com";gr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr extends _c{constructor(){super("github.com")}static credential(e){return _a._fromParams({providerId:yr.PROVIDER_ID,signInMethod:yr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yr.credentialFromTaggedObject(e)}static credentialFromError(e){return yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yr.credential(e.oauthAccessToken)}catch{return null}}}yr.GITHUB_SIGN_IN_METHOD="github.com";yr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr extends _c{constructor(){super("twitter.com")}static credential(e,n){return _a._fromParams({providerId:xr.PROVIDER_ID,signInMethod:xr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return xr.credentialFromTaggedObject(e)}static credentialFromError(e){return xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return xr.credential(n,r)}catch{return null}}}xr.TWITTER_SIGN_IN_METHOD="twitter.com";xr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MA(i,e){return bc(i,"POST","/v1/accounts:signUp",Mr(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,l=!1){const u=await Es._fromIdTokenResponse(e,r,l),f=gv(r);return new Ea({user:u,providerId:f,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const l=gv(r);return new Ea({user:e,providerId:l,_tokenResponse:r,operationType:n})}}function gv(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td extends Di{constructor(e,n,r,l){super(n.code,n.message),this.operationType=r,this.user=l,Object.setPrototypeOf(this,Td.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,l){return new Td(e,n,r,l)}}function E_(i,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Td._fromErrorAndOperation(i,u,e,r):u})}async function VA(i,e,n=!1){const r=await cc(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return Ea._forOperation(i,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PA(i,e,n=!1){const{auth:r}=i;if(os(r.app))return Promise.reject(Ni(r));const l="reauthenticate";try{const u=await cc(i,E_(r,l,e,i),n);we(u.idToken,r,"internal-error");const f=Sp(u.idToken);we(f,r,"internal-error");const{sub:p}=f;return we(i.uid===p,r,"user-mismatch"),Ea._forOperation(i,l,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&Ss(r,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w_(i,e,n=!1){if(os(i.app))return Promise.reject(Ni(i));const r="signIn",l=await E_(i,r,e),u=await Ea._fromIdTokenResponse(i,r,l);return n||await i._updateCurrentUser(u.user),u}async function LA(i,e){return w_(Ta(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S_(i){const e=Ta(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Gm(i,e,n){if(os(i.app))return Promise.reject(Ni(i));const r=Ta(i),f=await Fm(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",MA).catch(x=>{throw x.code==="auth/password-does-not-meet-requirements"&&S_(i),x}),p=await Ea._fromIdTokenResponse(r,"signIn",f);return await r._updateCurrentUser(p.user),p}function zA(i,e,n){return os(i.app)?Promise.reject(Ni(i)):LA(Ot(i),zl.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&S_(i),r})}function UA(i,e,n,r){return Ot(i).onIdTokenChanged(e,n,r)}function BA(i,e,n){return Ot(i).beforeAuthStateChanged(e,n)}function qA(i,e,n,r){return Ot(i).onAuthStateChanged(e,n,r)}function T_(i){return Ot(i).signOut()}const Nd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Nd,"1"),this.storage.removeItem(Nd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA=1e3,FA=10;class A_ extends N_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=g_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),l=this.localCache[n];r!==l&&e(n,l,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,p,x)=>{this.notifyListeners(f,x)});return}const r=e.key;n?this.detachListener():this.stopPolling();const l=()=>{const f=this.storage.getItem(r);!n&&this.localCache[r]===f||this.notifyListeners(r,f)},u=this.storage.getItem(r);cA()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,FA):l()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const l of Array.from(r))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},HA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}A_.type="LOCAL";const GA=A_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_ extends N_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}C_.type="SESSION";const R_=C_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QA(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(l=>l.isListeningto(e));if(n)return n;const r=new $d(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:l,data:u}=n.data,f=this.handlersMap[l];if(!(f!=null&&f.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:l});const p=Array.from(f).map(async g=>g(n.origin,u)),x=await QA(p);n.ports[0].postMessage({status:"done",eventId:r,eventType:l,response:x})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}$d.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cp(i="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return i+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let u,f;return new Promise((p,x)=>{const g=Cp("",20);l.port1.start();const _=setTimeout(()=>{x(new Error("unsupported_event"))},r);f={messageChannel:l,onMessage(w){const T=w;if(T.data.eventId===g)switch(T.data.status){case"ack":clearTimeout(_),u=setTimeout(()=>{x(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),p(T.data.response);break;default:clearTimeout(_),clearTimeout(u),x(new Error("invalid_response"));break}}},this.handlers.add(f),l.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:g,data:n},[l.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xs(){return window}function YA(i){Xs().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j_(){return typeof Xs().WorkerGlobalScope<"u"&&typeof Xs().importScripts=="function"}async function $A(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function XA(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)==null?void 0:i.controller)||null}function JA(){return j_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I_="firebaseLocalStorageDb",ZA=1,Ad="firebaseLocalStorage",D_="fbase_key";class Ec{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Xd(i,e){return i.transaction([Ad],e?"readwrite":"readonly").objectStore(Ad)}function WA(){const i=indexedDB.deleteDatabase(I_);return new Ec(i).toPromise()}function Qm(){const i=indexedDB.open(I_,ZA);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const r=i.result;try{r.createObjectStore(Ad,{keyPath:D_})}catch(l){n(l)}}),i.addEventListener("success",async()=>{const r=i.result;r.objectStoreNames.contains(Ad)?e(r):(r.close(),await WA(),e(await Qm()))})})}async function yv(i,e,n){const r=Xd(i,!0).put({[D_]:e,value:n});return new Ec(r).toPromise()}async function eC(i,e){const n=Xd(i,!1).get(e),r=await new Ec(n).toPromise();return r===void 0?null:r.value}function xv(i,e){const n=Xd(i,!0).delete(e);return new Ec(n).toPromise()}const tC=800,nC=3;class O_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Qm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>nC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return j_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$d._getInstance(JA()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await $A(),!this.activeServiceWorker)return;this.sender=new KA(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||XA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Qm();return await yv(e,Nd,"1"),await xv(e,Nd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>yv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>eC(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>xv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const u=Xd(l,!1).getAll();return new Ec(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:l,value:u}of e)r.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(u)&&(this.notifyListeners(l,u),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!r.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const l of Array.from(r))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),tC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}O_.type="LOCAL";const sC=O_;new vc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iC(i,e){return e?Si(e):(we(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp extends Np{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Nl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Nl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Nl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function rC(i){return w_(i.auth,new Rp(i),i.bypassAuthState)}function aC(i){const{auth:e,user:n}=i;return we(n,e,"internal-error"),PA(n,new Rp(i),i.bypassAuthState)}async function lC(i){const{auth:e,user:n}=i;return we(n,e,"internal-error"),VA(n,new Rp(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{constructor(e,n,r,l,u=!1){this.auth=e,this.resolver=r,this.user=l,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:l,tenantId:u,error:f,type:p}=e;if(f){this.reject(f);return}const x={auth:this.auth,requestUri:n,sessionId:r,tenantId:u||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(x))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return rC;case"linkViaPopup":case"linkViaRedirect":return lC;case"reauthViaPopup":case"reauthViaRedirect":return aC;default:Ss(this.auth,"internal-error")}}resolve(e){Ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oC=new vc(2e3,1e4);class wl extends k_{constructor(e,n,r,l,u){super(e,n,l,u),this.provider=r,this.authWindow=null,this.pollId=null,wl.currentPopupAction&&wl.currentPopupAction.cancel(),wl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return we(e,this.auth,"internal-error"),e}async onExecution(){Ri(this.filter.length===1,"Popup operations only handle one event");const e=Cp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject($s(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject($s(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,wl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject($s(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,oC.get())};e()}}wl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC="pendingRedirect",hd=new Map;class uC extends k_{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=hd.get(this.auth._key());if(!e){try{const r=await dC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}hd.set(this.auth._key(),e)}return this.bypassAuthState||hd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function dC(i,e){const n=mC(e),r=fC(i);if(!await r._isAvailable())return!1;const l=await r._get(n)==="true";return await r._remove(n),l}function hC(i,e){hd.set(i._key(),e)}function fC(i){return Si(i._redirectPersistence)}function mC(i){return dd(cC,i.config.apiKey,i.name)}async function pC(i,e,n=!1){if(os(i.app))return Promise.reject(Ni(i));const r=Ta(i),l=iC(r,e),f=await new uC(r,l,n).execute();return f&&!n&&(delete f.user._redirectEventId,await r._persistUserIfCurrent(f.user),await r._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC=600*1e3;class yC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!xC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!M_(e)){const l=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError($s(this.auth,l))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=gC&&this.cachedEventUids.clear(),this.cachedEventUids.has(vv(e))}saveEventToCache(e){this.cachedEventUids.add(vv(e)),this.lastProcessedEventTime=Date.now()}}function vv(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function M_({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function xC(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return M_(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vC(i,e={}){return Vr(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_C=/^https?/;async function EC(i){if(i.config.emulator)return;const{authorizedDomains:e}=await vC(i);for(const n of e)try{if(wC(n))return}catch{}Ss(i,"unauthorized-domain")}function wC(i){const e=qm(),{protocol:n,hostname:r}=new URL(e);if(i.startsWith("chrome-extension://")){const f=new URL(i);return f.hostname===""&&r===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===r}if(!_C.test(n))return!1;if(bC.test(i))return r===i;const l=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC=new vc(3e4,6e4);function bv(){const i=Xs().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function TC(i){return new Promise((e,n)=>{var l,u,f;function r(){bv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{bv(),n($s(i,"network-request-failed"))},timeout:SC.get()})}if((u=(l=Xs().gapi)==null?void 0:l.iframes)!=null&&u.Iframe)e(gapi.iframes.getContext());else if((f=Xs().gapi)!=null&&f.load)r();else{const p=xA("iframefcb");return Xs()[p]=()=>{gapi.load?r():n($s(i,"network-request-failed"))},x_(`${yA()}?onload=${p}`).catch(x=>n(x))}}).catch(e=>{throw fd=null,e})}let fd=null;function NC(i){return fd=fd||TC(i),fd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC=new vc(5e3,15e3),CC="__/auth/iframe",RC="emulator/auth/iframe",jC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},IC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function DC(i){const e=i.config;we(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?wp(e,RC):`https://${i.config.authDomain}/${CC}`,r={apiKey:e.apiKey,appName:i.name,v:Ll},l=IC.get(i.config.apiHost);l&&(r.eid=l);const u=i._getFrameworks();return u.length&&(r.fw=u.join(",")),`${n}?${xc(r).slice(1)}`}async function OC(i){const e=await NC(i),n=Xs().gapi;return we(n,i,"internal-error"),e.open({where:document.body,url:DC(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jC,dontclear:!0},r=>new Promise(async(l,u)=>{await r.restyle({setHideOnLeave:!1});const f=$s(i,"network-request-failed"),p=Xs().setTimeout(()=>{u(f)},AC.get());function x(){Xs().clearTimeout(p),l(r)}r.ping(x).then(x,()=>{u(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},MC=500,VC=600,PC="_blank",LC="http://localhost";class _v{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function zC(i,e,n,r=MC,l=VC){const u=Math.max((window.screen.availHeight-l)/2,0).toString(),f=Math.max((window.screen.availWidth-r)/2,0).toString();let p="";const x={...kC,width:r.toString(),height:l.toString(),top:u,left:f},g=yn().toLowerCase();n&&(p=d_(g)?PC:n),c_(g)&&(e=e||LC,x.scrollbars="yes");const _=Object.entries(x).reduce((T,[M,F])=>`${T}${M}=${F},`,"");if(oA(g)&&p!=="_self")return UC(e||"",p),new _v(null);const w=window.open(e||"",p,_);we(w,i,"popup-blocked");try{w.focus()}catch{}return new _v(w)}function UC(i,e){const n=document.createElement("a");n.href=i,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC="__/auth/handler",qC="emulator/auth/handler",HC=encodeURIComponent("fac");async function Ev(i,e,n,r,l,u){we(i.config.authDomain,i,"auth-domain-config-required"),we(i.config.apiKey,i,"invalid-api-key");const f={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:r,v:Ll,eventId:l};if(e instanceof __){e.setDefaultLanguage(i.languageCode),f.providerId=e.providerId||"",CT(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,w]of Object.entries({}))f[_]=w}if(e instanceof _c){const _=e.getScopes().filter(w=>w!=="");_.length>0&&(f.scopes=_.join(","))}i.tenantId&&(f.tid=i.tenantId);const p=f;for(const _ of Object.keys(p))p[_]===void 0&&delete p[_];const x=await i._getAppCheckToken(),g=x?`#${HC}=${encodeURIComponent(x)}`:"";return`${FC(i)}?${xc(p).slice(1)}${g}`}function FC({config:i}){return i.emulator?wp(i,qC):`https://${i.authDomain}/${BC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wm="webStorageSupport";class GC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=R_,this._completeRedirectFn=pC,this._overrideRedirectResult=hC}async _openPopup(e,n,r,l){var f;Ri((f=this.eventManagers[e._key()])==null?void 0:f.manager,"_initialize() not called before _openPopup()");const u=await Ev(e,n,r,qm(),l);return zC(e,u,Cp())}async _openRedirect(e,n,r,l){await this._originValidation(e);const u=await Ev(e,n,r,qm(),l);return YA(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:l,promise:u}=this.eventManagers[n];return l?Promise.resolve(l):(Ri(u,"If manager is not set, promise should be"),u)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await OC(e),r=new yC(e);return n.register("authEvent",l=>(we(l==null?void 0:l.authEvent,e,"invalid-auth-event"),{status:r.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(wm,{type:wm},l=>{var f;const u=(f=l==null?void 0:l[0])==null?void 0:f[wm];u!==void 0&&n(!!u),Ss(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=EC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return g_()||u_()||Tp()}}const QC=GC;var wv="@firebase/auth",Sv="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){we(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YC(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function $C(i){Rl(new ba("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:f,authDomain:p}=r.options;we(f&&!f.includes(":"),"invalid-api-key",{appName:r.name});const x={apiKey:f,authDomain:p,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:y_(i)},g=new mA(r,l,u,x);return SA(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Rl(new ba("auth-internal",e=>{const n=Ta(e.getProvider("auth").getImmediate());return(r=>new KC(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Tr(wv,Sv,YC(i)),Tr(wv,Sv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC=300,JC=Yb("authIdTokenMaxAge")||XC;let Tv=null;const ZC=i=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>JC)return;const l=n==null?void 0:n.token;Tv!==l&&(Tv=l,await fetch(i,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function V_(i=_p()){const e=vp(i,"auth");if(e.isInitialized())return e.getImmediate();const n=wA(i,{popupRedirectResolver:QC,persistence:[sC,GA,R_]}),r=Yb("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(r,location.origin);if(location.origin===u.origin){const f=ZC(u.toString());BA(n,f,()=>f(n.currentUser)),UA(n,p=>f(p))}}const l=Qb("auth");return l&&TA(n,`http://${l}`),n}function WC(){var i;return((i=document.getElementsByTagName("head"))==null?void 0:i[0])??document}pA({loadJS(i){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",i),r.onload=e,r.onerror=l=>{const u=$s("internal-error");u.customData=l,n(u)},r.type="text/javascript",r.charset="UTF-8",WC().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});$C("Browser");var Nv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Nr,P_;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,A){function I(){}I.prototype=A.prototype,C.F=A.prototype,C.prototype=new I,C.prototype.constructor=C,C.D=function(k,D,V){for(var R=Array(arguments.length-2),et=2;et<arguments.length;et++)R[et-2]=arguments[et];return A.prototype[D].apply(k,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(C,A,I){I||(I=0);const k=Array(16);if(typeof A=="string")for(var D=0;D<16;++D)k[D]=A.charCodeAt(I++)|A.charCodeAt(I++)<<8|A.charCodeAt(I++)<<16|A.charCodeAt(I++)<<24;else for(D=0;D<16;++D)k[D]=A[I++]|A[I++]<<8|A[I++]<<16|A[I++]<<24;A=C.g[0],I=C.g[1],D=C.g[2];let V=C.g[3],R;R=A+(V^I&(D^V))+k[0]+3614090360&4294967295,A=I+(R<<7&4294967295|R>>>25),R=V+(D^A&(I^D))+k[1]+3905402710&4294967295,V=A+(R<<12&4294967295|R>>>20),R=D+(I^V&(A^I))+k[2]+606105819&4294967295,D=V+(R<<17&4294967295|R>>>15),R=I+(A^D&(V^A))+k[3]+3250441966&4294967295,I=D+(R<<22&4294967295|R>>>10),R=A+(V^I&(D^V))+k[4]+4118548399&4294967295,A=I+(R<<7&4294967295|R>>>25),R=V+(D^A&(I^D))+k[5]+1200080426&4294967295,V=A+(R<<12&4294967295|R>>>20),R=D+(I^V&(A^I))+k[6]+2821735955&4294967295,D=V+(R<<17&4294967295|R>>>15),R=I+(A^D&(V^A))+k[7]+4249261313&4294967295,I=D+(R<<22&4294967295|R>>>10),R=A+(V^I&(D^V))+k[8]+1770035416&4294967295,A=I+(R<<7&4294967295|R>>>25),R=V+(D^A&(I^D))+k[9]+2336552879&4294967295,V=A+(R<<12&4294967295|R>>>20),R=D+(I^V&(A^I))+k[10]+4294925233&4294967295,D=V+(R<<17&4294967295|R>>>15),R=I+(A^D&(V^A))+k[11]+2304563134&4294967295,I=D+(R<<22&4294967295|R>>>10),R=A+(V^I&(D^V))+k[12]+1804603682&4294967295,A=I+(R<<7&4294967295|R>>>25),R=V+(D^A&(I^D))+k[13]+4254626195&4294967295,V=A+(R<<12&4294967295|R>>>20),R=D+(I^V&(A^I))+k[14]+2792965006&4294967295,D=V+(R<<17&4294967295|R>>>15),R=I+(A^D&(V^A))+k[15]+1236535329&4294967295,I=D+(R<<22&4294967295|R>>>10),R=A+(D^V&(I^D))+k[1]+4129170786&4294967295,A=I+(R<<5&4294967295|R>>>27),R=V+(I^D&(A^I))+k[6]+3225465664&4294967295,V=A+(R<<9&4294967295|R>>>23),R=D+(A^I&(V^A))+k[11]+643717713&4294967295,D=V+(R<<14&4294967295|R>>>18),R=I+(V^A&(D^V))+k[0]+3921069994&4294967295,I=D+(R<<20&4294967295|R>>>12),R=A+(D^V&(I^D))+k[5]+3593408605&4294967295,A=I+(R<<5&4294967295|R>>>27),R=V+(I^D&(A^I))+k[10]+38016083&4294967295,V=A+(R<<9&4294967295|R>>>23),R=D+(A^I&(V^A))+k[15]+3634488961&4294967295,D=V+(R<<14&4294967295|R>>>18),R=I+(V^A&(D^V))+k[4]+3889429448&4294967295,I=D+(R<<20&4294967295|R>>>12),R=A+(D^V&(I^D))+k[9]+568446438&4294967295,A=I+(R<<5&4294967295|R>>>27),R=V+(I^D&(A^I))+k[14]+3275163606&4294967295,V=A+(R<<9&4294967295|R>>>23),R=D+(A^I&(V^A))+k[3]+4107603335&4294967295,D=V+(R<<14&4294967295|R>>>18),R=I+(V^A&(D^V))+k[8]+1163531501&4294967295,I=D+(R<<20&4294967295|R>>>12),R=A+(D^V&(I^D))+k[13]+2850285829&4294967295,A=I+(R<<5&4294967295|R>>>27),R=V+(I^D&(A^I))+k[2]+4243563512&4294967295,V=A+(R<<9&4294967295|R>>>23),R=D+(A^I&(V^A))+k[7]+1735328473&4294967295,D=V+(R<<14&4294967295|R>>>18),R=I+(V^A&(D^V))+k[12]+2368359562&4294967295,I=D+(R<<20&4294967295|R>>>12),R=A+(I^D^V)+k[5]+4294588738&4294967295,A=I+(R<<4&4294967295|R>>>28),R=V+(A^I^D)+k[8]+2272392833&4294967295,V=A+(R<<11&4294967295|R>>>21),R=D+(V^A^I)+k[11]+1839030562&4294967295,D=V+(R<<16&4294967295|R>>>16),R=I+(D^V^A)+k[14]+4259657740&4294967295,I=D+(R<<23&4294967295|R>>>9),R=A+(I^D^V)+k[1]+2763975236&4294967295,A=I+(R<<4&4294967295|R>>>28),R=V+(A^I^D)+k[4]+1272893353&4294967295,V=A+(R<<11&4294967295|R>>>21),R=D+(V^A^I)+k[7]+4139469664&4294967295,D=V+(R<<16&4294967295|R>>>16),R=I+(D^V^A)+k[10]+3200236656&4294967295,I=D+(R<<23&4294967295|R>>>9),R=A+(I^D^V)+k[13]+681279174&4294967295,A=I+(R<<4&4294967295|R>>>28),R=V+(A^I^D)+k[0]+3936430074&4294967295,V=A+(R<<11&4294967295|R>>>21),R=D+(V^A^I)+k[3]+3572445317&4294967295,D=V+(R<<16&4294967295|R>>>16),R=I+(D^V^A)+k[6]+76029189&4294967295,I=D+(R<<23&4294967295|R>>>9),R=A+(I^D^V)+k[9]+3654602809&4294967295,A=I+(R<<4&4294967295|R>>>28),R=V+(A^I^D)+k[12]+3873151461&4294967295,V=A+(R<<11&4294967295|R>>>21),R=D+(V^A^I)+k[15]+530742520&4294967295,D=V+(R<<16&4294967295|R>>>16),R=I+(D^V^A)+k[2]+3299628645&4294967295,I=D+(R<<23&4294967295|R>>>9),R=A+(D^(I|~V))+k[0]+4096336452&4294967295,A=I+(R<<6&4294967295|R>>>26),R=V+(I^(A|~D))+k[7]+1126891415&4294967295,V=A+(R<<10&4294967295|R>>>22),R=D+(A^(V|~I))+k[14]+2878612391&4294967295,D=V+(R<<15&4294967295|R>>>17),R=I+(V^(D|~A))+k[5]+4237533241&4294967295,I=D+(R<<21&4294967295|R>>>11),R=A+(D^(I|~V))+k[12]+1700485571&4294967295,A=I+(R<<6&4294967295|R>>>26),R=V+(I^(A|~D))+k[3]+2399980690&4294967295,V=A+(R<<10&4294967295|R>>>22),R=D+(A^(V|~I))+k[10]+4293915773&4294967295,D=V+(R<<15&4294967295|R>>>17),R=I+(V^(D|~A))+k[1]+2240044497&4294967295,I=D+(R<<21&4294967295|R>>>11),R=A+(D^(I|~V))+k[8]+1873313359&4294967295,A=I+(R<<6&4294967295|R>>>26),R=V+(I^(A|~D))+k[15]+4264355552&4294967295,V=A+(R<<10&4294967295|R>>>22),R=D+(A^(V|~I))+k[6]+2734768916&4294967295,D=V+(R<<15&4294967295|R>>>17),R=I+(V^(D|~A))+k[13]+1309151649&4294967295,I=D+(R<<21&4294967295|R>>>11),R=A+(D^(I|~V))+k[4]+4149444226&4294967295,A=I+(R<<6&4294967295|R>>>26),R=V+(I^(A|~D))+k[11]+3174756917&4294967295,V=A+(R<<10&4294967295|R>>>22),R=D+(A^(V|~I))+k[2]+718787259&4294967295,D=V+(R<<15&4294967295|R>>>17),R=I+(V^(D|~A))+k[9]+3951481745&4294967295,C.g[0]=C.g[0]+A&4294967295,C.g[1]=C.g[1]+(D+(R<<21&4294967295|R>>>11))&4294967295,C.g[2]=C.g[2]+D&4294967295,C.g[3]=C.g[3]+V&4294967295}r.prototype.v=function(C,A){A===void 0&&(A=C.length);const I=A-this.blockSize,k=this.C;let D=this.h,V=0;for(;V<A;){if(D==0)for(;V<=I;)l(this,C,V),V+=this.blockSize;if(typeof C=="string"){for(;V<A;)if(k[D++]=C.charCodeAt(V++),D==this.blockSize){l(this,k),D=0;break}}else for(;V<A;)if(k[D++]=C[V++],D==this.blockSize){l(this,k),D=0;break}}this.h=D,this.o+=A},r.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var A=1;A<C.length-8;++A)C[A]=0;A=this.o*8;for(var I=C.length-8;I<C.length;++I)C[I]=A&255,A/=256;for(this.v(C),C=Array(16),A=0,I=0;I<4;++I)for(let k=0;k<32;k+=8)C[A++]=this.g[I]>>>k&255;return C};function u(C,A){var I=p;return Object.prototype.hasOwnProperty.call(I,C)?I[C]:I[C]=A(C)}function f(C,A){this.h=A;const I=[];let k=!0;for(let D=C.length-1;D>=0;D--){const V=C[D]|0;k&&V==A||(I[D]=V,k=!1)}this.g=I}var p={};function x(C){return-128<=C&&C<128?u(C,function(A){return new f([A|0],A<0?-1:0)}):new f([C|0],C<0?-1:0)}function g(C){if(isNaN(C)||!isFinite(C))return w;if(C<0)return G(g(-C));const A=[];let I=1;for(let k=0;C>=I;k++)A[k]=C/I|0,I*=4294967296;return new f(A,0)}function _(C,A){if(C.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(C.charAt(0)=="-")return G(_(C.substring(1),A));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=g(Math.pow(A,8));let k=w;for(let V=0;V<C.length;V+=8){var D=Math.min(8,C.length-V);const R=parseInt(C.substring(V,V+D),A);D<8?(D=g(Math.pow(A,D)),k=k.j(D).add(g(R))):(k=k.j(I),k=k.add(g(R)))}return k}var w=x(0),T=x(1),M=x(16777216);i=f.prototype,i.m=function(){if(Y(this))return-G(this).m();let C=0,A=1;for(let I=0;I<this.g.length;I++){const k=this.i(I);C+=(k>=0?k:4294967296+k)*A,A*=4294967296}return C},i.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(F(this))return"0";if(Y(this))return"-"+G(this).toString(C);const A=g(Math.pow(C,6));var I=this;let k="";for(;;){const D=ue(I,A).g;I=ee(I,D.j(A));let V=((I.g.length>0?I.g[0]:I.h)>>>0).toString(C);if(I=D,F(I))return V+k;for(;V.length<6;)V="0"+V;k=V+k}},i.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function F(C){if(C.h!=0)return!1;for(let A=0;A<C.g.length;A++)if(C.g[A]!=0)return!1;return!0}function Y(C){return C.h==-1}i.l=function(C){return C=ee(this,C),Y(C)?-1:F(C)?0:1};function G(C){const A=C.g.length,I=[];for(let k=0;k<A;k++)I[k]=~C.g[k];return new f(I,~C.h).add(T)}i.abs=function(){return Y(this)?G(this):this},i.add=function(C){const A=Math.max(this.g.length,C.g.length),I=[];let k=0;for(let D=0;D<=A;D++){let V=k+(this.i(D)&65535)+(C.i(D)&65535),R=(V>>>16)+(this.i(D)>>>16)+(C.i(D)>>>16);k=R>>>16,V&=65535,R&=65535,I[D]=R<<16|V}return new f(I,I[I.length-1]&-2147483648?-1:0)};function ee(C,A){return C.add(G(A))}i.j=function(C){if(F(this)||F(C))return w;if(Y(this))return Y(C)?G(this).j(G(C)):G(G(this).j(C));if(Y(C))return G(this.j(G(C)));if(this.l(M)<0&&C.l(M)<0)return g(this.m()*C.m());const A=this.g.length+C.g.length,I=[];for(var k=0;k<2*A;k++)I[k]=0;for(k=0;k<this.g.length;k++)for(let D=0;D<C.g.length;D++){const V=this.i(k)>>>16,R=this.i(k)&65535,et=C.i(D)>>>16,Ye=C.i(D)&65535;I[2*k+2*D]+=R*Ye,ne(I,2*k+2*D),I[2*k+2*D+1]+=V*Ye,ne(I,2*k+2*D+1),I[2*k+2*D+1]+=R*et,ne(I,2*k+2*D+1),I[2*k+2*D+2]+=V*et,ne(I,2*k+2*D+2)}for(C=0;C<A;C++)I[C]=I[2*C+1]<<16|I[2*C];for(C=A;C<2*A;C++)I[C]=0;return new f(I,0)};function ne(C,A){for(;(C[A]&65535)!=C[A];)C[A+1]+=C[A]>>>16,C[A]&=65535,A++}function le(C,A){this.g=C,this.h=A}function ue(C,A){if(F(A))throw Error("division by zero");if(F(C))return new le(w,w);if(Y(C))return A=ue(G(C),A),new le(G(A.g),G(A.h));if(Y(A))return A=ue(C,G(A)),new le(G(A.g),A.h);if(C.g.length>30){if(Y(C)||Y(A))throw Error("slowDivide_ only works with positive integers.");for(var I=T,k=A;k.l(C)<=0;)I=De(I),k=De(k);var D=se(I,1),V=se(k,1);for(k=se(k,2),I=se(I,2);!F(k);){var R=V.add(k);R.l(C)<=0&&(D=D.add(I),V=R),k=se(k,1),I=se(I,1)}return A=ee(C,D.j(A)),new le(D,A)}for(D=w;C.l(A)>=0;){for(I=Math.max(1,Math.floor(C.m()/A.m())),k=Math.ceil(Math.log(I)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),V=g(I),R=V.j(A);Y(R)||R.l(C)>0;)I-=k,V=g(I),R=V.j(A);F(V)&&(V=T),D=D.add(V),C=ee(C,R)}return new le(D,C)}i.B=function(C){return ue(this,C).h},i.and=function(C){const A=Math.max(this.g.length,C.g.length),I=[];for(let k=0;k<A;k++)I[k]=this.i(k)&C.i(k);return new f(I,this.h&C.h)},i.or=function(C){const A=Math.max(this.g.length,C.g.length),I=[];for(let k=0;k<A;k++)I[k]=this.i(k)|C.i(k);return new f(I,this.h|C.h)},i.xor=function(C){const A=Math.max(this.g.length,C.g.length),I=[];for(let k=0;k<A;k++)I[k]=this.i(k)^C.i(k);return new f(I,this.h^C.h)};function De(C){const A=C.g.length+1,I=[];for(let k=0;k<A;k++)I[k]=C.i(k)<<1|C.i(k-1)>>>31;return new f(I,C.h)}function se(C,A){const I=A>>5;A%=32;const k=C.g.length-I,D=[];for(let V=0;V<k;V++)D[V]=A>0?C.i(V+I)>>>A|C.i(V+I+1)<<32-A:C.i(V+I);return new f(D,C.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,P_=r,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=g,f.fromString=_,Nr=f}).apply(typeof Nv<"u"?Nv:typeof self<"u"?self:typeof window<"u"?window:{});var sd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var L_,Xo,z_,md,Km,U_,B_,q_;(function(){var i,e=Object.defineProperty;function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof sd=="object"&&sd];for(var y=0;y<d.length;++y){var b=d[y];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var r=n(this);function l(d,y){if(y)e:{var b=r;d=d.split(".");for(var S=0;S<d.length-1;S++){var z=d[S];if(!(z in b))break e;b=b[z]}d=d[d.length-1],S=b[d],y=y(S),y!=S&&y!=null&&e(b,d,{configurable:!0,writable:!0,value:y})}}l("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(d){return d||function(y){var b=[],S;for(S in y)Object.prototype.hasOwnProperty.call(y,S)&&b.push([S,y[S]]);return b}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},f=this||self;function p(d){var y=typeof d;return y=="object"&&d!=null||y=="function"}function x(d,y,b){return d.call.apply(d.bind,arguments)}function g(d,y,b){return g=x,g.apply(null,arguments)}function _(d,y){var b=Array.prototype.slice.call(arguments,1);return function(){var S=b.slice();return S.push.apply(S,arguments),d.apply(this,S)}}function w(d,y){function b(){}b.prototype=y.prototype,d.Z=y.prototype,d.prototype=new b,d.prototype.constructor=d,d.Ob=function(S,z,H){for(var oe=Array(arguments.length-2),Me=2;Me<arguments.length;Me++)oe[Me-2]=arguments[Me];return y.prototype[z].apply(S,oe)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function M(d){const y=d.length;if(y>0){const b=Array(y);for(let S=0;S<y;S++)b[S]=d[S];return b}return[]}function F(d,y){for(let S=1;S<arguments.length;S++){const z=arguments[S];var b=typeof z;if(b=b!="object"?b:z?Array.isArray(z)?"array":b:"null",b=="array"||b=="object"&&typeof z.length=="number"){b=d.length||0;const H=z.length||0;d.length=b+H;for(let oe=0;oe<H;oe++)d[b+oe]=z[oe]}else d.push(z)}}class Y{constructor(y,b){this.i=y,this.j=b,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function G(d){f.setTimeout(()=>{throw d},0)}function ee(){var d=C;let y=null;return d.g&&(y=d.g,d.g=d.g.next,d.g||(d.h=null),y.next=null),y}class ne{constructor(){this.h=this.g=null}add(y,b){const S=le.get();S.set(y,b),this.h?this.h.next=S:this.g=S,this.h=S}}var le=new Y(()=>new ue,d=>d.reset());class ue{constructor(){this.next=this.g=this.h=null}set(y,b){this.h=y,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let De,se=!1,C=new ne,A=()=>{const d=Promise.resolve(void 0);De=()=>{d.then(I)}};function I(){for(var d;d=ee();){try{d.h.call(d.g)}catch(b){G(b)}var y=le;y.j(d),y.h<100&&(y.h++,d.next=y.g,y.g=d)}se=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(d,y){this.type=d,this.g=this.target=y,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var V=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var d=!1,y=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const b=()=>{};f.addEventListener("test",b,y),f.removeEventListener("test",b,y)}catch{}return d})();function R(d){return/^[\s\xa0]*$/.test(d)}function et(d,y){D.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,y)}w(et,D),et.prototype.init=function(d,y){const b=this.type=d.type,S=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=y,y=d.relatedTarget,y||(b=="mouseover"?y=d.fromElement:b=="mouseout"&&(y=d.toElement)),this.relatedTarget=y,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&et.Z.h.call(this)},et.prototype.h=function(){et.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Ye="closure_listenable_"+(Math.random()*1e6|0),K=0;function ce(d,y,b,S,z){this.listener=d,this.proxy=null,this.src=y,this.type=b,this.capture=!!S,this.ha=z,this.key=++K,this.da=this.fa=!1}function xe(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Te(d,y,b){for(const S in d)y.call(b,d[S],S,d)}function ze(d,y){for(const b in d)y.call(void 0,d[b],b,d)}function N(d){const y={};for(const b in d)y[b]=d[b];return y}const L="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ae(d,y){let b,S;for(let z=1;z<arguments.length;z++){S=arguments[z];for(b in S)d[b]=S[b];for(let H=0;H<L.length;H++)b=L[H],Object.prototype.hasOwnProperty.call(S,b)&&(d[b]=S[b])}}function re(d){this.src=d,this.g={},this.h=0}re.prototype.add=function(d,y,b,S,z){const H=d.toString();d=this.g[H],d||(d=this.g[H]=[],this.h++);const oe=Ee(d,y,S,z);return oe>-1?(y=d[oe],b||(y.fa=!1)):(y=new ce(y,this.src,H,!!S,z),y.fa=b,d.push(y)),y};function he(d,y){const b=y.type;if(b in d.g){var S=d.g[b],z=Array.prototype.indexOf.call(S,y,void 0),H;(H=z>=0)&&Array.prototype.splice.call(S,z,1),H&&(xe(y),d.g[b].length==0&&(delete d.g[b],d.h--))}}function Ee(d,y,b,S){for(let z=0;z<d.length;++z){const H=d[z];if(!H.da&&H.listener==y&&H.capture==!!b&&H.ha==S)return z}return-1}var Pe="closure_lm_"+(Math.random()*1e6|0),yt={};function tt(d,y,b,S,z){if(Array.isArray(y)){for(let H=0;H<y.length;H++)tt(d,y[H],b,S,z);return null}return b=ki(b),d&&d[Ye]?d.J(y,b,p(S)?!!S.capture:!1,z):Mn(d,y,b,!1,S,z)}function Mn(d,y,b,S,z,H){if(!y)throw Error("Invalid event type");const oe=p(z)?!!z.capture:!!z;let Me=En(d);if(Me||(d[Pe]=Me=new re(d)),b=Me.add(y,b,S,oe,H),b.proxy)return b;if(S=Yt(),b.proxy=S,S.src=d,S.listener=b,d.addEventListener)V||(z=oe),z===void 0&&(z=!1),d.addEventListener(y.toString(),S,z);else if(d.attachEvent)d.attachEvent(kt(y.toString()),S);else if(d.addListener&&d.removeListener)d.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return b}function Yt(){function d(b){return y.call(d.src,d.listener,b)}const y=As;return d}function Vn(d,y,b,S,z){if(Array.isArray(y))for(var H=0;H<y.length;H++)Vn(d,y[H],b,S,z);else S=p(S)?!!S.capture:!!S,b=ki(b),d&&d[Ye]?(d=d.i,H=String(y).toString(),H in d.g&&(y=d.g[H],b=Ee(y,b,S,z),b>-1&&(xe(y[b]),Array.prototype.splice.call(y,b,1),y.length==0&&(delete d.g[H],d.h--)))):d&&(d=En(d))&&(y=d.g[y.toString()],d=-1,y&&(d=Ee(y,b,S,z)),(b=d>-1?y[d]:null)&&Ns(b))}function Ns(d){if(typeof d!="number"&&d&&!d.da){var y=d.src;if(y&&y[Ye])he(y.i,d);else{var b=d.type,S=d.proxy;y.removeEventListener?y.removeEventListener(b,S,d.capture):y.detachEvent?y.detachEvent(kt(b),S):y.addListener&&y.removeListener&&y.removeListener(S),(b=En(y))?(he(b,d),b.h==0&&(b.src=null,y[Pe]=null)):xe(d)}}}function kt(d){return d in yt?yt[d]:yt[d]="on"+d}function As(d,y){if(d.da)d=!0;else{y=new et(y,this);const b=d.listener,S=d.ha||d.src;d.fa&&Ns(d),d=b.call(S,y)}return d}function En(d){return d=d[Pe],d instanceof re?d:null}var Oi="__closure_events_fn_"+(Math.random()*1e9>>>0);function ki(d){return typeof d=="function"?d:(d[Oi]||(d[Oi]=function(y){return d.handleEvent(y)}),d[Oi])}function bt(){k.call(this),this.i=new re(this),this.M=this,this.G=null}w(bt,k),bt.prototype[Ye]=!0,bt.prototype.removeEventListener=function(d,y,b,S){Vn(this,d,y,b,S)};function wt(d,y){var b,S=d.G;if(S)for(b=[];S;S=S.G)b.push(S);if(d=d.M,S=y.type||y,typeof y=="string")y=new D(y,d);else if(y instanceof D)y.target=y.target||d;else{var z=y;y=new D(S,d),ae(y,z)}z=!0;let H,oe;if(b)for(oe=b.length-1;oe>=0;oe--)H=y.g=b[oe],z=$n(H,S,!0,y)&&z;if(H=y.g=d,z=$n(H,S,!0,y)&&z,z=$n(H,S,!1,y)&&z,b)for(oe=0;oe<b.length;oe++)H=y.g=b[oe],z=$n(H,S,!1,y)&&z}bt.prototype.N=function(){if(bt.Z.N.call(this),this.i){var d=this.i;for(const y in d.g){const b=d.g[y];for(let S=0;S<b.length;S++)xe(b[S]);delete d.g[y],d.h--}}this.G=null},bt.prototype.J=function(d,y,b,S){return this.i.add(String(d),y,!1,b,S)},bt.prototype.K=function(d,y,b,S){return this.i.add(String(d),y,!0,b,S)};function $n(d,y,b,S){if(y=d.i.g[String(y)],!y)return!0;y=y.concat();let z=!0;for(let H=0;H<y.length;++H){const oe=y[H];if(oe&&!oe.da&&oe.capture==b){const Me=oe.listener,Rt=oe.ha||oe.src;oe.fa&&he(d.i,oe),z=Me.call(Rt,S)!==!1&&z}}return z&&!S.defaultPrevented}function ja(d,y){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=g(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:f.setTimeout(d,y||0)}function zr(d){d.g=ja(()=>{d.g=null,d.i&&(d.i=!1,zr(d))},d.l);const y=d.h;d.h=null,d.m.apply(null,y)}class tn extends k{constructor(y,b){super(),this.m=y,this.l=b,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:zr(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Cs(d){k.call(this),this.h=d,this.g={}}w(Cs,k);var Mi=[];function Vi(d){Te(d.g,function(y,b){this.g.hasOwnProperty(b)&&Ns(y)},d),d.g={}}Cs.prototype.N=function(){Cs.Z.N.call(this),Vi(this)},Cs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var wn=f.JSON.stringify,Gl=f.JSON.parse,Ia=class{stringify(d){return f.JSON.stringify(d,void 0)}parse(d){return f.JSON.parse(d,void 0)}};function Da(){}function Ur(){}var Pn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function At(){D.call(this,"d")}w(At,D);function Sn(){D.call(this,"c")}w(Sn,D);var _t={},ds=null;function ie(){return ds=ds||new bt}_t.Ia="serverreachability";function Ne(d){D.call(this,_t.Ia,d)}w(Ne,D);function pe(d){const y=ie();wt(y,new Ne(y))}_t.STAT_EVENT="statevent";function Oe(d,y){D.call(this,_t.STAT_EVENT,d),this.stat=y}w(Oe,D);function Re(d){const y=ie();wt(y,new Oe(y,d))}_t.Ja="timingevent";function Ct(d,y){D.call(this,_t.Ja,d),this.size=y}w(Ct,D);function $t(d,y){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){d()},y)}function Mt(){this.g=!0}Mt.prototype.ua=function(){this.g=!1};function dn(d,y,b,S,z,H){d.info(function(){if(d.g)if(H){var oe="",Me=H.split("&");for(let nt=0;nt<Me.length;nt++){var Rt=Me[nt].split("=");if(Rt.length>1){const xt=Rt[0];Rt=Rt[1];const Wn=xt.split("_");oe=Wn.length>=2&&Wn[1]=="type"?oe+(xt+"="+Rt+"&"):oe+(xt+"=redacted&")}}}else oe=null;else oe=H;return"XMLHTTP REQ ("+S+") [attempt "+z+"]: "+y+`
`+b+`
`+oe})}function Oc(d,y,b,S,z,H,oe){d.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+z+"]: "+y+`
`+b+`
`+H+" "+oe})}function Rs(d,y,b,S){d.info(function(){return"XMLHTTP TEXT ("+y+"): "+ph(d,b)+(S?" "+S:"")})}function Br(d,y){d.info(function(){return"TIMEOUT: "+y})}Mt.prototype.info=function(){};function ph(d,y){if(!d.g)return y;if(!y)return null;try{const H=JSON.parse(y);if(H){for(d=0;d<H.length;d++)if(Array.isArray(H[d])){var b=H[d];if(!(b.length<2)){var S=b[1];if(Array.isArray(S)&&!(S.length<1)){var z=S[0];if(z!="noop"&&z!="stop"&&z!="close")for(let oe=1;oe<S.length;oe++)S[oe]=""}}}}return wn(H)}catch{return y}}var qr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ql={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Kl;function Hr(){}w(Hr,Da),Hr.prototype.g=function(){return new XMLHttpRequest},Kl=new Hr;function ii(d){return encodeURIComponent(String(d))}function kc(d){var y=1;d=d.split(":");const b=[];for(;y>0&&d.length;)b.push(d.shift()),y--;return d.length&&b.push(d.join(":")),b}function hs(d,y,b,S){this.j=d,this.i=y,this.l=b,this.S=S||1,this.V=new Cs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new fs}function fs(){this.i=null,this.g="",this.h=!1}var Vt={},Xt={};function js(d,y,b){d.M=1,d.A=Fr(Lt(y)),d.u=b,d.R=!0,Oa(d,null)}function Oa(d,y){d.F=Date.now(),Is(d),d.B=Lt(d.A);var b=d.B,S=d.S;Array.isArray(S)||(S=[String(S)]),Pa(b.i,"t",S),d.C=0,b=d.j.L,d.h=new fs,d.g=$c(d.j,b?y:null,!d.u),d.P>0&&(d.O=new tn(g(d.Y,d,d.g),d.P)),y=d.V,b=d.g,S=d.ba;var z="readystatechange";Array.isArray(z)||(z&&(Mi[0]=z.toString()),z=Mi);for(let H=0;H<z.length;H++){const oe=tt(b,z[H],S||y.handleEvent,!1,y.h||y);if(!oe)break;y.g[oe.key]=oe}y=d.J?N(d.J):{},d.u?(d.v||(d.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,y)):(d.v="GET",d.g.ea(d.B,d.v,null,y)),pe(),dn(d.i,d.v,d.B,d.l,d.S,d.u)}hs.prototype.ba=function(d){d=d.target;const y=this.O;y&&gs(d)==3?y.j():this.Y(d)},hs.prototype.Y=function(d){try{if(d==this.g)e:{const Me=gs(this.g),Rt=this.g.ya(),nt=this.g.ca();if(!(Me<3)&&(Me!=3||this.g&&(this.h.h||this.g.la()||nn(this.g)))){this.K||Me!=4||Rt==7||(Rt==8||nt<=0?pe(3):pe(2)),Ds(this);var y=this.g.ca();this.X=y;var b=gh(this);if(this.o=y==200,Oc(this.i,this.v,this.B,this.l,this.S,Me,y),this.o){if(this.U&&!this.L){t:{if(this.g){var S,z=this.g;if((S=z.g?z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(S)){var H=S;break t}}H=null}if(d=H)Rs(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Os(this,d);else{this.o=!1,this.m=3,Re(12),Ln(this),Xn(this);break e}}if(this.R){d=!0;let xt;for(;!this.K&&this.C<b.length;)if(xt=Vc(this,b),xt==Xt){Me==4&&(this.m=4,Re(14),d=!1),Rs(this.i,this.l,null,"[Incomplete Response]");break}else if(xt==Vt){this.m=4,Re(15),Rs(this.i,this.l,b,"[Invalid Chunk]"),d=!1;break}else Rs(this.i,this.l,xt,null),Os(this,xt);if(Mc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Me!=4||b.length!=0||this.h.h||(this.m=1,Re(16),d=!1),this.o=this.o&&d,!d)Rs(this.i,this.l,b,"[Invalid Chunked Response]"),Ln(this),Xn(this);else if(b.length>0&&!this.W){this.W=!0;var oe=this.j;oe.g==this&&oe.aa&&!oe.P&&(oe.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),oo(oe),oe.P=!0,Re(11))}}else Rs(this.i,this.l,b,null),Os(this,b);Me==4&&Ln(this),this.o&&!this.K&&(Me==4?Gc(this.j,this):(this.o=!1,Is(this)))}else ai(this.g),y==400&&b.indexOf("Unknown SID")>0?(this.m=3,Re(12)):(this.m=0,Re(13)),Ln(this),Xn(this)}}}catch{}finally{}};function gh(d){if(!Mc(d))return d.g.la();const y=nn(d.g);if(y==="")return"";let b="";const S=y.length,z=gs(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Ln(d),Xn(d),"";d.h.i=new f.TextDecoder}for(let H=0;H<S;H++)d.h.h=!0,b+=d.h.i.decode(y[H],{stream:!(z&&H==S-1)});return y.length=0,d.h.g+=b,d.C=0,d.h.g}function Mc(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function Vc(d,y){var b=d.C,S=y.indexOf(`
`,b);return S==-1?Xt:(b=Number(y.substring(b,S)),isNaN(b)?Vt:(S+=1,S+b>y.length?Xt:(y=y.slice(S,S+b),d.C=S+b,y)))}hs.prototype.cancel=function(){this.K=!0,Ln(this)};function Is(d){d.T=Date.now()+d.H,ka(d,d.H)}function ka(d,y){if(d.D!=null)throw Error("WatchDog timer not null");d.D=$t(g(d.aa,d),y)}function Ds(d){d.D&&(f.clearTimeout(d.D),d.D=null)}hs.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(Br(this.i,this.B),this.M!=2&&(pe(),Re(17)),Ln(this),this.m=2,Xn(this)):ka(this,this.T-d)};function Xn(d){d.j.I==0||d.K||Gc(d.j,d)}function Ln(d){Ds(d);var y=d.O;y&&typeof y.dispose=="function"&&y.dispose(),d.O=null,Vi(d.V),d.g&&(y=d.g,d.g=null,y.abort(),y.dispose())}function Os(d,y){try{var b=d.j;if(b.I!=0&&(b.g==d||Ms(b.h,d))){if(!d.L&&Ms(b.h,d)&&b.I==3){try{var S=b.Ba.g.parse(y)}catch{S=null}if(Array.isArray(S)&&S.length==3){var z=S;if(z[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<d.F)qa(b),Fi(b);else break e;Jr(b),Re(18)}}else b.xa=z[1],0<b.xa-b.K&&z[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=$t(g(b.Va,b),6e3));ks(b.h)<=1&&b.ta&&(b.ta=void 0)}else Bs(b,11)}else if((d.L||b.g==d)&&qa(b),!R(y))for(z=b.Ba.g.parse(y),y=0;y<z.length;y++){let nt=z[y];const xt=nt[0];if(!(xt<=b.K))if(b.K=xt,nt=nt[1],b.I==2)if(nt[0]=="c"){b.M=nt[1],b.ba=nt[2];const Wn=nt[3];Wn!=null&&(b.ka=Wn,b.j.info("VER="+b.ka));const qs=nt[4];qs!=null&&(b.za=qs,b.j.info("SVER="+b.za));const ys=nt[5];ys!=null&&typeof ys=="number"&&ys>0&&(S=1.5*ys,b.O=S,b.j.info("backChannelRequestTimeoutMs_="+S)),S=b;const xs=d.g;if(xs){const Zr=xs.g?xs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Zr){var H=S.h;H.g||Zr.indexOf("spdy")==-1&&Zr.indexOf("quic")==-1&&Zr.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(Xl(H,H.h),H.h=null))}if(S.G){const Ha=xs.g?xs.g.getResponseHeader("X-HTTP-Session-Id"):null;Ha&&(S.wa=Ha,rt(S.J,S.G,Ha))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-d.F,b.j.info("Handshake RTT: "+b.T+"ms")),S=b;var oe=d;if(S.na=Yc(S,S.L?S.ba:null,S.W),oe.L){Jl(S.h,oe);var Me=oe,Rt=S.O;Rt&&(Me.H=Rt),Me.D&&(Ds(Me),Is(Me)),S.g=oe}else Hc(S);b.i.length>0&&Us(b)}else nt[0]!="stop"&&nt[0]!="close"||Bs(b,7);else b.I==3&&(nt[0]=="stop"||nt[0]=="close"?nt[0]=="stop"?Bs(b,7):ao(b):nt[0]!="noop"&&b.l&&b.l.qa(nt),b.A=0)}}pe(4)}catch{}}var Pt=class{constructor(d,y){this.g=d,this.map=y}};function Yl(d){this.l=d||10,f.PerformanceNavigationTiming?(d=f.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function $l(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function ks(d){return d.h?1:d.g?d.g.size:0}function Ms(d,y){return d.h?d.h==y:d.g?d.g.has(y):!1}function Xl(d,y){d.g?d.g.add(y):d.h=y}function Jl(d,y){d.h&&d.h==y?d.h=null:d.g&&d.g.has(y)&&d.g.delete(y)}Yl.prototype.cancel=function(){if(this.i=Zl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Zl(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let y=d.i;for(const b of d.g.values())y=y.concat(b.G);return y}return M(d.i)}var Pc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ma(d,y){if(d){d=d.split("&");for(let b=0;b<d.length;b++){const S=d[b].indexOf("=");let z,H=null;S>=0?(z=d[b].substring(0,S),H=d[b].substring(S+1)):z=d[b],y(z,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function zn(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;d instanceof zn?(this.l=d.l,Jt(this,d.j),this.o=d.o,this.g=d.g,Pi(this,d.u),this.h=d.h,Wl(this,Bc(d.i)),this.m=d.m):d&&(y=String(d).match(Pc))?(this.l=!1,Jt(this,y[1]||"",!0),this.o=Vs(y[2]||""),this.g=Vs(y[3]||"",!0),Pi(this,y[4]),this.h=Vs(y[5]||"",!0),Wl(this,y[6]||"",!0),this.m=Vs(y[7]||"")):(this.l=!1,this.i=new zi(null,this.l))}zn.prototype.toString=function(){const d=[];var y=this.j;y&&d.push(Gr(y,Va,!0),":");var b=this.g;return(b||y=="file")&&(d.push("//"),(y=this.o)&&d.push(Gr(y,Va,!0),"@"),d.push(ii(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&d.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&d.push("/"),d.push(Gr(b,b.charAt(0)=="/"?eo:Lc,!0))),(b=this.i.toString())&&d.push("?",b),(b=this.m)&&d.push("#",Gr(b,zc)),d.join("")},zn.prototype.resolve=function(d){const y=Lt(this);let b=!!d.j;b?Jt(y,d.j):b=!!d.o,b?y.o=d.o:b=!!d.g,b?y.g=d.g:b=d.u!=null;var S=d.h;if(b)Pi(y,d.u);else if(b=!!d.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var z=y.h.lastIndexOf("/");z!=-1&&(S=y.h.slice(0,z+1)+S)}if(z=S,z==".."||z==".")S="";else if(z.indexOf("./")!=-1||z.indexOf("/.")!=-1){S=z.lastIndexOf("/",0)==0,z=z.split("/");const H=[];for(let oe=0;oe<z.length;){const Me=z[oe++];Me=="."?S&&oe==z.length&&H.push(""):Me==".."?((H.length>1||H.length==1&&H[0]!="")&&H.pop(),S&&oe==z.length&&H.push("")):(H.push(Me),S=!0)}S=H.join("/")}else S=z}return b?y.h=S:b=d.i.toString()!=="",b?Wl(y,Bc(d.i)):b=!!d.m,b&&(y.m=d.m),y};function Lt(d){return new zn(d)}function Jt(d,y,b){d.j=b?Vs(y,!0):y,d.j&&(d.j=d.j.replace(/:$/,""))}function Pi(d,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);d.u=y}else d.u=null}function Wl(d,y,b){y instanceof zi?(d.i=y,La(d.i,d.l)):(b||(y=Gr(y,Li)),d.i=new zi(y,d.l))}function rt(d,y,b){d.i.set(y,b)}function Fr(d){return rt(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function Vs(d,y){return d?y?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Gr(d,y,b){return typeof d=="string"?(d=encodeURI(d).replace(y,Tn),b&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Tn(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Va=/[#\/\?@]/g,Lc=/[#\?:]/g,eo=/[#\?]/g,Li=/[#\?@]/g,zc=/#/g;function zi(d,y){this.h=this.g=null,this.i=d||null,this.j=!!y}function Nn(d){d.g||(d.g=new Map,d.h=0,d.i&&Ma(d.i,function(y,b){d.add(decodeURIComponent(y.replace(/\+/g," ")),b)}))}i=zi.prototype,i.add=function(d,y){Nn(this),this.i=null,d=Ui(this,d);let b=this.g.get(d);return b||this.g.set(d,b=[]),b.push(y),this.h+=1,this};function Uc(d,y){Nn(d),y=Ui(d,y),d.g.has(y)&&(d.i=null,d.h-=d.g.get(y).length,d.g.delete(y))}function to(d,y){return Nn(d),y=Ui(d,y),d.g.has(y)}i.forEach=function(d,y){Nn(this),this.g.forEach(function(b,S){b.forEach(function(z){d.call(y,z,S,this)},this)},this)};function no(d,y){Nn(d);let b=[];if(typeof y=="string")to(d,y)&&(b=b.concat(d.g.get(Ui(d,y))));else for(d=Array.from(d.g.values()),y=0;y<d.length;y++)b=b.concat(d[y]);return b}i.set=function(d,y){return Nn(this),this.i=null,d=Ui(this,d),to(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[y]),this.h+=1,this},i.get=function(d,y){return d?(d=no(this,d),d.length>0?String(d[0]):y):y};function Pa(d,y,b){Uc(d,y),b.length>0&&(d.i=null,d.g.set(Ui(d,y),M(b)),d.h+=b.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],y=Array.from(this.g.keys());for(let S=0;S<y.length;S++){var b=y[S];const z=ii(b);b=no(this,b);for(let H=0;H<b.length;H++){let oe=z;b[H]!==""&&(oe+="="+ii(b[H])),d.push(oe)}}return this.i=d.join("&")};function Bc(d){const y=new zi;return y.i=d.i,d.g&&(y.g=new Map(d.g),y.h=d.h),y}function Ui(d,y){return y=String(y),d.j&&(y=y.toLowerCase()),y}function La(d,y){y&&!d.j&&(Nn(d),d.i=null,d.g.forEach(function(b,S){const z=S.toLowerCase();S!=z&&(Uc(this,S),Pa(this,z,b))},d)),d.j=y}function ms(d,y){const b=new Mt;if(f.Image){const S=new Image;S.onload=_(Jn,b,"TestLoadImage: loaded",!0,y,S),S.onerror=_(Jn,b,"TestLoadImage: error",!1,y,S),S.onabort=_(Jn,b,"TestLoadImage: abort",!1,y,S),S.ontimeout=_(Jn,b,"TestLoadImage: timeout",!1,y,S),f.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=d}else y(!1)}function so(d,y){const b=new Mt,S=new AbortController,z=setTimeout(()=>{S.abort(),Jn(b,"TestPingServer: timeout",!1,y)},1e4);fetch(d,{signal:S.signal}).then(H=>{clearTimeout(z),H.ok?Jn(b,"TestPingServer: ok",!0,y):Jn(b,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(z),Jn(b,"TestPingServer: error",!1,y)})}function Jn(d,y,b,S,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),S(b)}catch{}}function Bi(){this.g=new Ia}function Ps(d){this.i=d.Sb||null,this.h=d.ab||!1}w(Ps,Da),Ps.prototype.g=function(){return new Qr(this.i,this.h)};function Qr(d,y){bt.call(this),this.H=d,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(Qr,bt),i=Qr.prototype,i.open=function(d,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=y,this.readyState=1,ps(this)},i.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(y.body=d),(this.H||f).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,qi(this)),this.readyState=0},i.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,ps(this)),this.g&&(this.readyState=3,ps(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;za(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function za(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}i.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var y=d.value?d.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!d.done}))&&(this.response=this.responseText+=y)}d.done?qi(this):ps(this),this.readyState==3&&za(this)}},i.Oa=function(d){this.g&&(this.response=this.responseText=d,qi(this))},i.Na=function(d){this.g&&(this.response=d,qi(this))},i.ga=function(){this.g&&qi(this)};function qi(d){d.readyState=4,d.l=null,d.j=null,d.B=null,ps(d)}i.setRequestHeader=function(d,y){this.A.append(d,y)},i.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],y=this.h.entries();for(var b=y.next();!b.done;)b=b.value,d.push(b[0]+": "+b[1]),b=y.next();return d.join(`\r
`)};function ps(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Qr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Zn(d){let y="";return Te(d,function(b,S){y+=S,y+=":",y+=b,y+=`\r
`}),y}function Kr(d,y,b){e:{for(S in b){var S=!1;break e}S=!0}S||(b=Zn(b),typeof d=="string"?b!=null&&ii(b):rt(d,y,b))}function ot(d){bt.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(ot,bt);var Ls=/^https?$/i,io=["POST","PUT"];i=ot.prototype,i.Fa=function(d){this.H=d},i.ea=function(d,y,b,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);y=y?y.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Kl.g(),this.g.onreadystatechange=T(g(this.Ca,this));try{this.B=!0,this.g.open(y,String(d),!0),this.B=!1}catch(H){Yr(this,H);return}if(d=b||"",b=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var z in S)b.set(z,S[z]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const H of S.keys())b.set(H,S.get(H));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(b.keys()).find(H=>H.toLowerCase()=="content-type"),z=f.FormData&&d instanceof f.FormData,!(Array.prototype.indexOf.call(io,y,void 0)>=0)||S||z||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,oe]of b)this.g.setRequestHeader(H,oe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(H){Yr(this,H)}};function Yr(d,y){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=y,d.o=5,ro(d),ri(d)}function ro(d){d.A||(d.A=!0,wt(d,"complete"),wt(d,"error"))}i.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,wt(this,"complete"),wt(this,"abort"),ri(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ri(this,!0)),ot.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?$r(this):this.Xa())},i.Xa=function(){$r(this)};function $r(d){if(d.h&&typeof u<"u"){if(d.v&&gs(d)==4)setTimeout(d.Ca.bind(d),0);else if(wt(d,"readystatechange"),gs(d)==4){d.h=!1;try{const H=d.ca();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var b;if(!(b=y)){var S;if(S=H===0){let oe=String(d.D).match(Pc)[1]||null;!oe&&f.self&&f.self.location&&(oe=f.self.location.protocol.slice(0,-1)),S=!Ls.test(oe?oe.toLowerCase():"")}b=S}if(b)wt(d,"complete"),wt(d,"success");else{d.o=6;try{var z=gs(d)>2?d.g.statusText:""}catch{z=""}d.l=z+" ["+d.ca()+"]",ro(d)}}finally{ri(d)}}}}function ri(d,y){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const b=d.g;d.g=null,y||wt(d,"ready");try{b.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function gs(d){return d.g?d.g.readyState:0}i.ca=function(){try{return gs(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(d){if(this.g){var y=this.g.responseText;return d&&y.indexOf(d)==0&&(y=y.substring(d.length)),Gl(y)}};function nn(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function ai(d){const y={};d=(d.g&&gs(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<d.length;S++){if(R(d[S]))continue;var b=kc(d[S]);const z=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const H=y[z]||[];y[z]=H,H.push(b)}ze(y,function(S){return S.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function zs(d,y,b){return b&&b.internalChannelParams&&b.internalChannelParams[d]||y}function Hi(d){this.za=0,this.i=[],this.j=new Mt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=zs("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=zs("baseRetryDelayMs",5e3,d),this.Za=zs("retryDelaySeedMs",1e4,d),this.Ta=zs("forwardChannelMaxRetries",2,d),this.va=zs("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new Yl(d&&d.concurrentRequestLimit),this.Ba=new Bi,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=Hi.prototype,i.ka=8,i.I=1,i.connect=function(d,y,b,S){Re(0),this.W=d,this.H=y||{},b&&S!==void 0&&(this.H.OSID=b,this.H.OAID=S),this.F=this.X,this.J=Yc(this,null,this.W),Us(this)};function ao(d){if(Ua(d),d.I==3){var y=d.V++,b=Lt(d.J);if(rt(b,"SID",d.M),rt(b,"RID",y),rt(b,"TYPE","terminate"),Xr(d,b),y=new hs(d,d.j,y),y.M=2,y.A=Fr(Lt(b)),b=!1,f.navigator&&f.navigator.sendBeacon)try{b=f.navigator.sendBeacon(y.A.toString(),"")}catch{}!b&&f.Image&&(new Image().src=y.A,b=!0),b||(y.g=$c(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Is(y)}Kc(d)}function Fi(d){d.g&&(oo(d),d.g.cancel(),d.g=null)}function Ua(d){Fi(d),d.v&&(f.clearTimeout(d.v),d.v=null),qa(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&f.clearTimeout(d.m),d.m=null)}function Us(d){if(!$l(d.h)&&!d.m){d.m=!0;var y=d.Ea;De||A(),se||(De(),se=!0),C.add(y,d),d.D=0}}function Ba(d,y){return ks(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=y.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=$t(g(d.Ea,d,y),Qc(d,d.D)),d.D++,!0)}i.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const z=new hs(this,this.j,d);let H=this.o;if(this.U&&(H?(H=N(H),ae(H,this.U)):H=this.U),this.u!==null||this.R||(z.J=H,H=null),this.S)e:{for(var y=0,b=0;b<this.i.length;b++){t:{var S=this.i[b];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(y+=S,y>4096){y=b;break e}if(y===4096||b===this.i.length-1){y=b+1;break e}}y=1e3}else y=1e3;y=qc(this,z,y),b=Lt(this.J),rt(b,"RID",d),rt(b,"CVER",22),this.G&&rt(b,"X-HTTP-Session-Id",this.G),Xr(this,b),H&&(this.R?y="headers="+ii(Zn(H))+"&"+y:this.u&&Kr(b,this.u,H)),Xl(this.h,z),this.Ra&&rt(b,"TYPE","init"),this.S?(rt(b,"$req",y),rt(b,"SID","null"),z.U=!0,js(z,b,null)):js(z,b,y),this.I=2}}else this.I==3&&(d?lo(this,d):this.i.length==0||$l(this.h)||lo(this))};function lo(d,y){var b;y?b=y.l:b=d.V++;const S=Lt(d.J);rt(S,"SID",d.M),rt(S,"RID",b),rt(S,"AID",d.K),Xr(d,S),d.u&&d.o&&Kr(S,d.u,d.o),b=new hs(d,d.j,b,d.D+1),d.u===null&&(b.J=d.o),y&&(d.i=y.G.concat(d.i)),y=qc(d,b,1e3),b.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),Xl(d.h,b),js(b,S,y)}function Xr(d,y){d.H&&Te(d.H,function(b,S){rt(y,S,b)}),d.l&&Te({},function(b,S){rt(y,S,b)})}function qc(d,y,b){b=Math.min(d.i.length,b);const S=d.l?g(d.l.Ka,d.l,d):null;e:{var z=d.i;let Me=-1;for(;;){const Rt=["count="+b];Me==-1?b>0?(Me=z[0].g,Rt.push("ofs="+Me)):Me=0:Rt.push("ofs="+Me);let nt=!0;for(let xt=0;xt<b;xt++){var H=z[xt].g;const Wn=z[xt].map;if(H-=Me,H<0)Me=Math.max(0,z[xt].g-100),nt=!1;else try{H="req"+H+"_"||"";try{var oe=Wn instanceof Map?Wn:Object.entries(Wn);for(const[qs,ys]of oe){let xs=ys;p(ys)&&(xs=wn(ys)),Rt.push(H+qs+"="+encodeURIComponent(xs))}}catch(qs){throw Rt.push(H+"type="+encodeURIComponent("_badmap")),qs}}catch{S&&S(Wn)}}if(nt){oe=Rt.join("&");break e}}oe=void 0}return d=d.i.splice(0,b),y.G=d,oe}function Hc(d){if(!d.g&&!d.v){d.Y=1;var y=d.Da;De||A(),se||(De(),se=!0),C.add(y,d),d.A=0}}function Jr(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=$t(g(d.Da,d),Qc(d,d.A)),d.A++,!0)}i.Da=function(){if(this.v=null,Fc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=$t(g(this.Wa,this),d)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Re(10),Fi(this),Fc(this))};function oo(d){d.B!=null&&(f.clearTimeout(d.B),d.B=null)}function Fc(d){d.g=new hs(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var y=Lt(d.na);rt(y,"RID","rpc"),rt(y,"SID",d.M),rt(y,"AID",d.K),rt(y,"CI",d.F?"0":"1"),!d.F&&d.ia&&rt(y,"TO",d.ia),rt(y,"TYPE","xmlhttp"),Xr(d,y),d.u&&d.o&&Kr(y,d.u,d.o),d.O&&(d.g.H=d.O);var b=d.g;d=d.ba,b.M=1,b.A=Fr(Lt(y)),b.u=null,b.R=!0,Oa(b,d)}i.Va=function(){this.C!=null&&(this.C=null,Fi(this),Jr(this),Re(19))};function qa(d){d.C!=null&&(f.clearTimeout(d.C),d.C=null)}function Gc(d,y){var b=null;if(d.g==y){qa(d),oo(d),d.g=null;var S=2}else if(Ms(d.h,y))b=y.G,Jl(d.h,y),S=1;else return;if(d.I!=0){if(y.o)if(S==1){b=y.u?y.u.length:0,y=Date.now()-y.F;var z=d.D;S=ie(),wt(S,new Ct(S,b)),Us(d)}else Hc(d);else if(z=y.m,z==3||z==0&&y.X>0||!(S==1&&Ba(d,y)||S==2&&Jr(d)))switch(b&&b.length>0&&(y=d.h,y.i=y.i.concat(b)),z){case 1:Bs(d,5);break;case 4:Bs(d,10);break;case 3:Bs(d,6);break;default:Bs(d,2)}}}function Qc(d,y){let b=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(b*=2),b*y}function Bs(d,y){if(d.j.info("Error code "+y),y==2){var b=g(d.bb,d),S=d.Ua;const z=!S;S=new zn(S||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Jt(S,"https"),Fr(S),z?ms(S.toString(),b):so(S.toString(),b)}else Re(2);d.I=0,d.l&&d.l.pa(y),Kc(d),Ua(d)}i.bb=function(d){d?(this.j.info("Successfully pinged google.com"),Re(2)):(this.j.info("Failed to ping google.com"),Re(1))};function Kc(d){if(d.I=0,d.ja=[],d.l){const y=Zl(d.h);(y.length!=0||d.i.length!=0)&&(F(d.ja,y),F(d.ja,d.i),d.h.i.length=0,M(d.i),d.i.length=0),d.l.oa()}}function Yc(d,y,b){var S=b instanceof zn?Lt(b):new zn(b);if(S.g!="")y&&(S.g=y+"."+S.g),Pi(S,S.u);else{var z=f.location;S=z.protocol,y=y?y+"."+z.hostname:z.hostname,z=+z.port;const H=new zn(null);S&&Jt(H,S),y&&(H.g=y),z&&Pi(H,z),b&&(H.h=b),S=H}return b=d.G,y=d.wa,b&&y&&rt(S,b,y),rt(S,"VER",d.ka),Xr(d,S),S}function $c(d,y,b){if(y&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=d.Aa&&!d.ma?new ot(new Ps({ab:b})):new ot(d.ma),y.Fa(d.L),y}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Xc(){}i=Xc.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function Gi(){}Gi.prototype.g=function(d,y){return new xn(d,y)};function xn(d,y){bt.call(this),this.g=new Hi(y),this.l=d,this.h=y&&y.messageUrlParams||null,d=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(d?d["X-WebChannel-Content-Type"]=y.messageContentType:d={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(d?d["X-WebChannel-Client-Profile"]=y.sa:d={"X-WebChannel-Client-Profile":y.sa}),this.g.U=d,(d=y&&y.Qb)&&!R(d)&&(this.g.u=d),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!R(y)&&(this.g.G=y,d=this.h,d!==null&&y in d&&(d=this.h,y in d&&delete d[y])),this.j=new li(this)}w(xn,bt),xn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},xn.prototype.close=function(){ao(this.g)},xn.prototype.o=function(d){var y=this.g;if(typeof d=="string"){var b={};b.__data__=d,d=b}else this.v&&(b={},b.__data__=wn(d),d=b);y.i.push(new Pt(y.Ya++,d)),y.I==3&&Us(y)},xn.prototype.N=function(){this.g.l=null,delete this.j,ao(this.g),delete this.g,xn.Z.N.call(this)};function Jc(d){At.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var y=d.__sm__;if(y){e:{for(const b in y){d=b;break e}d=void 0}(this.i=d)&&(d=this.i,y=y!==null&&d in y?y[d]:void 0),this.data=y}else this.data=d}w(Jc,At);function Zc(){Sn.call(this),this.status=1}w(Zc,Sn);function li(d){this.g=d}w(li,Xc),li.prototype.ra=function(){wt(this.g,"a")},li.prototype.qa=function(d){wt(this.g,new Jc(d))},li.prototype.pa=function(d){wt(this.g,new Zc)},li.prototype.oa=function(){wt(this.g,"b")},Gi.prototype.createWebChannel=Gi.prototype.g,xn.prototype.send=xn.prototype.o,xn.prototype.open=xn.prototype.m,xn.prototype.close=xn.prototype.close,q_=function(){return new Gi},B_=function(){return ie()},U_=_t,Km={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},qr.NO_ERROR=0,qr.TIMEOUT=8,qr.HTTP_ERROR=6,md=qr,Ql.COMPLETE="complete",z_=Ql,Ur.EventType=Pn,Pn.OPEN="a",Pn.CLOSE="b",Pn.ERROR="c",Pn.MESSAGE="d",bt.prototype.listen=bt.prototype.J,Xo=Ur,ot.prototype.listenOnce=ot.prototype.K,ot.prototype.getLastError=ot.prototype.Ha,ot.prototype.getLastErrorCode=ot.prototype.ya,ot.prototype.getStatus=ot.prototype.ca,ot.prototype.getResponseJson=ot.prototype.La,ot.prototype.getResponseText=ot.prototype.la,ot.prototype.send=ot.prototype.ea,ot.prototype.setWithCredentials=ot.prototype.Fa,L_=ot}).apply(typeof sd<"u"?sd:typeof self<"u"?self:typeof window<"u"?window:{});const Av="@firebase/firestore",Cv="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}mn.UNAUTHENTICATED=new mn(null),mn.GOOGLE_CREDENTIALS=new mn("google-credentials-uid"),mn.FIRST_PARTY=new mn("first-party-uid"),mn.MOCK_USER=new mn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ul="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wa=new yp("@firebase/firestore");function vl(){return wa.logLevel}function fe(i,...e){if(wa.logLevel<=Ge.DEBUG){const n=e.map(jp);wa.debug(`Firestore (${Ul}): ${i}`,...n)}}function ji(i,...e){if(wa.logLevel<=Ge.ERROR){const n=e.map(jp);wa.error(`Firestore (${Ul}): ${i}`,...n)}}function jl(i,...e){if(wa.logLevel<=Ge.WARN){const n=e.map(jp);wa.warn(`Firestore (${Ul}): ${i}`,...n)}}function jp(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(i,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,H_(i,r,n)}function H_(i,e,n){let r=`FIRESTORE (${Ul}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ji(r),new Error(r)}function it(i,e,n,r){let l="Unexpected state";typeof n=="string"?l=n:r=n,i||H_(e,l,r)}function Ie(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends Di{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class eR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(mn.UNAUTHENTICATED)))}shutdown(){}}class tR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class nR{constructor(e){this.t=e,this.currentUser=mn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){it(this.o===void 0,42304);let r=this.i;const l=x=>this.i!==r?(r=this.i,n(x)):Promise.resolve();let u=new Ai;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Ai,e.enqueueRetryable((()=>l(this.currentUser)))};const f=()=>{const x=u;e.enqueueRetryable((async()=>{await x.promise,await l(this.currentUser)}))},p=x=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=x,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((x=>p(x))),setTimeout((()=>{if(!this.auth){const x=this.t.getImmediate({optional:!0});x?p(x):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Ai)}}),0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(it(typeof r.accessToken=="string",31837,{l:r}),new F_(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return it(e===null||typeof e=="string",2055,{h:e}),new mn(e)}}class sR{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=mn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class iR{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new sR(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(mn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Rv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class rR{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,os(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){it(this.o===void 0,3512);const r=u=>{u.error!=null&&fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,fe("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>r(u)))};const l=u=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>l(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?l(u):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Rv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(it(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Rv(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aR(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<i;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const l=aR(40);for(let u=0;u<l.length;++u)r.length<20&&l[u]<n&&(r+=e.charAt(l[u]%62))}return r}}function Qe(i,e){return i<e?-1:i>e?1:0}function Ym(i,e){const n=Math.min(i.length,e.length);for(let r=0;r<n;r++){const l=i.charAt(r),u=e.charAt(r);if(l!==u)return Sm(l)===Sm(u)?Qe(l,u):Sm(l)?1:-1}return Qe(i.length,e.length)}const lR=55296,oR=57343;function Sm(i){const e=i.charCodeAt(0);return e>=lR&&e<=oR}function Il(i,e,n){return i.length===e.length&&i.every(((r,l)=>n(r,e[l])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $m="__name__";class Ks{constructor(e,n,r){n===void 0?n=0:n>e.length&&Se(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Se(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ks.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ks?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let l=0;l<r;l++){const u=Ks.compareSegments(e.get(l),n.get(l));if(u!==0)return u}return Qe(e.length,n.length)}static compareSegments(e,n){const r=Ks.isNumericId(e),l=Ks.isNumericId(n);return r&&!l?-1:!r&&l?1:r&&l?Ks.extractNumericId(e).compare(Ks.extractNumericId(n)):Ym(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Nr.fromString(e.substring(4,e.length-2))}}class ft extends Ks{construct(e,n,r){return new ft(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new de(J.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((l=>l.length>0)))}return new ft(n)}static emptyPath(){return new ft([])}}const cR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class cn extends Ks{construct(e,n,r){return new cn(e,n,r)}static isValidIdentifier(e){return cR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),cn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===$m}static keyField(){return new cn([$m])}static fromServerFormat(e){const n=[];let r="",l=0;const u=()=>{if(r.length===0)throw new de(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let f=!1;for(;l<e.length;){const p=e[l];if(p==="\\"){if(l+1===e.length)throw new de(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const x=e[l+1];if(x!=="\\"&&x!=="."&&x!=="`")throw new de(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=x,l+=2}else p==="`"?(f=!f,l++):p!=="."||f?(r+=p,l++):(u(),l++)}if(u(),f)throw new de(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new cn(n)}static emptyPath(){return new cn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.path=e}static fromPath(e){return new be(ft.fromString(e))}static fromName(e){return new be(ft.fromString(e).popFirst(5))}static empty(){return new be(ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ft.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new be(new ft(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G_(i,e,n){if(!n)throw new de(J.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function uR(i,e,n,r){if(e===!0&&r===!0)throw new de(J.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function jv(i){if(!be.isDocumentKey(i))throw new de(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Iv(i){if(be.isDocumentKey(i))throw new de(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Q_(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function Jd(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Se(12329,{type:typeof i})}function bn(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new de(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Jd(i);throw new de(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(i,e){const n={typeString:i};return e&&(n.value=e),n}function wc(i,e){if(!Q_(i))throw new de(J.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const l=e[r].typeString,u="value"in e[r]?{value:e[r].value}:void 0;if(!(r in i)){n=`JSON missing required field: '${r}'`;break}const f=i[r];if(l&&typeof f!==l){n=`JSON field '${r}' must be a ${l}.`;break}if(u!==void 0&&f!==u.value){n=`Expected '${r}' field to equal '${u.value}'`;break}}if(n)throw new de(J.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv=-62135596800,Ov=1e6;class gt{static now(){return gt.fromMillis(Date.now())}static fromDate(e){return gt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Ov);return new gt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new de(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new de(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Dv)throw new de(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ov}_compareTo(e){return this.seconds===e.seconds?Qe(this.nanoseconds,e.nanoseconds):Qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:gt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(wc(e,gt._jsonSchema))return new gt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Dv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}gt._jsonSchemaVersion="firestore/timestamp/1.0",gt._jsonSchema={type:Gt("string",gt._jsonSchemaVersion),seconds:Gt("number"),nanoseconds:Gt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new gt(0,0))}static max(){return new Ce(new gt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dc=-1;function dR(i,e){const n=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,l=Ce.fromTimestamp(r===1e9?new gt(n+1,0):new gt(n,r));return new Rr(l,be.empty(),e)}function hR(i){return new Rr(i.readTime,i.key,dc)}class Rr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Rr(Ce.min(),be.empty(),dc)}static max(){return new Rr(Ce.max(),be.empty(),dc)}}function fR(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=be.comparator(i.documentKey,e.documentKey),n!==0?n:Qe(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class pR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bl(i){if(i.code!==J.FAILED_PRECONDITION||i.message!==mR)throw i;fe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Se(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new te(((r,l)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,l)},this.catchCallback=u=>{this.wrapFailure(n,u).next(r,l)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof te?n:te.resolve(n)}catch(n){return te.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):te.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):te.reject(n)}static resolve(e){return new te(((n,r)=>{n(e)}))}static reject(e){return new te(((n,r)=>{r(e)}))}static waitFor(e){return new te(((n,r)=>{let l=0,u=0,f=!1;e.forEach((p=>{++l,p.next((()=>{++u,f&&u===l&&n()}),(x=>r(x)))})),f=!0,u===l&&n()}))}static or(e){let n=te.resolve(!1);for(const r of e)n=n.next((l=>l?te.resolve(l):r()));return n}static forEach(e,n){const r=[];return e.forEach(((l,u)=>{r.push(n.call(this,l,u))})),this.waitFor(r)}static mapArray(e,n){return new te(((r,l)=>{const u=e.length,f=new Array(u);let p=0;for(let x=0;x<u;x++){const g=x;n(e[g]).next((_=>{f[g]=_,++p,p===u&&r(f)}),(_=>l(_)))}}))}static doWhile(e,n){return new te(((r,l)=>{const u=()=>{e()===!0?n().next((()=>{u()}),l):r()};u()}))}}function gR(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ql(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Zd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dp=-1;function Wd(i){return i==null}function Cd(i){return i===0&&1/i==-1/0}function yR(i){return typeof i=="number"&&Number.isInteger(i)&&!Cd(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_="";function xR(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=kv(e)),e=vR(i.get(n),e);return kv(e)}function vR(i,e){let n=e;const r=i.length;for(let l=0;l<r;l++){const u=i.charAt(l);switch(u){case"\0":n+="";break;case K_:n+="";break;default:n+=u}}return n}function kv(i){return i+K_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mv(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function Pr(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function Y_(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e,n){this.comparator=e,this.root=n||on.EMPTY}insert(e,n){return new Et(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,on.BLACK,null,null))}remove(e){return new Et(this.comparator,this.root.remove(e,this.comparator).copy(null,null,on.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const l=this.comparator(e,r.key);if(l===0)return n+r.left.size;l<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new id(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new id(this.root,e,this.comparator,!1)}getReverseIterator(){return new id(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new id(this.root,e,this.comparator,!0)}}class id{constructor(e,n,r,l){this.isReverse=l,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?r(e.key,n):1,n&&l&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class on{constructor(e,n,r,l,u){this.key=e,this.value=n,this.color=r??on.RED,this.left=l??on.EMPTY,this.right=u??on.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,l,u){return new on(e??this.key,n??this.value,r??this.color,l??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let l=this;const u=r(e,l.key);return l=u<0?l.copy(null,null,null,l.left.insert(e,n,r),null):u===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(e,n,r)),l.fixUp()}removeMin(){if(this.left.isEmpty())return on.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,l=this;if(n(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(e,l.key)===0){if(l.right.isEmpty())return on.EMPTY;r=l.right.min(),l=l.copy(r.key,r.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,on.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,on.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Se(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Se(27949);return e+(this.isRed()?0:1)}}on.EMPTY=null,on.RED=!0,on.BLACK=!1;on.EMPTY=new class{constructor(){this.size=0}get key(){throw Se(57766)}get value(){throw Se(16141)}get color(){throw Se(16727)}get left(){throw Se(29726)}get right(){throw Se(36894)}copy(e,n,r,l,u){return this}insert(e,n,r){return new on(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.comparator=e,this.data=new Et(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const l=r.getNext();if(this.comparator(l.key,e[1])>=0)return;n(l.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Vv(this.data.getIterator())}getIteratorFrom(e){return new Vv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Kt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,u=r.getNext().key;if(this.comparator(l,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Kt(this.comparator);return n.data=e,n}}class Vv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this.fields=e,e.sort(cn.comparator)}static empty(){return new Kn([])}unionWith(e){let n=new Kt(cn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Kn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Il(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(l){try{return atob(l)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new $_("Invalid base64 string: "+u):u}})(e);return new un(n)}static fromUint8Array(e){const n=(function(l){let u="";for(let f=0;f<l.length;++f)u+=String.fromCharCode(l[f]);return u})(e);return new un(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let l=0;l<n.length;l++)r[l]=n.charCodeAt(l);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}un.EMPTY_BYTE_STRING=new un("");const bR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function jr(i){if(it(!!i,39018),typeof i=="string"){let e=0;const n=bR.exec(i);if(it(!!n,46558,{timestamp:i}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),e=Number(l)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Dt(i.seconds),nanos:Dt(i.nanos)}}function Dt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Ir(i){return typeof i=="string"?un.fromBase64String(i):un.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_="server_timestamp",J_="__type__",Z_="__previous_value__",W_="__local_write_time__";function Op(i){var n,r;return((r=(((n=i==null?void 0:i.mapValue)==null?void 0:n.fields)||{})[J_])==null?void 0:r.stringValue)===X_}function eh(i){const e=i.mapValue.fields[Z_];return Op(e)?eh(e):e}function hc(i){const e=jr(i.mapValue.fields[W_].timestampValue);return new gt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e,n,r,l,u,f,p,x,g,_){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=l,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=p,this.longPollingOptions=x,this.useFetchStreams=g,this.isUsingEmulator=_}}const Rd="(default)";class fc{constructor(e,n){this.projectId=e,this.database=n||Rd}static empty(){return new fc("","")}get isDefaultDatabase(){return this.database===Rd}isEqual(e){return e instanceof fc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1="__type__",ER="__max__",rd={mapValue:{}},t1="__vector__",jd="value";function Dr(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Op(i)?4:SR(i)?9007199254740991:wR(i)?10:11:Se(28295,{value:i})}function ti(i,e){if(i===e)return!0;const n=Dr(i);if(n!==Dr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return hc(i).isEqual(hc(e));case 3:return(function(l,u){if(typeof l.timestampValue=="string"&&typeof u.timestampValue=="string"&&l.timestampValue.length===u.timestampValue.length)return l.timestampValue===u.timestampValue;const f=jr(l.timestampValue),p=jr(u.timestampValue);return f.seconds===p.seconds&&f.nanos===p.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(l,u){return Ir(l.bytesValue).isEqual(Ir(u.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(l,u){return Dt(l.geoPointValue.latitude)===Dt(u.geoPointValue.latitude)&&Dt(l.geoPointValue.longitude)===Dt(u.geoPointValue.longitude)})(i,e);case 2:return(function(l,u){if("integerValue"in l&&"integerValue"in u)return Dt(l.integerValue)===Dt(u.integerValue);if("doubleValue"in l&&"doubleValue"in u){const f=Dt(l.doubleValue),p=Dt(u.doubleValue);return f===p?Cd(f)===Cd(p):isNaN(f)&&isNaN(p)}return!1})(i,e);case 9:return Il(i.arrayValue.values||[],e.arrayValue.values||[],ti);case 10:case 11:return(function(l,u){const f=l.mapValue.fields||{},p=u.mapValue.fields||{};if(Mv(f)!==Mv(p))return!1;for(const x in f)if(f.hasOwnProperty(x)&&(p[x]===void 0||!ti(f[x],p[x])))return!1;return!0})(i,e);default:return Se(52216,{left:i})}}function mc(i,e){return(i.values||[]).find((n=>ti(n,e)))!==void 0}function Dl(i,e){if(i===e)return 0;const n=Dr(i),r=Dr(e);if(n!==r)return Qe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Qe(i.booleanValue,e.booleanValue);case 2:return(function(u,f){const p=Dt(u.integerValue||u.doubleValue),x=Dt(f.integerValue||f.doubleValue);return p<x?-1:p>x?1:p===x?0:isNaN(p)?isNaN(x)?0:-1:1})(i,e);case 3:return Pv(i.timestampValue,e.timestampValue);case 4:return Pv(hc(i),hc(e));case 5:return Ym(i.stringValue,e.stringValue);case 6:return(function(u,f){const p=Ir(u),x=Ir(f);return p.compareTo(x)})(i.bytesValue,e.bytesValue);case 7:return(function(u,f){const p=u.split("/"),x=f.split("/");for(let g=0;g<p.length&&g<x.length;g++){const _=Qe(p[g],x[g]);if(_!==0)return _}return Qe(p.length,x.length)})(i.referenceValue,e.referenceValue);case 8:return(function(u,f){const p=Qe(Dt(u.latitude),Dt(f.latitude));return p!==0?p:Qe(Dt(u.longitude),Dt(f.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return Lv(i.arrayValue,e.arrayValue);case 10:return(function(u,f){var T,M,F,Y;const p=u.fields||{},x=f.fields||{},g=(T=p[jd])==null?void 0:T.arrayValue,_=(M=x[jd])==null?void 0:M.arrayValue,w=Qe(((F=g==null?void 0:g.values)==null?void 0:F.length)||0,((Y=_==null?void 0:_.values)==null?void 0:Y.length)||0);return w!==0?w:Lv(g,_)})(i.mapValue,e.mapValue);case 11:return(function(u,f){if(u===rd.mapValue&&f===rd.mapValue)return 0;if(u===rd.mapValue)return 1;if(f===rd.mapValue)return-1;const p=u.fields||{},x=Object.keys(p),g=f.fields||{},_=Object.keys(g);x.sort(),_.sort();for(let w=0;w<x.length&&w<_.length;++w){const T=Ym(x[w],_[w]);if(T!==0)return T;const M=Dl(p[x[w]],g[_[w]]);if(M!==0)return M}return Qe(x.length,_.length)})(i.mapValue,e.mapValue);default:throw Se(23264,{he:n})}}function Pv(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Qe(i,e);const n=jr(i),r=jr(e),l=Qe(n.seconds,r.seconds);return l!==0?l:Qe(n.nanos,r.nanos)}function Lv(i,e){const n=i.values||[],r=e.values||[];for(let l=0;l<n.length&&l<r.length;++l){const u=Dl(n[l],r[l]);if(u)return u}return Qe(n.length,r.length)}function Ol(i){return Xm(i)}function Xm(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(n){const r=jr(n);return`time(${r.seconds},${r.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(n){return Ir(n).toBase64()})(i.bytesValue):"referenceValue"in i?(function(n){return be.fromName(n).toString()})(i.referenceValue):"geoPointValue"in i?(function(n){return`geo(${n.latitude},${n.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(n){let r="[",l=!0;for(const u of n.values||[])l?l=!1:r+=",",r+=Xm(u);return r+"]"})(i.arrayValue):"mapValue"in i?(function(n){const r=Object.keys(n.fields||{}).sort();let l="{",u=!0;for(const f of r)u?u=!1:l+=",",l+=`${f}:${Xm(n.fields[f])}`;return l+"}"})(i.mapValue):Se(61005,{value:i})}function pd(i){switch(Dr(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=eh(i);return e?16+pd(e):16;case 5:return 2*i.stringValue.length;case 6:return Ir(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((l,u)=>l+pd(u)),0)})(i.arrayValue);case 10:case 11:return(function(r){let l=0;return Pr(r.fields,((u,f)=>{l+=u.length+pd(f)})),l})(i.mapValue);default:throw Se(13486,{value:i})}}function zv(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Jm(i){return!!i&&"integerValue"in i}function kp(i){return!!i&&"arrayValue"in i}function Uv(i){return!!i&&"nullValue"in i}function Bv(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function gd(i){return!!i&&"mapValue"in i}function wR(i){var n,r;return((r=(((n=i==null?void 0:i.mapValue)==null?void 0:n.fields)||{})[e1])==null?void 0:r.stringValue)===t1}function nc(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return Pr(i.mapValue.fields,((n,r)=>e.mapValue.fields[n]=nc(r))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=nc(i.arrayValue.values[n]);return e}return{...i}}function SR(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===ER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.value=e}static empty(){return new On({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!gd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=nc(n)}setAll(e){let n=cn.emptyPath(),r={},l=[];e.forEach(((f,p)=>{if(!n.isImmediateParentOf(p)){const x=this.getFieldsMap(n);this.applyChanges(x,r,l),r={},l=[],n=p.popLast()}f?r[p.lastSegment()]=nc(f):l.push(p.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,r,l)}delete(e){const n=this.field(e.popLast());gd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ti(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let l=n.mapValue.fields[e.get(r)];gd(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=l),n=l}return n.mapValue.fields}applyChanges(e,n,r){Pr(n,((l,u)=>e[l]=u));for(const l of r)delete e[l]}clone(){return new On(nc(this.value))}}function n1(i){const e=[];return Pr(i.fields,((n,r)=>{const l=new cn([n]);if(gd(r)){const u=n1(r.mapValue).fields;if(u.length===0)e.push(l);else for(const f of u)e.push(l.child(f))}else e.push(l)})),new Kn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e,n,r,l,u,f,p){this.key=e,this.documentType=n,this.version=r,this.readTime=l,this.createTime=u,this.data=f,this.documentState=p}static newInvalidDocument(e){return new pn(e,0,Ce.min(),Ce.min(),Ce.min(),On.empty(),0)}static newFoundDocument(e,n,r,l){return new pn(e,1,n,Ce.min(),r,l,0)}static newNoDocument(e,n){return new pn(e,2,n,Ce.min(),Ce.min(),On.empty(),0)}static newUnknownDocument(e,n){return new pn(e,3,n,Ce.min(),Ce.min(),On.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=On.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=On.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof pn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(e,n){this.position=e,this.inclusive=n}}function qv(i,e,n){let r=0;for(let l=0;l<i.position.length;l++){const u=e[l],f=i.position[l];if(u.field.isKeyField()?r=be.comparator(be.fromName(f.referenceValue),n.key):r=Dl(f,n.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function Hv(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!ti(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e,n="asc"){this.field=e,this.dir=n}}function TR(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{}class Ft extends s1{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new AR(e,n,r):n==="array-contains"?new jR(e,r):n==="in"?new IR(e,r):n==="not-in"?new DR(e,r):n==="array-contains-any"?new OR(e,r):new Ft(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new CR(e,r):new RR(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Dl(n,this.value)):n!==null&&Dr(this.value)===Dr(n)&&this.matchesComparison(Dl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ts extends s1{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ts(e,n)}matches(e){return i1(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function i1(i){return i.op==="and"}function r1(i){return NR(i)&&i1(i)}function NR(i){for(const e of i.filters)if(e instanceof Ts)return!1;return!0}function Zm(i){if(i instanceof Ft)return i.field.canonicalString()+i.op.toString()+Ol(i.value);if(r1(i))return i.filters.map((e=>Zm(e))).join(",");{const e=i.filters.map((n=>Zm(n))).join(",");return`${i.op}(${e})`}}function a1(i,e){return i instanceof Ft?(function(r,l){return l instanceof Ft&&r.op===l.op&&r.field.isEqual(l.field)&&ti(r.value,l.value)})(i,e):i instanceof Ts?(function(r,l){return l instanceof Ts&&r.op===l.op&&r.filters.length===l.filters.length?r.filters.reduce(((u,f,p)=>u&&a1(f,l.filters[p])),!0):!1})(i,e):void Se(19439)}function l1(i){return i instanceof Ft?(function(n){return`${n.field.canonicalString()} ${n.op} ${Ol(n.value)}`})(i):i instanceof Ts?(function(n){return n.op.toString()+" {"+n.getFilters().map(l1).join(" ,")+"}"})(i):"Filter"}class AR extends Ft{constructor(e,n,r){super(e,n,r),this.key=be.fromName(r.referenceValue)}matches(e){const n=be.comparator(e.key,this.key);return this.matchesComparison(n)}}class CR extends Ft{constructor(e,n){super(e,"in",n),this.keys=o1("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class RR extends Ft{constructor(e,n){super(e,"not-in",n),this.keys=o1("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function o1(i,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((r=>be.fromName(r.referenceValue)))}class jR extends Ft{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return kp(n)&&mc(n.arrayValue,this.value)}}class IR extends Ft{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&mc(this.value.arrayValue,n)}}class DR extends Ft{constructor(e,n){super(e,"not-in",n)}matches(e){if(mc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!mc(this.value.arrayValue,n)}}class OR extends Ft{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!kp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>mc(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e,n=null,r=[],l=[],u=null,f=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=l,this.limit=u,this.startAt=f,this.endAt=p,this.Te=null}}function Fv(i,e=null,n=[],r=[],l=null,u=null,f=null){return new kR(i,e,n,r,l,u,f)}function Mp(i){const e=Ie(i);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>Zm(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(u){return u.field.canonicalString()+u.dir})(r))).join(","),Wd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>Ol(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>Ol(r))).join(",")),e.Te=n}return e.Te}function Vp(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!TR(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!a1(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Hv(i.startAt,e.startAt)&&Hv(i.endAt,e.endAt)}function Wm(i){return be.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(e,n=null,r=[],l=[],u=null,f="F",p=null,x=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=l,this.limit=u,this.limitType=f,this.startAt=p,this.endAt=x,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function MR(i,e,n,r,l,u,f,p){return new Sc(i,e,n,r,l,u,f,p)}function th(i){return new Sc(i)}function Gv(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function c1(i){return i.collectionGroup!==null}function sc(i){const e=Ie(i);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let p=new Kt(cn.comparator);return f.filters.forEach((x=>{x.getFlattenedFilters().forEach((g=>{g.isInequality()&&(p=p.add(g.field))}))})),p})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new Dd(u,r))})),n.has(cn.keyField().canonicalString())||e.Ie.push(new Dd(cn.keyField(),r))}return e.Ie}function Js(i){const e=Ie(i);return e.Ee||(e.Ee=VR(e,sc(i))),e.Ee}function VR(i,e){if(i.limitType==="F")return Fv(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((l=>{const u=l.dir==="desc"?"asc":"desc";return new Dd(l.field,u)}));const n=i.endAt?new Id(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new Id(i.startAt.position,i.startAt.inclusive):null;return Fv(i.path,i.collectionGroup,e,i.filters,i.limit,n,r)}}function ep(i,e){const n=i.filters.concat([e]);return new Sc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function tp(i,e,n){return new Sc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function nh(i,e){return Vp(Js(i),Js(e))&&i.limitType===e.limitType}function u1(i){return`${Mp(Js(i))}|lt:${i.limitType}`}function bl(i){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((l=>l1(l))).join(", ")}]`),Wd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((l=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(l))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((l=>Ol(l))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((l=>Ol(l))).join(",")),`Target(${r})`})(Js(i))}; limitType=${i.limitType})`}function sh(i,e){return e.isFoundDocument()&&(function(r,l){const u=l.key.path;return r.collectionGroup!==null?l.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):be.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)})(i,e)&&(function(r,l){for(const u of sc(r))if(!u.field.isKeyField()&&l.data.field(u.field)===null)return!1;return!0})(i,e)&&(function(r,l){for(const u of r.filters)if(!u.matches(l))return!1;return!0})(i,e)&&(function(r,l){return!(r.startAt&&!(function(f,p,x){const g=qv(f,p,x);return f.inclusive?g<=0:g<0})(r.startAt,sc(r),l)||r.endAt&&!(function(f,p,x){const g=qv(f,p,x);return f.inclusive?g>=0:g>0})(r.endAt,sc(r),l))})(i,e)}function PR(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function d1(i){return(e,n)=>{let r=!1;for(const l of sc(i)){const u=LR(l,e,n);if(u!==0)return u;r=r||l.field.isKeyField()}return 0}}function LR(i,e,n){const r=i.field.isKeyField()?be.comparator(e.key,n.key):(function(u,f,p){const x=f.data.field(u),g=p.data.field(u);return x!==null&&g!==null?Dl(x,g):Se(42886)})(i.field,e,n);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return Se(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[l,u]of r)if(this.equalsFn(l,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),l=this.inner[r];if(l===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let u=0;u<l.length;u++)if(this.equalsFn(l[u][0],e))return void(l[u]=[e,n]);l.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let l=0;l<r.length;l++)if(this.equalsFn(r[l][0],e))return r.length===1?delete this.inner[n]:r.splice(l,1),this.innerSize--,!0;return!1}forEach(e){Pr(this.inner,((n,r)=>{for(const[l,u]of r)e(l,u)}))}isEmpty(){return Y_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR=new Et(be.comparator);function Ii(){return zR}const h1=new Et(be.comparator);function Jo(...i){let e=h1;for(const n of i)e=e.insert(n.key,n);return e}function f1(i){let e=h1;return i.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function pa(){return ic()}function m1(){return ic()}function ic(){return new Na((i=>i.toString()),((i,e)=>i.isEqual(e)))}const UR=new Et(be.comparator),BR=new Kt(be.comparator);function Ke(...i){let e=BR;for(const n of i)e=e.add(n);return e}const qR=new Kt(Qe);function HR(){return qR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pp(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Cd(e)?"-0":e}}function p1(i){return{integerValue:""+i}}function FR(i,e){return yR(e)?p1(e):Pp(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(){this._=void 0}}function GR(i,e,n){return i instanceof Od?(function(l,u){const f={fields:{[J_]:{stringValue:X_},[W_]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return u&&Op(u)&&(u=eh(u)),u&&(f.fields[Z_]=u),{mapValue:f}})(n,e):i instanceof pc?y1(i,e):i instanceof gc?x1(i,e):(function(l,u){const f=g1(l,u),p=Qv(f)+Qv(l.Ae);return Jm(f)&&Jm(l.Ae)?p1(p):Pp(l.serializer,p)})(i,e)}function QR(i,e,n){return i instanceof pc?y1(i,e):i instanceof gc?x1(i,e):n}function g1(i,e){return i instanceof kd?(function(r){return Jm(r)||(function(u){return!!u&&"doubleValue"in u})(r)})(e)?e:{integerValue:0}:null}class Od extends ih{}class pc extends ih{constructor(e){super(),this.elements=e}}function y1(i,e){const n=v1(e);for(const r of i.elements)n.some((l=>ti(l,r)))||n.push(r);return{arrayValue:{values:n}}}class gc extends ih{constructor(e){super(),this.elements=e}}function x1(i,e){let n=v1(e);for(const r of i.elements)n=n.filter((l=>!ti(l,r)));return{arrayValue:{values:n}}}class kd extends ih{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Qv(i){return Dt(i.integerValue||i.doubleValue)}function v1(i){return kp(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function KR(i,e){return i.field.isEqual(e.field)&&(function(r,l){return r instanceof pc&&l instanceof pc||r instanceof gc&&l instanceof gc?Il(r.elements,l.elements,ti):r instanceof kd&&l instanceof kd?ti(r.Ae,l.Ae):r instanceof Od&&l instanceof Od})(i.transform,e.transform)}class YR{constructor(e,n){this.version=e,this.transformResults=n}}class _n{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new _n}static exists(e){return new _n(void 0,e)}static updateTime(e){return new _n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yd(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class rh{}function b1(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new ah(i.key,_n.none()):new Tc(i.key,i.data,_n.none());{const n=i.data,r=On.empty();let l=new Kt(cn.comparator);for(let u of e.fields)if(!l.has(u)){let f=n.field(u);f===null&&u.length>1&&(u=u.popLast(),f=n.field(u)),f===null?r.delete(u):r.set(u,f),l=l.add(u)}return new Lr(i.key,r,new Kn(l.toArray()),_n.none())}}function $R(i,e,n){i instanceof Tc?(function(l,u,f){const p=l.value.clone(),x=Yv(l.fieldTransforms,u,f.transformResults);p.setAll(x),u.convertToFoundDocument(f.version,p).setHasCommittedMutations()})(i,e,n):i instanceof Lr?(function(l,u,f){if(!yd(l.precondition,u))return void u.convertToUnknownDocument(f.version);const p=Yv(l.fieldTransforms,u,f.transformResults),x=u.data;x.setAll(_1(l)),x.setAll(p),u.convertToFoundDocument(f.version,x).setHasCommittedMutations()})(i,e,n):(function(l,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,n)}function rc(i,e,n,r){return i instanceof Tc?(function(u,f,p,x){if(!yd(u.precondition,f))return p;const g=u.value.clone(),_=$v(u.fieldTransforms,x,f);return g.setAll(_),f.convertToFoundDocument(f.version,g).setHasLocalMutations(),null})(i,e,n,r):i instanceof Lr?(function(u,f,p,x){if(!yd(u.precondition,f))return p;const g=$v(u.fieldTransforms,x,f),_=f.data;return _.setAll(_1(u)),_.setAll(g),f.convertToFoundDocument(f.version,_).setHasLocalMutations(),p===null?null:p.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((w=>w.field)))})(i,e,n,r):(function(u,f,p){return yd(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):p})(i,e,n)}function XR(i,e){let n=null;for(const r of i.fieldTransforms){const l=e.data.field(r.field),u=g1(r.transform,l||null);u!=null&&(n===null&&(n=On.empty()),n.set(r.field,u))}return n||null}function Kv(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(r,l){return r===void 0&&l===void 0||!(!r||!l)&&Il(r,l,((u,f)=>KR(u,f)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Tc extends rh{constructor(e,n,r,l=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class Lr extends rh{constructor(e,n,r,l,u=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=l,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function _1(i){const e=new Map;return i.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=i.data.field(n);e.set(n,r)}})),e}function Yv(i,e,n){const r=new Map;it(i.length===n.length,32656,{Re:n.length,Ve:i.length});for(let l=0;l<n.length;l++){const u=i[l],f=u.transform,p=e.data.field(u.field);r.set(u.field,QR(f,p,n[l]))}return r}function $v(i,e,n){const r=new Map;for(const l of i){const u=l.transform,f=n.data.field(l.field);r.set(l.field,GR(u,f,e))}return r}class ah extends rh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class JR extends rh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(e,n,r,l){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=l}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const u=this.mutations[l];u.key.isEqual(e.key)&&$R(u,e,r[l])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=rc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=rc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=m1();return this.mutations.forEach((l=>{const u=e.get(l.key),f=u.overlayedDocument;let p=this.applyToLocalView(f,u.mutatedFields);p=n.has(l.key)?null:p;const x=b1(f,p);x!==null&&r.set(l.key,x),f.isValidDocument()||f.convertToNoDocument(Ce.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Ke())}isEqual(e){return this.batchId===e.batchId&&Il(this.mutations,e.mutations,((n,r)=>Kv(n,r)))&&Il(this.baseMutations,e.baseMutations,((n,r)=>Kv(n,r)))}}class Lp{constructor(e,n,r,l){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=l}static from(e,n,r){it(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let l=(function(){return UR})();const u=e.mutations;for(let f=0;f<u.length;f++)l=l.insert(u[f].key,r[f].version);return new Lp(e,n,r,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ej{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ht,Xe;function tj(i){switch(i){case J.OK:return Se(64938);case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0;default:return Se(15467,{code:i})}}function E1(i){if(i===void 0)return ji("GRPC error has no .code"),J.UNKNOWN;switch(i){case Ht.OK:return J.OK;case Ht.CANCELLED:return J.CANCELLED;case Ht.UNKNOWN:return J.UNKNOWN;case Ht.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case Ht.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case Ht.INTERNAL:return J.INTERNAL;case Ht.UNAVAILABLE:return J.UNAVAILABLE;case Ht.UNAUTHENTICATED:return J.UNAUTHENTICATED;case Ht.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case Ht.NOT_FOUND:return J.NOT_FOUND;case Ht.ALREADY_EXISTS:return J.ALREADY_EXISTS;case Ht.PERMISSION_DENIED:return J.PERMISSION_DENIED;case Ht.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case Ht.ABORTED:return J.ABORTED;case Ht.OUT_OF_RANGE:return J.OUT_OF_RANGE;case Ht.UNIMPLEMENTED:return J.UNIMPLEMENTED;case Ht.DATA_LOSS:return J.DATA_LOSS;default:return Se(39323,{code:i})}}(Xe=Ht||(Ht={}))[Xe.OK=0]="OK",Xe[Xe.CANCELLED=1]="CANCELLED",Xe[Xe.UNKNOWN=2]="UNKNOWN",Xe[Xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xe[Xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xe[Xe.NOT_FOUND=5]="NOT_FOUND",Xe[Xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xe[Xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xe[Xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xe[Xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xe[Xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xe[Xe.ABORTED=10]="ABORTED",Xe[Xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xe[Xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xe[Xe.INTERNAL=13]="INTERNAL",Xe[Xe.UNAVAILABLE=14]="UNAVAILABLE",Xe[Xe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nj(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sj=new Nr([4294967295,4294967295],0);function Xv(i){const e=nj().encode(i),n=new P_;return n.update(e),new Uint8Array(n.digest())}function Jv(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),l=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Nr([n,r],0),new Nr([l,u],0)]}class zp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Zo(`Invalid padding: ${n}`);if(r<0)throw new Zo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Zo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Zo(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Nr.fromNumber(this.ge)}ye(e,n,r){let l=e.add(n.multiply(Nr.fromNumber(r)));return l.compare(sj)===1&&(l=new Nr([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Xv(e),[r,l]=Jv(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(r,l,u);if(!this.we(f))return!1}return!0}static create(e,n,r){const l=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),f=new zp(u,l,n);return r.forEach((p=>f.insert(p))),f}insert(e){if(this.ge===0)return;const n=Xv(e),[r,l]=Jv(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(r,l,u);this.Se(f)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Zo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e,n,r,l,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=l,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const l=new Map;return l.set(e,Nc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new lh(Ce.min(),l,new Et(Qe),Ii(),Ke())}}class Nc{constructor(e,n,r,l,u){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=l,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Nc(r,n,Ke(),Ke(),Ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e,n,r,l){this.be=e,this.removedTargetIds=n,this.key=r,this.De=l}}class w1{constructor(e,n){this.targetId=e,this.Ce=n}}class S1{constructor(e,n,r=un.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=l}}class Zv{constructor(){this.ve=0,this.Fe=Wv(),this.Me=un.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ke(),n=Ke(),r=Ke();return this.Fe.forEach(((l,u)=>{switch(u){case 0:e=e.add(l);break;case 2:n=n.add(l);break;case 1:r=r.add(l);break;default:Se(38017,{changeType:u})}})),new Nc(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Wv()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,it(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class ij{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ii(),this.Je=ad(),this.He=ad(),this.Ye=new Et(Qe)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Se(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,l)=>{this.rt(l)&&n(l)}))}st(e){const n=e.targetId,r=e.Ce.count,l=this.ot(n);if(l){const u=l.target;if(Wm(u))if(r===0){const f=new be(u.path);this.et(n,f,pn.newNoDocument(f,Ce.min()))}else it(r===1,20013,{expectedCount:r});else{const f=this._t(n);if(f!==r){const p=this.ut(e),x=p?this.ct(p,e,f):1;if(x!==0){this.it(n);const g=x===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,g)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:l=0},hashCount:u=0}=n;let f,p;try{f=Ir(r).toUint8Array()}catch(x){if(x instanceof $_)return jl("Decoding the base64 bloom filter in existence filter failed ("+x.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw x}try{p=new zp(f,l,u)}catch(x){return jl(x instanceof Zo?"BloomFilter error: ":"Applying bloom filter failed: ",x),null}return p.ge===0?null:p}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let l=0;return r.forEach((u=>{const f=this.Ge.ht(),p=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;e.mightContain(p)||(this.et(n,u,null),l++)})),l}Tt(e){const n=new Map;this.ze.forEach(((u,f)=>{const p=this.ot(f);if(p){if(u.current&&Wm(p.target)){const x=new be(p.target.path);this.It(x).has(f)||this.Et(f,x)||this.et(f,x,pn.newNoDocument(x,e))}u.Be&&(n.set(f,u.ke()),u.qe())}}));let r=Ke();this.He.forEach(((u,f)=>{let p=!0;f.forEachWhile((x=>{const g=this.ot(x);return!g||g.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(r=r.add(u))})),this.je.forEach(((u,f)=>f.setReadTime(e)));const l=new lh(e,n,this.Ye,this.je,r);return this.je=Ii(),this.Je=ad(),this.He=ad(),this.Ye=new Et(Qe),l}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,n)?l.Qe(n,1):l.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Zv,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Kt(Qe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Kt(Qe),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||fe("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Zv),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function ad(){return new Et(be.comparator)}function Wv(){return new Et(be.comparator)}const rj={asc:"ASCENDING",desc:"DESCENDING"},aj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},lj={and:"AND",or:"OR"};class oj{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function np(i,e){return i.useProto3Json||Wd(e)?e:{value:e}}function Md(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function T1(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function cj(i,e){return Md(i,e.toTimestamp())}function Zs(i){return it(!!i,49232),Ce.fromTimestamp((function(n){const r=jr(n);return new gt(r.seconds,r.nanos)})(i))}function Up(i,e){return sp(i,e).canonicalString()}function sp(i,e){const n=(function(l){return new ft(["projects",l.projectId,"databases",l.database])})(i).child("documents");return e===void 0?n:n.child(e)}function N1(i){const e=ft.fromString(i);return it(I1(e),10190,{key:e.toString()}),e}function ip(i,e){return Up(i.databaseId,e.path)}function Tm(i,e){const n=N1(e);if(n.get(1)!==i.databaseId.projectId)throw new de(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new de(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new be(C1(n))}function A1(i,e){return Up(i.databaseId,e)}function uj(i){const e=N1(i);return e.length===4?ft.emptyPath():C1(e)}function rp(i){return new ft(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function C1(i){return it(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function eb(i,e,n){return{name:ip(i,e),fields:n.value.mapValue.fields}}function dj(i,e){let n;if("targetChange"in e){e.targetChange;const r=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Se(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],u=(function(g,_){return g.useProto3Json?(it(_===void 0||typeof _=="string",58123),un.fromBase64String(_||"")):(it(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),un.fromUint8Array(_||new Uint8Array))})(i,e.targetChange.resumeToken),f=e.targetChange.cause,p=f&&(function(g){const _=g.code===void 0?J.UNKNOWN:E1(g.code);return new de(_,g.message||"")})(f);n=new S1(r,l,u,p||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const l=Tm(i,r.document.name),u=Zs(r.document.updateTime),f=r.document.createTime?Zs(r.document.createTime):Ce.min(),p=new On({mapValue:{fields:r.document.fields}}),x=pn.newFoundDocument(l,u,f,p),g=r.targetIds||[],_=r.removedTargetIds||[];n=new xd(g,_,x.key,x)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const l=Tm(i,r.document),u=r.readTime?Zs(r.readTime):Ce.min(),f=pn.newNoDocument(l,u),p=r.removedTargetIds||[];n=new xd([],p,f.key,f)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const l=Tm(i,r.document),u=r.removedTargetIds||[];n=new xd([],u,l,null)}else{if(!("filter"in e))return Se(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:l=0,unchangedNames:u}=r,f=new ej(l,u),p=r.targetId;n=new w1(p,f)}}return n}function hj(i,e){let n;if(e instanceof Tc)n={update:eb(i,e.key,e.value)};else if(e instanceof ah)n={delete:ip(i,e.key)};else if(e instanceof Lr)n={update:eb(i,e.key,e.data),updateMask:_j(e.fieldMask)};else{if(!(e instanceof JR))return Se(16599,{Vt:e.type});n={verify:ip(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(u,f){const p=f.transform;if(p instanceof Od)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof pc)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof gc)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof kd)return{fieldPath:f.field.canonicalString(),increment:p.Ae};throw Se(20930,{transform:f.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(l,u){return u.updateTime!==void 0?{updateTime:cj(l,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Se(27497)})(i,e.precondition)),n}function fj(i,e){return i&&i.length>0?(it(e!==void 0,14353),i.map((n=>(function(l,u){let f=l.updateTime?Zs(l.updateTime):Zs(u);return f.isEqual(Ce.min())&&(f=Zs(u)),new YR(f,l.transformResults||[])})(n,e)))):[]}function mj(i,e){return{documents:[A1(i,e.path)]}}function pj(i,e){const n={structuredQuery:{}},r=e.path;let l;e.collectionGroup!==null?(l=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=A1(i,l);const u=(function(g){if(g.length!==0)return j1(Ts.create(g,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const f=(function(g){if(g.length!==0)return g.map((_=>(function(T){return{field:_l(T.field),direction:xj(T.dir)}})(_)))})(e.orderBy);f&&(n.structuredQuery.orderBy=f);const p=np(i,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:n,parent:l}}function gj(i){let e=uj(i.parent);const n=i.structuredQuery,r=n.from?n.from.length:0;let l=null;if(r>0){it(r===1,65062);const _=n.from[0];_.allDescendants?l=_.collectionId:e=e.child(_.collectionId)}let u=[];n.where&&(u=(function(w){const T=R1(w);return T instanceof Ts&&r1(T)?T.getFilters():[T]})(n.where));let f=[];n.orderBy&&(f=(function(w){return w.map((T=>(function(F){return new Dd(El(F.field),(function(G){switch(G){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(F.direction))})(T)))})(n.orderBy));let p=null;n.limit&&(p=(function(w){let T;return T=typeof w=="object"?w.value:w,Wd(T)?null:T})(n.limit));let x=null;n.startAt&&(x=(function(w){const T=!!w.before,M=w.values||[];return new Id(M,T)})(n.startAt));let g=null;return n.endAt&&(g=(function(w){const T=!w.before,M=w.values||[];return new Id(M,T)})(n.endAt)),MR(e,l,f,u,p,"F",x,g)}function yj(i,e){const n=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Se(28987,{purpose:l})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function R1(i){return i.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=El(n.unaryFilter.field);return Ft.create(r,"==",{doubleValue:NaN});case"IS_NULL":const l=El(n.unaryFilter.field);return Ft.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=El(n.unaryFilter.field);return Ft.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=El(n.unaryFilter.field);return Ft.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Se(61313);default:return Se(60726)}})(i):i.fieldFilter!==void 0?(function(n){return Ft.create(El(n.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Se(58110);default:return Se(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(n){return Ts.create(n.compositeFilter.filters.map((r=>R1(r))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return Se(1026)}})(n.compositeFilter.op))})(i):Se(30097,{filter:i})}function xj(i){return rj[i]}function vj(i){return aj[i]}function bj(i){return lj[i]}function _l(i){return{fieldPath:i.canonicalString()}}function El(i){return cn.fromServerFormat(i.fieldPath)}function j1(i){return i instanceof Ft?(function(n){if(n.op==="=="){if(Bv(n.value))return{unaryFilter:{field:_l(n.field),op:"IS_NAN"}};if(Uv(n.value))return{unaryFilter:{field:_l(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Bv(n.value))return{unaryFilter:{field:_l(n.field),op:"IS_NOT_NAN"}};if(Uv(n.value))return{unaryFilter:{field:_l(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_l(n.field),op:vj(n.op),value:n.value}}})(i):i instanceof Ts?(function(n){const r=n.getFilters().map((l=>j1(l)));return r.length===1?r[0]:{compositeFilter:{op:bj(n.op),filters:r}}})(i):Se(54877,{filter:i})}function _j(i){const e=[];return i.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function I1(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e,n,r,l,u=Ce.min(),f=Ce.min(),p=un.EMPTY_BYTE_STRING,x=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=l,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=p,this.expectedCount=x}withSequenceNumber(e){return new br(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ej{constructor(e){this.yt=e}}function wj(i){const e=gj({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?tp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sj{constructor(){this.Cn=new Tj}addToCollectionParentIndex(e,n){return this.Cn.add(n),te.resolve()}getCollectionParents(e,n){return te.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return te.resolve()}deleteFieldIndex(e,n){return te.resolve()}deleteAllFieldIndexes(e){return te.resolve()}createTargetIndexes(e,n){return te.resolve()}getDocumentsMatchingTarget(e,n){return te.resolve(null)}getIndexType(e,n){return te.resolve(0)}getFieldIndexes(e,n){return te.resolve([])}getNextCollectionGroupToUpdate(e){return te.resolve(null)}getMinOffset(e,n){return te.resolve(Rr.min())}getMinOffsetFromCollectionGroup(e,n){return te.resolve(Rr.min())}updateCollectionGroup(e,n,r){return te.resolve()}updateIndexEntries(e,n){return te.resolve()}}class Tj{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),l=this.index[n]||new Kt(ft.comparator),u=!l.has(r);return this.index[n]=l.add(r),u}has(e){const n=e.lastSegment(),r=e.popLast(),l=this.index[n];return l&&l.has(r)}getEntries(e){return(this.index[e]||new Kt(ft.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},D1=41943040;class Dn{static withCacheSize(e){return new Dn(e,Dn.DEFAULT_COLLECTION_PERCENTILE,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Dn.DEFAULT_COLLECTION_PERCENTILE=10,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Dn.DEFAULT=new Dn(D1,Dn.DEFAULT_COLLECTION_PERCENTILE,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Dn.DISABLED=new Dn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new kl(0)}static cr(){return new kl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nb="LruGarbageCollector",Nj=1048576;function sb([i,e],[n,r]){const l=Qe(i,n);return l===0?Qe(e,r):l}class Aj{constructor(e){this.Ir=e,this.buffer=new Kt(sb),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();sb(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Cj{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){fe(nb,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ql(n)?fe(nb,"Ignoring IndexedDB error during garbage collection: ",n):await Bl(n)}await this.Vr(3e5)}))}}class Rj{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return te.resolve(Zd.ce);const r=new Aj(n);return this.mr.forEachTarget(e,(l=>r.Ar(l.sequenceNumber))).next((()=>this.mr.pr(e,(l=>r.Ar(l))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(fe("LruGarbageCollector","Garbage collection skipped; disabled"),te.resolve(tb)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),tb):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,l,u,f,p,x,g;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),l=this.params.maximumSequenceNumbersToCollect):l=w,f=Date.now(),this.nthSequenceNumber(e,l)))).next((w=>(r=w,p=Date.now(),this.removeTargets(e,r,n)))).next((w=>(u=w,x=Date.now(),this.removeOrphanedDocuments(e,r)))).next((w=>(g=Date.now(),vl()<=Ge.DEBUG&&fe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-_}ms
	Determined least recently used ${l} in `+(p-f)+`ms
	Removed ${u} targets in `+(x-p)+`ms
	Removed ${w} documents in `+(g-x)+`ms
Total Duration: ${g-_}ms`),te.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:u,documentsRemoved:w}))))}}function jj(i,e){return new Rj(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ij{constructor(){this.changes=new Na((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,pn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?te.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dj{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oj{constructor(e,n,r,l){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=l}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((l=>(r=l,this.remoteDocumentCache.getEntry(e,n)))).next((l=>(r!==null&&rc(r.mutation,l,Kn.empty(),gt.now()),l)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Ke()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Ke()){const l=pa();return this.populateOverlays(e,l,n).next((()=>this.computeViews(e,n,l,r).next((u=>{let f=Jo();return u.forEach(((p,x)=>{f=f.insert(p,x.overlayedDocument)})),f}))))}getOverlayedDocuments(e,n){const r=pa();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Ke())))}populateOverlays(e,n,r){const l=[];return r.forEach((u=>{n.has(u)||l.push(u)})),this.documentOverlayCache.getOverlays(e,l).next((u=>{u.forEach(((f,p)=>{n.set(f,p)}))}))}computeViews(e,n,r,l){let u=Ii();const f=ic(),p=(function(){return ic()})();return n.forEach(((x,g)=>{const _=r.get(g.key);l.has(g.key)&&(_===void 0||_.mutation instanceof Lr)?u=u.insert(g.key,g):_!==void 0?(f.set(g.key,_.mutation.getFieldMask()),rc(_.mutation,g,_.mutation.getFieldMask(),gt.now())):f.set(g.key,Kn.empty())})),this.recalculateAndSaveOverlays(e,u).next((x=>(x.forEach(((g,_)=>f.set(g,_))),n.forEach(((g,_)=>p.set(g,new Dj(_,f.get(g)??null)))),p)))}recalculateAndSaveOverlays(e,n){const r=ic();let l=new Et(((f,p)=>f-p)),u=Ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((f=>{for(const p of f)p.keys().forEach((x=>{const g=n.get(x);if(g===null)return;let _=r.get(x)||Kn.empty();_=p.applyToLocalView(g,_),r.set(x,_);const w=(l.get(p.batchId)||Ke()).add(x);l=l.insert(p.batchId,w)}))})).next((()=>{const f=[],p=l.getReverseIterator();for(;p.hasNext();){const x=p.getNext(),g=x.key,_=x.value,w=m1();_.forEach((T=>{if(!u.has(T)){const M=b1(n.get(T),r.get(T));M!==null&&w.set(T,M),u=u.add(T)}})),f.push(this.documentOverlayCache.saveOverlays(e,g,w))}return te.waitFor(f)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,l){return(function(f){return be.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):c1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,l):this.getDocumentsMatchingCollectionQuery(e,n,r,l)}getNextDocuments(e,n,r,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,l).next((u=>{const f=l-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,l-u.size):te.resolve(pa());let p=dc,x=u;return f.next((g=>te.forEach(g,((_,w)=>(p<w.largestBatchId&&(p=w.largestBatchId),u.get(_)?te.resolve():this.remoteDocumentCache.getEntry(e,_).next((T=>{x=x.insert(_,T)}))))).next((()=>this.populateOverlays(e,g,u))).next((()=>this.computeViews(e,x,g,Ke()))).next((_=>({batchId:p,changes:f1(_)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new be(n)).next((r=>{let l=Jo();return r.isFoundDocument()&&(l=l.insert(r.key,r)),l}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,l){const u=n.collectionGroup;let f=Jo();return this.indexManager.getCollectionParents(e,u).next((p=>te.forEach(p,(x=>{const g=(function(w,T){return new Sc(T,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(n,x.child(u));return this.getDocumentsMatchingCollectionQuery(e,g,r,l).next((_=>{_.forEach(((w,T)=>{f=f.insert(w,T)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,n,r,l){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,u,l)))).next((f=>{u.forEach(((x,g)=>{const _=g.getKey();f.get(_)===null&&(f=f.insert(_,pn.newInvalidDocument(_)))}));let p=Jo();return f.forEach(((x,g)=>{const _=u.get(x);_!==void 0&&rc(_.mutation,g,Kn.empty(),gt.now()),sh(n,g)&&(p=p.insert(x,g))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return te.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(l){return{id:l.id,version:l.version,createTime:Zs(l.createTime)}})(n)),te.resolve()}getNamedQuery(e,n){return te.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(l){return{name:l.name,query:wj(l.bundledQuery),readTime:Zs(l.readTime)}})(n)),te.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj{constructor(){this.overlays=new Et(be.comparator),this.qr=new Map}getOverlay(e,n){return te.resolve(this.overlays.get(n))}getOverlays(e,n){const r=pa();return te.forEach(n,(l=>this.getOverlay(e,l).next((u=>{u!==null&&r.set(l,u)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((l,u)=>{this.St(e,n,u)})),te.resolve()}removeOverlaysForBatchId(e,n,r){const l=this.qr.get(r);return l!==void 0&&(l.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(r)),te.resolve()}getOverlaysForCollection(e,n,r){const l=pa(),u=n.length+1,f=new be(n.child("")),p=this.overlays.getIteratorFrom(f);for(;p.hasNext();){const x=p.getNext().value,g=x.getKey();if(!n.isPrefixOf(g.path))break;g.path.length===u&&x.largestBatchId>r&&l.set(x.getKey(),x)}return te.resolve(l)}getOverlaysForCollectionGroup(e,n,r,l){let u=new Et(((g,_)=>g-_));const f=this.overlays.getIterator();for(;f.hasNext();){const g=f.getNext().value;if(g.getKey().getCollectionGroup()===n&&g.largestBatchId>r){let _=u.get(g.largestBatchId);_===null&&(_=pa(),u=u.insert(g.largestBatchId,_)),_.set(g.getKey(),g)}}const p=pa(),x=u.getIterator();for(;x.hasNext()&&(x.getNext().value.forEach(((g,_)=>p.set(g,_))),!(p.size()>=l)););return te.resolve(p)}St(e,n,r){const l=this.overlays.get(r.key);if(l!==null){const f=this.qr.get(l.largestBatchId).delete(r.key);this.qr.set(l.largestBatchId,f)}this.overlays=this.overlays.insert(r.key,new WR(n,r));let u=this.qr.get(n);u===void 0&&(u=Ke(),this.qr.set(n,u)),this.qr.set(n,u.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj{constructor(){this.sessionToken=un.EMPTY_BYTE_STRING}getSessionToken(e){return te.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,te.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(){this.Qr=new Kt(Wt.$r),this.Ur=new Kt(Wt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Wt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new Wt(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new be(new ft([])),r=new Wt(n,e),l=new Wt(n,e+1),u=[];return this.Ur.forEachInRange([r,l],(f=>{this.Gr(f),u.push(f.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new be(new ft([])),r=new Wt(n,e),l=new Wt(n,e+1);let u=Ke();return this.Ur.forEachInRange([r,l],(f=>{u=u.add(f.key)})),u}containsKey(e){const n=new Wt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Wt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return be.comparator(e.key,n.key)||Qe(e.Yr,n.Yr)}static Kr(e,n){return Qe(e.Yr,n.Yr)||be.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pj{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Kt(Wt.$r)}checkEmpty(e){return te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,l){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new ZR(u,n,r,l);this.mutationQueue.push(f);for(const p of l)this.Zr=this.Zr.add(new Wt(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return te.resolve(f)}lookupMutationBatch(e,n){return te.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,l=this.ei(r),u=l<0?0:l;return te.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(this.mutationQueue.length===0?Dp:this.tr-1)}getAllMutationBatches(e){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Wt(n,0),l=new Wt(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([r,l],(f=>{const p=this.Xr(f.Yr);u.push(p)})),te.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Kt(Qe);return n.forEach((l=>{const u=new Wt(l,0),f=new Wt(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,f],(p=>{r=r.add(p.Yr)}))})),te.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,l=r.length+1;let u=r;be.isDocumentKey(u)||(u=u.child(""));const f=new Wt(new be(u),0);let p=new Kt(Qe);return this.Zr.forEachWhile((x=>{const g=x.key.path;return!!r.isPrefixOf(g)&&(g.length===l&&(p=p.add(x.Yr)),!0)}),f),te.resolve(this.ti(p))}ti(e){const n=[];return e.forEach((r=>{const l=this.Xr(r);l!==null&&n.push(l)})),n}removeMutationBatch(e,n){it(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return te.forEach(n.mutations,(l=>{const u=new Wt(l.key,n.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new Wt(n,0),l=this.Zr.firstAfterOrEqual(r);return te.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,te.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{constructor(e){this.ri=e,this.docs=(function(){return new Et(be.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,l=this.docs.get(r),u=l?l.size:0,f=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return te.resolve(r?r.document.mutableCopy():pn.newInvalidDocument(n))}getEntries(e,n){let r=Ii();return n.forEach((l=>{const u=this.docs.get(l);r=r.insert(l,u?u.document.mutableCopy():pn.newInvalidDocument(l))})),te.resolve(r)}getDocumentsMatchingQuery(e,n,r,l){let u=Ii();const f=n.path,p=new be(f.child("__id-9223372036854775808__")),x=this.docs.getIteratorFrom(p);for(;x.hasNext();){const{key:g,value:{document:_}}=x.getNext();if(!f.isPrefixOf(g.path))break;g.path.length>f.length+1||fR(hR(_),r)<=0||(l.has(_.key)||sh(n,_))&&(u=u.insert(_.key,_.mutableCopy()))}return te.resolve(u)}getAllFromCollectionGroup(e,n,r,l){Se(9500)}ii(e,n){return te.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new zj(this)}getSize(e){return te.resolve(this.size)}}class zj extends Ij{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,l)=>{l.isValidDocument()?n.push(this.Nr.addEntry(e,l)):this.Nr.removeEntry(r)})),te.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj{constructor(e){this.persistence=e,this.si=new Na((n=>Mp(n)),Vp),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.oi=0,this._i=new Bp,this.targetCount=0,this.ai=kl.ur()}forEachTarget(e,n){return this.si.forEach(((r,l)=>n(l))),te.resolve()}getLastRemoteSnapshotVersion(e){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return te.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),te.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new kl(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,te.resolve()}updateTargetData(e,n){return this.Pr(n),te.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,te.resolve()}removeTargets(e,n,r){let l=0;const u=[];return this.si.forEach(((f,p)=>{p.sequenceNumber<=n&&r.get(p.targetId)===null&&(this.si.delete(f),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),l++)})),te.waitFor(u).next((()=>l))}getTargetCount(e){return te.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return te.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),te.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const l=this.persistence.referenceDelegate,u=[];return l&&n.forEach((f=>{u.push(l.markPotentiallyOrphaned(e,f))})),te.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),te.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return te.resolve(r)}containsKey(e,n){return te.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{constructor(e,n){this.ui={},this.overlays={},this.ci=new Zd(0),this.li=!1,this.li=!0,this.hi=new Vj,this.referenceDelegate=e(this),this.Pi=new Uj(this),this.indexManager=new Sj,this.remoteDocumentCache=(function(l){return new Lj(l)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new Ej(n),this.Ii=new kj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Mj,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new Pj(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){fe("MemoryPersistence","Starting transaction:",e);const l=new Bj(this.ci.next());return this.referenceDelegate.Ei(),r(l).next((u=>this.referenceDelegate.di(l).next((()=>u)))).toPromise().then((u=>(l.raiseOnCommittedEvent(),u)))}Ai(e,n){return te.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class Bj extends pR{constructor(e){super(),this.currentSequenceNumber=e}}class qp{constructor(e){this.persistence=e,this.Ri=new Bp,this.Vi=null}static mi(e){return new qp(e)}get fi(){if(this.Vi)return this.Vi;throw Se(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),te.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),te.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),te.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((l=>this.fi.add(l.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((l=>{l.forEach((u=>this.fi.add(u.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.fi,(r=>{const l=be.fromPath(r);return this.gi(e,l).next((u=>{u||n.removeEntry(l,Ce.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return te.or([()=>te.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Vd{constructor(e,n){this.persistence=e,this.pi=new Na((r=>xR(r.path)),((r,l)=>r.isEqual(l))),this.garbageCollector=jj(this,n)}static mi(e,n){return new Vd(e,n)}Ei(){}di(e){return te.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((l=>r+l))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return te.forEach(this.pi,((r,l)=>this.br(e,r,l).next((u=>u?te.resolve():n(l)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const l=this.persistence.getRemoteDocumentCache(),u=l.newChangeBuffer();return l.ii(e,(f=>this.br(e,f,n).next((p=>{p||(r++,u.removeEntry(f,Ce.min()))})))).next((()=>u.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),te.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),te.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),te.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),te.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=pd(e.data.value)),n}br(e,n,r){return te.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const l=this.pi.get(n);return te.resolve(l!==void 0&&l>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(e,n,r,l){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=l}static As(e,n){let r=Ke(),l=Ke();for(const u of n.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:l=l.add(u.doc.key)}return new Hp(e,n.fromCache,r,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return ET()?8:gR(yn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,l){const u={result:null};return this.ys(e,n).next((f=>{u.result=f})).next((()=>{if(!u.result)return this.ws(e,n,l,r).next((f=>{u.result=f}))})).next((()=>{if(u.result)return;const f=new qj;return this.Ss(e,n,f).next((p=>{if(u.result=p,this.Vs)return this.bs(e,n,f,p.size)}))})).next((()=>u.result))}bs(e,n,r,l){return r.documentReadCount<this.fs?(vl()<=Ge.DEBUG&&fe("QueryEngine","SDK will not create cache indexes for query:",bl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),te.resolve()):(vl()<=Ge.DEBUG&&fe("QueryEngine","Query:",bl(n),"scans",r.documentReadCount,"local documents and returns",l,"documents as results."),r.documentReadCount>this.gs*l?(vl()<=Ge.DEBUG&&fe("QueryEngine","The SDK decides to create cache indexes for query:",bl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Js(n))):te.resolve())}ys(e,n){if(Gv(n))return te.resolve(null);let r=Js(n);return this.indexManager.getIndexType(e,r).next((l=>l===0?null:(n.limit!==null&&l===1&&(n=tp(n,null,"F"),r=Js(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((u=>{const f=Ke(...u);return this.ps.getDocuments(e,f).next((p=>this.indexManager.getMinOffset(e,r).next((x=>{const g=this.Ds(n,p);return this.Cs(n,g,f,x.readTime)?this.ys(e,tp(n,null,"F")):this.vs(e,g,n,x)}))))})))))}ws(e,n,r,l){return Gv(n)||l.isEqual(Ce.min())?te.resolve(null):this.ps.getDocuments(e,r).next((u=>{const f=this.Ds(n,u);return this.Cs(n,f,r,l)?te.resolve(null):(vl()<=Ge.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),bl(n)),this.vs(e,f,n,dR(l,dc)).next((p=>p)))}))}Ds(e,n){let r=new Kt(d1(e));return n.forEach(((l,u)=>{sh(e,u)&&(r=r.add(u))})),r}Cs(e,n,r,l){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(l)>0)}Ss(e,n,r){return vl()<=Ge.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",bl(n)),this.ps.getDocumentsMatchingQuery(e,n,Rr.min(),r)}vs(e,n,r,l){return this.ps.getDocumentsMatchingQuery(e,r,l).next((u=>(n.forEach((f=>{u=u.insert(f.key,f)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fp="LocalStore",Fj=3e8;class Gj{constructor(e,n,r,l){this.persistence=e,this.Fs=n,this.serializer=l,this.Ms=new Et(Qe),this.xs=new Na((u=>Mp(u)),Vp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Oj(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function Qj(i,e,n,r){return new Gj(i,e,n,r)}async function k1(i,e){const n=Ie(i);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let l;return n.mutationQueue.getAllMutationBatches(r).next((u=>(l=u,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((u=>{const f=[],p=[];let x=Ke();for(const g of l){f.push(g.batchId);for(const _ of g.mutations)x=x.add(_.key)}for(const g of u){p.push(g.batchId);for(const _ of g.mutations)x=x.add(_.key)}return n.localDocuments.getDocuments(r,x).next((g=>({Ls:g,removedBatchIds:f,addedBatchIds:p})))}))}))}function Kj(i,e){const n=Ie(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const l=e.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,x,g,_){const w=g.batch,T=w.keys();let M=te.resolve();return T.forEach((F=>{M=M.next((()=>_.getEntry(x,F))).next((Y=>{const G=g.docVersions.get(F);it(G!==null,48541),Y.version.compareTo(G)<0&&(w.applyToRemoteDocument(Y,g),Y.isValidDocument()&&(Y.setReadTime(g.commitVersion),_.addEntry(Y)))}))})),M.next((()=>p.mutationQueue.removeMutationBatch(x,w)))})(n,r,e,u).next((()=>u.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,l,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(p){let x=Ke();for(let g=0;g<p.mutationResults.length;++g)p.mutationResults[g].transformResults.length>0&&(x=x.add(p.batch.mutations[g].key));return x})(e)))).next((()=>n.localDocuments.getDocuments(r,l)))}))}function M1(i){const e=Ie(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function Yj(i,e){const n=Ie(i),r=e.snapshotVersion;let l=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const f=n.Ns.newChangeBuffer({trackRemovals:!0});l=n.Ms;const p=[];e.targetChanges.forEach(((_,w)=>{const T=l.get(w);if(!T)return;p.push(n.Pi.removeMatchingKeys(u,_.removedDocuments,w).next((()=>n.Pi.addMatchingKeys(u,_.addedDocuments,w))));let M=T.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(w)!==null?M=M.withResumeToken(un.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):_.resumeToken.approximateByteSize()>0&&(M=M.withResumeToken(_.resumeToken,r)),l=l.insert(w,M),(function(Y,G,ee){return Y.resumeToken.approximateByteSize()===0||G.snapshotVersion.toMicroseconds()-Y.snapshotVersion.toMicroseconds()>=Fj?!0:ee.addedDocuments.size+ee.modifiedDocuments.size+ee.removedDocuments.size>0})(T,M,_)&&p.push(n.Pi.updateTargetData(u,M))}));let x=Ii(),g=Ke();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(u,_))})),p.push($j(u,f,e.documentUpdates).next((_=>{x=_.ks,g=_.qs}))),!r.isEqual(Ce.min())){const _=n.Pi.getLastRemoteSnapshotVersion(u).next((w=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,r)));p.push(_)}return te.waitFor(p).next((()=>f.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,x,g))).next((()=>x))})).then((u=>(n.Ms=l,u)))}function $j(i,e,n){let r=Ke(),l=Ke();return n.forEach((u=>r=r.add(u))),e.getEntries(i,r).next((u=>{let f=Ii();return n.forEach(((p,x)=>{const g=u.get(p);x.isFoundDocument()!==g.isFoundDocument()&&(l=l.add(p)),x.isNoDocument()&&x.version.isEqual(Ce.min())?(e.removeEntry(p,x.readTime),f=f.insert(p,x)):!g.isValidDocument()||x.version.compareTo(g.version)>0||x.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(x),f=f.insert(p,x)):fe(Fp,"Ignoring outdated watch update for ",p,". Current version:",g.version," Watch version:",x.version)})),{ks:f,qs:l}}))}function Xj(i,e){const n=Ie(i);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Dp),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function Jj(i,e){const n=Ie(i);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let l;return n.Pi.getTargetData(r,e).next((u=>u?(l=u,te.resolve(l)):n.Pi.allocateTargetId(r).next((f=>(l=new br(e,f,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,l).next((()=>l)))))))})).then((r=>{const l=n.Ms.get(r.targetId);return(l===null||r.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function ap(i,e,n){const r=Ie(i),l=r.Ms.get(e),u=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",u,(f=>r.persistence.referenceDelegate.removeTarget(f,l)))}catch(f){if(!ql(f))throw f;fe(Fp,`Failed to update sequence numbers for target ${e}: ${f}`)}r.Ms=r.Ms.remove(e),r.xs.delete(l.target)}function ib(i,e,n){const r=Ie(i);let l=Ce.min(),u=Ke();return r.persistence.runTransaction("Execute query","readwrite",(f=>(function(x,g,_){const w=Ie(x),T=w.xs.get(_);return T!==void 0?te.resolve(w.Ms.get(T)):w.Pi.getTargetData(g,_)})(r,f,Js(e)).next((p=>{if(p)return l=p.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(f,p.targetId).next((x=>{u=x}))})).next((()=>r.Fs.getDocumentsMatchingQuery(f,e,n?l:Ce.min(),n?u:Ke()))).next((p=>(Zj(r,PR(e),p),{documents:p,Qs:u})))))}function Zj(i,e,n){let r=i.Os.get(e)||Ce.min();n.forEach(((l,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)})),i.Os.set(e,r)}class rb{constructor(){this.activeTargetIds=HR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Wj{constructor(){this.Mo=new rb,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new rb,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab="ConnectivityMonitor";class lb{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){fe(ab,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){fe(ab,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ld=null;function lp(){return ld===null?ld=(function(){return 268435456+Math.round(2147483648*Math.random())})():ld++,"0x"+ld.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nm="RestConnection",t4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class n4{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${l}`,this.Wo=this.databaseId.database===Rd?`project_id=${r}`:`project_id=${r}&database_id=${l}`}Go(e,n,r,l,u){const f=lp(),p=this.zo(e,n.toUriEncodedString());fe(Nm,`Sending RPC '${e}' ${f}:`,p,r);const x={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(x,l,u);const{host:g}=new URL(p),_=Pl(g);return this.Jo(e,p,x,r,_).then((w=>(fe(Nm,`Received RPC '${e}' ${f}: `,w),w)),(w=>{throw jl(Nm,`RPC '${e}' ${f} failed with error: `,w,"url: ",p,"request:",r),w}))}Ho(e,n,r,l,u,f){return this.Go(e,n,r,l,u)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ul})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((l,u)=>e[u]=l)),r&&r.headers.forEach(((l,u)=>e[u]=l))}zo(e,n){const r=t4[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fn="WebChannelConnection";class i4 extends n4{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,l,u){const f=lp();return new Promise(((p,x)=>{const g=new L_;g.setWithCredentials(!0),g.listenOnce(z_.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case md.NO_ERROR:const w=g.getResponseJson();fe(fn,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(w)),p(w);break;case md.TIMEOUT:fe(fn,`RPC '${e}' ${f} timed out`),x(new de(J.DEADLINE_EXCEEDED,"Request time out"));break;case md.HTTP_ERROR:const T=g.getStatus();if(fe(fn,`RPC '${e}' ${f} failed with status:`,T,"response text:",g.getResponseText()),T>0){let M=g.getResponseJson();Array.isArray(M)&&(M=M[0]);const F=M==null?void 0:M.error;if(F&&F.status&&F.message){const Y=(function(ee){const ne=ee.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(ne)>=0?ne:J.UNKNOWN})(F.status);x(new de(Y,F.message))}else x(new de(J.UNKNOWN,"Server responded with status "+g.getStatus()))}else x(new de(J.UNAVAILABLE,"Connection failed."));break;default:Se(9055,{l_:e,streamId:f,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{fe(fn,`RPC '${e}' ${f} completed.`)}}));const _=JSON.stringify(l);fe(fn,`RPC '${e}' ${f} sending request:`,l),g.send(n,"POST",_,r,15)}))}T_(e,n,r){const l=lp(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=q_(),p=B_(),x={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(x.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(x.useFetchStreams=!0),this.jo(x.initMessageHeaders,n,r),x.encodeInitMessageHeaders=!0;const _=u.join("");fe(fn,`Creating RPC '${e}' stream ${l}: ${_}`,x);const w=f.createWebChannel(_,x);this.I_(w);let T=!1,M=!1;const F=new s4({Yo:G=>{M?fe(fn,`Not sending because RPC '${e}' stream ${l} is closed:`,G):(T||(fe(fn,`Opening RPC '${e}' stream ${l} transport.`),w.open(),T=!0),fe(fn,`RPC '${e}' stream ${l} sending:`,G),w.send(G))},Zo:()=>w.close()}),Y=(G,ee,ne)=>{G.listen(ee,(le=>{try{ne(le)}catch(ue){setTimeout((()=>{throw ue}),0)}}))};return Y(w,Xo.EventType.OPEN,(()=>{M||(fe(fn,`RPC '${e}' stream ${l} transport opened.`),F.o_())})),Y(w,Xo.EventType.CLOSE,(()=>{M||(M=!0,fe(fn,`RPC '${e}' stream ${l} transport closed`),F.a_(),this.E_(w))})),Y(w,Xo.EventType.ERROR,(G=>{M||(M=!0,jl(fn,`RPC '${e}' stream ${l} transport errored. Name:`,G.name,"Message:",G.message),F.a_(new de(J.UNAVAILABLE,"The operation could not be completed")))})),Y(w,Xo.EventType.MESSAGE,(G=>{var ee;if(!M){const ne=G.data[0];it(!!ne,16349);const le=ne,ue=(le==null?void 0:le.error)||((ee=le[0])==null?void 0:ee.error);if(ue){fe(fn,`RPC '${e}' stream ${l} received error:`,ue);const De=ue.status;let se=(function(I){const k=Ht[I];if(k!==void 0)return E1(k)})(De),C=ue.message;se===void 0&&(se=J.INTERNAL,C="Unknown error status: "+De+" with message "+ue.message),M=!0,F.a_(new de(se,C)),w.close()}else fe(fn,`RPC '${e}' stream ${l} received:`,ne),F.u_(ne)}})),Y(p,U_.STAT_EVENT,(G=>{G.stat===Km.PROXY?fe(fn,`RPC '${e}' stream ${l} detected buffering proxy`):G.stat===Km.NOPROXY&&fe(fn,`RPC '${e}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{F.__()}),0),F}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Am(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oh(i){return new oj(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(e,n,r=1e3,l=1.5,u=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=l,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),l=Math.max(0,n-r);l>0&&fe("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ob="PersistentStream";class P1{constructor(e,n,r,l,u,f,p,x){this.Mi=e,this.S_=r,this.b_=l,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=p,this.listener=x,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new V1(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===J.RESOURCE_EXHAUSTED?(ji(n.toString()),ji("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,l])=>{this.D_===n&&this.G_(r,l)}),(r=>{e((()=>{const l=new de(J.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(l)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{r((()=>this.z_(l)))})),this.stream.onMessage((l=>{r((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return fe(ob,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(fe(ob,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class r4 extends P1{constructor(e,n,r,l,u,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,l,f),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=dj(this.serializer,e),r=(function(u){if(!("targetChange"in u))return Ce.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?Ce.min():f.readTime?Zs(f.readTime):Ce.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=rp(this.serializer),n.addTarget=(function(u,f){let p;const x=f.target;if(p=Wm(x)?{documents:mj(u,x)}:{query:pj(u,x).ft},p.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){p.resumeToken=T1(u,f.resumeToken);const g=np(u,f.expectedCount);g!==null&&(p.expectedCount=g)}else if(f.snapshotVersion.compareTo(Ce.min())>0){p.readTime=Md(u,f.snapshotVersion.toTimestamp());const g=np(u,f.expectedCount);g!==null&&(p.expectedCount=g)}return p})(this.serializer,e);const r=yj(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=rp(this.serializer),n.removeTarget=e,this.q_(n)}}class a4 extends P1{constructor(e,n,r,l,u,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,l,f),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return it(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,it(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){it(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=fj(e.writeResults,e.commitTime),r=Zs(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=rp(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>hj(this.serializer,r)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{}class o4 extends l4{constructor(e,n,r,l){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new de(J.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Go(e,sp(n,r),l,u,f))).catch((u=>{throw u.name==="FirebaseError"?(u.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new de(J.UNKNOWN,u.toString())}))}Ho(e,n,r,l,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,p])=>this.connection.Ho(e,sp(n,r),l,f,p,u))).catch((f=>{throw f.name==="FirebaseError"?(f.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new de(J.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class c4{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ji(n),this.aa=!1):fe("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sa="RemoteStore";class u4{constructor(e,n,r,l,u){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((f=>{r.enqueueAndForget((async()=>{Aa(this)&&(fe(Sa,"Restarting streams for network reachability change."),await(async function(x){const g=Ie(x);g.Ea.add(4),await Ac(g),g.Ra.set("Unknown"),g.Ea.delete(4),await ch(g)})(this))}))})),this.Ra=new c4(r,l)}}async function ch(i){if(Aa(i))for(const e of i.da)await e(!0)}async function Ac(i){for(const e of i.da)await e(!1)}function L1(i,e){const n=Ie(i);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Yp(n)?Kp(n):Hl(n).O_()&&Qp(n,e))}function Gp(i,e){const n=Ie(i),r=Hl(n);n.Ia.delete(e),r.O_()&&z1(n,e),n.Ia.size===0&&(r.O_()?r.L_():Aa(n)&&n.Ra.set("Unknown"))}function Qp(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Hl(i).Y_(e)}function z1(i,e){i.Va.Ue(e),Hl(i).Z_(e)}function Kp(i){i.Va=new ij({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),Hl(i).start(),i.Ra.ua()}function Yp(i){return Aa(i)&&!Hl(i).x_()&&i.Ia.size>0}function Aa(i){return Ie(i).Ea.size===0}function U1(i){i.Va=void 0}async function d4(i){i.Ra.set("Online")}async function h4(i){i.Ia.forEach(((e,n)=>{Qp(i,e)}))}async function f4(i,e){U1(i),Yp(i)?(i.Ra.ha(e),Kp(i)):i.Ra.set("Unknown")}async function m4(i,e,n){if(i.Ra.set("Online"),e instanceof S1&&e.state===2&&e.cause)try{await(async function(l,u){const f=u.cause;for(const p of u.targetIds)l.Ia.has(p)&&(await l.remoteSyncer.rejectListen(p,f),l.Ia.delete(p),l.Va.removeTarget(p))})(i,e)}catch(r){fe(Sa,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Pd(i,r)}else if(e instanceof xd?i.Va.Ze(e):e instanceof w1?i.Va.st(e):i.Va.tt(e),!n.isEqual(Ce.min()))try{const r=await M1(i.localStore);n.compareTo(r)>=0&&await(function(u,f){const p=u.Va.Tt(f);return p.targetChanges.forEach(((x,g)=>{if(x.resumeToken.approximateByteSize()>0){const _=u.Ia.get(g);_&&u.Ia.set(g,_.withResumeToken(x.resumeToken,f))}})),p.targetMismatches.forEach(((x,g)=>{const _=u.Ia.get(x);if(!_)return;u.Ia.set(x,_.withResumeToken(un.EMPTY_BYTE_STRING,_.snapshotVersion)),z1(u,x);const w=new br(_.target,x,g,_.sequenceNumber);Qp(u,w)})),u.remoteSyncer.applyRemoteEvent(p)})(i,n)}catch(r){fe(Sa,"Failed to raise snapshot:",r),await Pd(i,r)}}async function Pd(i,e,n){if(!ql(e))throw e;i.Ea.add(1),await Ac(i),i.Ra.set("Offline"),n||(n=()=>M1(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{fe(Sa,"Retrying IndexedDB access"),await n(),i.Ea.delete(1),await ch(i)}))}function B1(i,e){return e().catch((n=>Pd(i,n,e)))}async function uh(i){const e=Ie(i),n=Or(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Dp;for(;p4(e);)try{const l=await Xj(e.localStore,r);if(l===null){e.Ta.length===0&&n.L_();break}r=l.batchId,g4(e,l)}catch(l){await Pd(e,l)}q1(e)&&H1(e)}function p4(i){return Aa(i)&&i.Ta.length<10}function g4(i,e){i.Ta.push(e);const n=Or(i);n.O_()&&n.X_&&n.ea(e.mutations)}function q1(i){return Aa(i)&&!Or(i).x_()&&i.Ta.length>0}function H1(i){Or(i).start()}async function y4(i){Or(i).ra()}async function x4(i){const e=Or(i);for(const n of i.Ta)e.ea(n.mutations)}async function v4(i,e,n){const r=i.Ta.shift(),l=Lp.from(r,e,n);await B1(i,(()=>i.remoteSyncer.applySuccessfulWrite(l))),await uh(i)}async function b4(i,e){e&&Or(i).X_&&await(async function(r,l){if((function(f){return tj(f)&&f!==J.ABORTED})(l.code)){const u=r.Ta.shift();Or(r).B_(),await B1(r,(()=>r.remoteSyncer.rejectFailedWrite(u.batchId,l))),await uh(r)}})(i,e),q1(i)&&H1(i)}async function cb(i,e){const n=Ie(i);n.asyncQueue.verifyOperationInProgress(),fe(Sa,"RemoteStore received new credentials");const r=Aa(n);n.Ea.add(3),await Ac(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await ch(n)}async function _4(i,e){const n=Ie(i);e?(n.Ea.delete(2),await ch(n)):e||(n.Ea.add(2),await Ac(n),n.Ra.set("Unknown"))}function Hl(i){return i.ma||(i.ma=(function(n,r,l){const u=Ie(n);return u.sa(),new r4(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(i.datastore,i.asyncQueue,{Xo:d4.bind(null,i),t_:h4.bind(null,i),r_:f4.bind(null,i),H_:m4.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),Yp(i)?Kp(i):i.Ra.set("Unknown")):(await i.ma.stop(),U1(i))}))),i.ma}function Or(i){return i.fa||(i.fa=(function(n,r,l){const u=Ie(n);return u.sa(),new a4(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:y4.bind(null,i),r_:b4.bind(null,i),ta:x4.bind(null,i),na:v4.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await uh(i)):(await i.fa.stop(),i.Ta.length>0&&(fe(Sa,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(e,n,r,l,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=l,this.removalCallback=u,this.deferred=new Ai,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,l,u){const f=Date.now()+r,p=new $p(e,n,f,l,u);return p.start(r),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Xp(i,e){if(ji("AsyncQueue",`${e}: ${i}`),ql(i))return new de(J.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{static emptySet(e){return new Al(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||be.comparator(n.key,r.key):(n,r)=>be.comparator(n.key,r.key),this.keyedMap=Jo(),this.sortedSet=new Et(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Al)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,u=r.getNext().key;if(!l.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Al;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub{constructor(){this.ga=new Et(be.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Se(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class Ml{constructor(e,n,r,l,u,f,p,x,g){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=l,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=p,this.excludesMetadataChanges=x,this.hasCachedResults=g}static fromInitialDocuments(e,n,r,l,u){const f=[];return n.forEach((p=>{f.push({type:0,doc:p})})),new Ml(e,n,Al.emptySet(n),f,r,l,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&nh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==r[l].type||!n[l].doc.isEqual(r[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E4{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class w4{constructor(){this.queries=db(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const l=Ie(n),u=l.queries;l.queries=db(),u.forEach(((f,p)=>{for(const x of p.Sa)x.onError(r)}))})(this,new de(J.ABORTED,"Firestore shutting down"))}}function db(){return new Na((i=>u1(i)),nh)}async function Jp(i,e){const n=Ie(i);let r=3;const l=e.query;let u=n.queries.get(l);u?!u.ba()&&e.Da()&&(r=2):(u=new E4,r=e.Da()?0:1);try{switch(r){case 0:u.wa=await n.onListen(l,!0);break;case 1:u.wa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(f){const p=Xp(f,`Initialization of query '${bl(e.query)}' failed`);return void e.onError(p)}n.queries.set(l,u),u.Sa.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&Wp(n)}async function Zp(i,e){const n=Ie(i),r=e.query;let l=3;const u=n.queries.get(r);if(u){const f=u.Sa.indexOf(e);f>=0&&(u.Sa.splice(f,1),u.Sa.length===0?l=e.Da()?0:1:!u.ba()&&e.Da()&&(l=2))}switch(l){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function S4(i,e){const n=Ie(i);let r=!1;for(const l of e){const u=l.query,f=n.queries.get(u);if(f){for(const p of f.Sa)p.Fa(l)&&(r=!0);f.wa=l}}r&&Wp(n)}function T4(i,e,n){const r=Ie(i),l=r.queries.get(e);if(l)for(const u of l.Sa)u.onError(n);r.queries.delete(e)}function Wp(i){i.Ca.forEach((e=>{e.next()}))}var op,hb;(hb=op||(op={})).Ma="default",hb.Cache="cache";class eg{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const l of e.docChanges)l.type!==3&&r.push(l);e=new Ml(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ml.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==op.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(e){this.key=e}}class G1{constructor(e){this.key=e}}class N4{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ke(),this.mutatedKeys=Ke(),this.eu=d1(e),this.tu=new Al(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new ub,l=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,f=l,p=!1;const x=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,g=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((_,w)=>{const T=l.get(_),M=sh(this.query,w)?w:null,F=!!T&&this.mutatedKeys.has(T.key),Y=!!M&&(M.hasLocalMutations||this.mutatedKeys.has(M.key)&&M.hasCommittedMutations);let G=!1;T&&M?T.data.isEqual(M.data)?F!==Y&&(r.track({type:3,doc:M}),G=!0):this.su(T,M)||(r.track({type:2,doc:M}),G=!0,(x&&this.eu(M,x)>0||g&&this.eu(M,g)<0)&&(p=!0)):!T&&M?(r.track({type:0,doc:M}),G=!0):T&&!M&&(r.track({type:1,doc:T}),G=!0,(x||g)&&(p=!0)),G&&(M?(f=f.add(M),u=Y?u.add(_):u.delete(_)):(f=f.delete(_),u=u.delete(_)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const _=this.query.limitType==="F"?f.last():f.first();f=f.delete(_.key),u=u.delete(_.key),r.track({type:1,doc:_})}return{tu:f,iu:r,Cs:p,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,l){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort(((_,w)=>(function(M,F){const Y=G=>{switch(G){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se(20277,{Rt:G})}};return Y(M)-Y(F)})(_.type,w.type)||this.eu(_.doc,w.doc))),this.ou(r),l=l??!1;const p=n&&!l?this._u():[],x=this.Xa.size===0&&this.current&&!l?1:0,g=x!==this.Za;return this.Za=x,f.length!==0||g?{snapshot:new Ml(this.query,e.tu,u,f,e.mutatedKeys,x===0,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new ub,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ke(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new G1(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new F1(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=Ke();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ml.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const tg="SyncEngine";class A4{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class C4{constructor(e){this.key=e,this.hu=!1}}class R4{constructor(e,n,r,l,u,f){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=l,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new Na((p=>u1(p)),nh),this.Iu=new Map,this.Eu=new Set,this.du=new Et(be.comparator),this.Au=new Map,this.Ru=new Bp,this.Vu={},this.mu=new Map,this.fu=kl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function j4(i,e,n=!0){const r=J1(i);let l;const u=r.Tu.get(e);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),l=u.view.lu()):l=await Q1(r,e,n,!0),l}async function I4(i,e){const n=J1(i);await Q1(n,e,!0,!1)}async function Q1(i,e,n,r){const l=await Jj(i.localStore,Js(e)),u=l.targetId,f=i.sharedClientState.addLocalQueryTarget(u,n);let p;return r&&(p=await D4(i,e,u,f==="current",l.resumeToken)),i.isPrimaryClient&&n&&L1(i.remoteStore,l),p}async function D4(i,e,n,r,l){i.pu=(w,T,M)=>(async function(Y,G,ee,ne){let le=G.view.ru(ee);le.Cs&&(le=await ib(Y.localStore,G.query,!1).then((({documents:C})=>G.view.ru(C,le))));const ue=ne&&ne.targetChanges.get(G.targetId),De=ne&&ne.targetMismatches.get(G.targetId)!=null,se=G.view.applyChanges(le,Y.isPrimaryClient,ue,De);return mb(Y,G.targetId,se.au),se.snapshot})(i,w,T,M);const u=await ib(i.localStore,e,!0),f=new N4(e,u.Qs),p=f.ru(u.documents),x=Nc.createSynthesizedTargetChangeForCurrentChange(n,r&&i.onlineState!=="Offline",l),g=f.applyChanges(p,i.isPrimaryClient,x);mb(i,n,g.au);const _=new A4(e,n,f);return i.Tu.set(e,_),i.Iu.has(n)?i.Iu.get(n).push(e):i.Iu.set(n,[e]),g.snapshot}async function O4(i,e,n){const r=Ie(i),l=r.Tu.get(e),u=r.Iu.get(l.targetId);if(u.length>1)return r.Iu.set(l.targetId,u.filter((f=>!nh(f,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(l.targetId),r.sharedClientState.isActiveQueryTarget(l.targetId)||await ap(r.localStore,l.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(l.targetId),n&&Gp(r.remoteStore,l.targetId),cp(r,l.targetId)})).catch(Bl)):(cp(r,l.targetId),await ap(r.localStore,l.targetId,!0))}async function k4(i,e){const n=Ie(i),r=n.Tu.get(e),l=n.Iu.get(r.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Gp(n.remoteStore,r.targetId))}async function M4(i,e,n){const r=q4(i);try{const l=await(function(f,p){const x=Ie(f),g=gt.now(),_=p.reduce(((M,F)=>M.add(F.key)),Ke());let w,T;return x.persistence.runTransaction("Locally write mutations","readwrite",(M=>{let F=Ii(),Y=Ke();return x.Ns.getEntries(M,_).next((G=>{F=G,F.forEach(((ee,ne)=>{ne.isValidDocument()||(Y=Y.add(ee))}))})).next((()=>x.localDocuments.getOverlayedDocuments(M,F))).next((G=>{w=G;const ee=[];for(const ne of p){const le=XR(ne,w.get(ne.key).overlayedDocument);le!=null&&ee.push(new Lr(ne.key,le,n1(le.value.mapValue),_n.exists(!0)))}return x.mutationQueue.addMutationBatch(M,g,ee,p)})).next((G=>{T=G;const ee=G.applyToLocalDocumentSet(w,Y);return x.documentOverlayCache.saveOverlays(M,G.batchId,ee)}))})).then((()=>({batchId:T.batchId,changes:f1(w)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(l.batchId),(function(f,p,x){let g=f.Vu[f.currentUser.toKey()];g||(g=new Et(Qe)),g=g.insert(p,x),f.Vu[f.currentUser.toKey()]=g})(r,l.batchId,n),await Cc(r,l.changes),await uh(r.remoteStore)}catch(l){const u=Xp(l,"Failed to persist write");n.reject(u)}}async function K1(i,e){const n=Ie(i);try{const r=await Yj(n.localStore,e);e.targetChanges.forEach(((l,u)=>{const f=n.Au.get(u);f&&(it(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?f.hu=!0:l.modifiedDocuments.size>0?it(f.hu,14607):l.removedDocuments.size>0&&(it(f.hu,42227),f.hu=!1))})),await Cc(n,r,e)}catch(r){await Bl(r)}}function fb(i,e,n){const r=Ie(i);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const l=[];r.Tu.forEach(((u,f)=>{const p=f.view.va(e);p.snapshot&&l.push(p.snapshot)})),(function(f,p){const x=Ie(f);x.onlineState=p;let g=!1;x.queries.forEach(((_,w)=>{for(const T of w.Sa)T.va(p)&&(g=!0)})),g&&Wp(x)})(r.eventManager,e),l.length&&r.Pu.H_(l),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function V4(i,e,n){const r=Ie(i);r.sharedClientState.updateQueryState(e,"rejected",n);const l=r.Au.get(e),u=l&&l.key;if(u){let f=new Et(be.comparator);f=f.insert(u,pn.newNoDocument(u,Ce.min()));const p=Ke().add(u),x=new lh(Ce.min(),new Map,new Et(Qe),f,p);await K1(r,x),r.du=r.du.remove(u),r.Au.delete(e),ng(r)}else await ap(r.localStore,e,!1).then((()=>cp(r,e,n))).catch(Bl)}async function P4(i,e){const n=Ie(i),r=e.batch.batchId;try{const l=await Kj(n.localStore,e);$1(n,r,null),Y1(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Cc(n,l)}catch(l){await Bl(l)}}async function L4(i,e,n){const r=Ie(i);try{const l=await(function(f,p){const x=Ie(f);return x.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let _;return x.mutationQueue.lookupMutationBatch(g,p).next((w=>(it(w!==null,37113),_=w.keys(),x.mutationQueue.removeMutationBatch(g,w)))).next((()=>x.mutationQueue.performConsistencyCheck(g))).next((()=>x.documentOverlayCache.removeOverlaysForBatchId(g,_,p))).next((()=>x.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,_))).next((()=>x.localDocuments.getDocuments(g,_)))}))})(r.localStore,e);$1(r,e,n),Y1(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Cc(r,l)}catch(l){await Bl(l)}}function Y1(i,e){(i.mu.get(e)||[]).forEach((n=>{n.resolve()})),i.mu.delete(e)}function $1(i,e,n){const r=Ie(i);let l=r.Vu[r.currentUser.toKey()];if(l){const u=l.get(e);u&&(n?u.reject(n):u.resolve(),l=l.remove(e)),r.Vu[r.currentUser.toKey()]=l}}function cp(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const r of i.Iu.get(e))i.Tu.delete(r),n&&i.Pu.yu(r,n);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((r=>{i.Ru.containsKey(r)||X1(i,r)}))}function X1(i,e){i.Eu.delete(e.path.canonicalString());const n=i.du.get(e);n!==null&&(Gp(i.remoteStore,n),i.du=i.du.remove(e),i.Au.delete(n),ng(i))}function mb(i,e,n){for(const r of n)r instanceof F1?(i.Ru.addReference(r.key,e),z4(i,r)):r instanceof G1?(fe(tg,"Document no longer in limbo: "+r.key),i.Ru.removeReference(r.key,e),i.Ru.containsKey(r.key)||X1(i,r.key)):Se(19791,{wu:r})}function z4(i,e){const n=e.key,r=n.path.canonicalString();i.du.get(n)||i.Eu.has(r)||(fe(tg,"New document in limbo: "+n),i.Eu.add(r),ng(i))}function ng(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const n=new be(ft.fromString(e)),r=i.fu.next();i.Au.set(r,new C4(n)),i.du=i.du.insert(n,r),L1(i.remoteStore,new br(Js(th(n.path)),r,"TargetPurposeLimboResolution",Zd.ce))}}async function Cc(i,e,n){const r=Ie(i),l=[],u=[],f=[];r.Tu.isEmpty()||(r.Tu.forEach(((p,x)=>{f.push(r.pu(x,e,n).then((g=>{var _;if((g||n)&&r.isPrimaryClient){const w=g?!g.fromCache:(_=n==null?void 0:n.targetChanges.get(x.targetId))==null?void 0:_.current;r.sharedClientState.updateQueryState(x.targetId,w?"current":"not-current")}if(g){l.push(g);const w=Hp.As(x.targetId,g);u.push(w)}})))})),await Promise.all(f),r.Pu.H_(l),await(async function(x,g){const _=Ie(x);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>te.forEach(g,(T=>te.forEach(T.Es,(M=>_.persistence.referenceDelegate.addReference(w,T.targetId,M))).next((()=>te.forEach(T.ds,(M=>_.persistence.referenceDelegate.removeReference(w,T.targetId,M)))))))))}catch(w){if(!ql(w))throw w;fe(Fp,"Failed to update sequence numbers: "+w)}for(const w of g){const T=w.targetId;if(!w.fromCache){const M=_.Ms.get(T),F=M.snapshotVersion,Y=M.withLastLimboFreeSnapshotVersion(F);_.Ms=_.Ms.insert(T,Y)}}})(r.localStore,u))}async function U4(i,e){const n=Ie(i);if(!n.currentUser.isEqual(e)){fe(tg,"User change. New user:",e.toKey());const r=await k1(n.localStore,e);n.currentUser=e,(function(u,f){u.mu.forEach((p=>{p.forEach((x=>{x.reject(new de(J.CANCELLED,f))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Cc(n,r.Ls)}}function B4(i,e){const n=Ie(i),r=n.Au.get(e);if(r&&r.hu)return Ke().add(r.key);{let l=Ke();const u=n.Iu.get(e);if(!u)return l;for(const f of u){const p=n.Tu.get(f);l=l.unionWith(p.view.nu)}return l}}function J1(i){const e=Ie(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=K1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=B4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=V4.bind(null,e),e.Pu.H_=S4.bind(null,e.eventManager),e.Pu.yu=T4.bind(null,e.eventManager),e}function q4(i){const e=Ie(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=P4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=L4.bind(null,e),e}class Ld{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=oh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Qj(this.persistence,new Hj,e.initialUser,this.serializer)}Cu(e){return new O1(qp.mi,this.serializer)}Du(e){return new Wj}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ld.provider={build:()=>new Ld};class H4 extends Ld{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){it(this.persistence.referenceDelegate instanceof Vd,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Cj(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Dn.withCacheSize(this.cacheSizeBytes):Dn.DEFAULT;return new O1((r=>Vd.mi(r,n)),this.serializer)}}class up{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>fb(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=U4.bind(null,this.syncEngine),await _4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new w4})()}createDatastore(e){const n=oh(e.databaseInfo.databaseId),r=(function(u){return new i4(u)})(e.databaseInfo);return(function(u,f,p,x){return new o4(u,f,p,x)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,l,u,f,p){return new u4(r,l,u,f,p)})(this.localStore,this.datastore,e.asyncQueue,(n=>fb(this.syncEngine,n,0)),(function(){return lb.v()?new lb:new e4})())}createSyncEngine(e,n){return(function(l,u,f,p,x,g,_){const w=new R4(l,u,f,p,x,g);return _&&(w.gu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(l){const u=Ie(l);fe(Sa,"RemoteStore shutting down."),u.Ea.add(5),await Ac(u),u.Aa.shutdown(),u.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}up.provider={build:()=>new up};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ji("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kr="FirestoreClient";class F4{constructor(e,n,r,l,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=l,this.user=mn.UNAUTHENTICATED,this.clientId=Ip.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,(async f=>{fe(kr,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(r,(f=>(fe(kr,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ai;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Xp(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Cm(i,e){i.asyncQueue.verifyOperationInProgress(),fe(kr,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let r=n.initialUser;i.setCredentialChangeListener((async l=>{r.isEqual(l)||(await k1(e.localStore,l),r=l)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function pb(i,e){i.asyncQueue.verifyOperationInProgress();const n=await G4(i);fe(kr,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener((r=>cb(e.remoteStore,r))),i.setAppCheckTokenChangeListener(((r,l)=>cb(e.remoteStore,l))),i._onlineComponents=e}async function G4(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){fe(kr,"Using user provided OfflineComponentProvider");try{await Cm(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(l){return l.name==="FirebaseError"?l.code===J.FAILED_PRECONDITION||l.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(n))throw n;jl("Error using user provided cache. Falling back to memory cache: "+n),await Cm(i,new Ld)}}else fe(kr,"Using default OfflineComponentProvider"),await Cm(i,new H4(void 0));return i._offlineComponents}async function Z1(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(fe(kr,"Using user provided OnlineComponentProvider"),await pb(i,i._uninitializedComponentsProvider._online)):(fe(kr,"Using default OnlineComponentProvider"),await pb(i,new up))),i._onlineComponents}function Q4(i){return Z1(i).then((e=>e.syncEngine))}async function zd(i){const e=await Z1(i),n=e.eventManager;return n.onListen=j4.bind(null,e.syncEngine),n.onUnlisten=O4.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=I4.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=k4.bind(null,e.syncEngine),n}function K4(i,e,n={}){const r=new Ai;return i.asyncQueue.enqueueAndForget((async()=>(function(u,f,p,x,g){const _=new sg({next:T=>{_.Nu(),f.enqueueAndForget((()=>Zp(u,w)));const M=T.docs.has(p);!M&&T.fromCache?g.reject(new de(J.UNAVAILABLE,"Failed to get document because the client is offline.")):M&&T.fromCache&&x&&x.source==="server"?g.reject(new de(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(T)},error:T=>g.reject(T)}),w=new eg(th(p.path),_,{includeMetadataChanges:!0,qa:!0});return Jp(u,w)})(await zd(i),i.asyncQueue,e,n,r))),r.promise}function Y4(i,e,n={}){const r=new Ai;return i.asyncQueue.enqueueAndForget((async()=>(function(u,f,p,x,g){const _=new sg({next:T=>{_.Nu(),f.enqueueAndForget((()=>Zp(u,w))),T.fromCache&&x.source==="server"?g.reject(new de(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(T)},error:T=>g.reject(T)}),w=new eg(p,_,{includeMetadataChanges:!0,qa:!0});return Jp(u,w)})(await zd(i),i.asyncQueue,e,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W1(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gb=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE="firestore.googleapis.com",yb=!0;class xb{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new de(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=eE,this.ssl=yb}else this.host=e.host,this.ssl=e.ssl??yb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=D1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Nj)throw new de(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}uR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=W1(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new de(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new de(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new de(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,l){return r.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class dh{constructor(e,n,r,l){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new eR;switch(r.type){case"firstParty":return new iR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new de(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=gb.get(n);r&&(fe("ComponentProvider","Removing Datastore"),gb.delete(n),r.terminate())})(this),Promise.resolve()}}function $4(i,e,n,r={}){var g;i=bn(i,dh);const l=Pl(e),u=i._getSettings(),f={...u,emulatorOptions:i._getEmulatorOptions()},p=`${e}:${n}`;l&&($b(`https://${p}`),Xb("Firestore",!0)),u.host!==eE&&u.host!==p&&jl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const x={...u,host:p,ssl:l,emulatorOptions:r};if(!va(x,f)&&(i._setSettings(x),r.mockUserToken)){let _,w;if(typeof r.mockUserToken=="string")_=r.mockUserToken,w=mn.MOCK_USER;else{_=fT(r.mockUserToken,(g=i._app)==null?void 0:g.options.projectId);const T=r.mockUserToken.sub||r.mockUserToken.user_id;if(!T)throw new de(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new mn(T)}i._authCredentials=new tR(new F_(_,w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ca(this.firestore,e,this._query)}}class Nt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ar(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Nt(this.firestore,e,this._key)}toJSON(){return{type:Nt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(wc(n,Nt._jsonSchema))return new Nt(e,r||null,new be(ft.fromString(n.referencePath)))}}Nt._jsonSchemaVersion="firestore/documentReference/1.0",Nt._jsonSchema={type:Gt("string",Nt._jsonSchemaVersion),referencePath:Gt("string")};class Ar extends Ca{constructor(e,n,r){super(e,n,th(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Nt(this.firestore,null,new be(e))}withConverter(e){return new Ar(this.firestore,e,this._path)}}function We(i,e,...n){if(i=Ot(i),G_("collection","path",e),i instanceof dh){const r=ft.fromString(e,...n);return Iv(r),new Ar(i,null,r)}{if(!(i instanceof Nt||i instanceof Ar))throw new de(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(ft.fromString(e,...n));return Iv(r),new Ar(i.firestore,null,r)}}function gn(i,e,...n){if(i=Ot(i),arguments.length===1&&(e=Ip.newId()),G_("doc","path",e),i instanceof dh){const r=ft.fromString(e,...n);return jv(r),new Nt(i,null,new be(r))}{if(!(i instanceof Nt||i instanceof Ar))throw new de(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(ft.fromString(e,...n));return jv(r),new Nt(i.firestore,i instanceof Ar?i.converter:null,new be(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vb="AsyncQueue";class bb{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new V1(this,"async_queue_retry"),this._c=()=>{const r=Am();r&&fe(vb,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Am();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Am();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Ai;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ql(e))throw e;fe(vb,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,ji("INTERNAL UNHANDLED ERROR: ",_b(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const l=$p.createAndSchedule(this,e,n,r,(u=>this.hc(u)));return this.tc.push(l),l}uc(){this.nc&&Se(47125,{Pc:_b(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function _b(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eb(i){return(function(n,r){if(typeof n!="object"||n===null)return!1;const l=n;for(const u of r)if(u in l&&typeof l[u]=="function")return!0;return!1})(i,["next","error","complete"])}class ni extends dh{constructor(e,n,r,l){super(e,n,r,l),this.type="firestore",this._queue=new bb,this._persistenceKey=(l==null?void 0:l.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new bb(e),this._firestoreClient=void 0,await e}}}function X4(i,e){const n=typeof i=="object"?i:_p(),r=typeof i=="string"?i:Rd,l=vp(n,"firestore").getImmediate({identifier:r});if(!l._initialized){const u=dT("firestore");u&&$4(l,...u)}return l}function Rc(i){if(i._terminated)throw new de(J.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||J4(i),i._firestoreClient}function J4(i){var r,l,u;const e=i._freezeSettings(),n=(function(p,x,g,_){return new _R(p,x,g,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,W1(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)})(i._databaseId,((r=i._app)==null?void 0:r.options.appId)||"",i._persistenceKey,e);i._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((u=e.localCache)!=null&&u._onlineComponentProvider)&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new F4(i._authCredentials,i._appCheckCredentials,i._queue,n,i._componentsProvider&&(function(p){const x=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(x),_online:x}})(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new cs(un.fromBase64String(e))}catch(n){throw new de(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new cs(un.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:cs._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(wc(e,cs._jsonSchema))return cs.fromBase64String(e.bytes)}}cs._jsonSchemaVersion="firestore/bytes/1.0",cs._jsonSchema={type:Gt("string",cs._jsonSchemaVersion),bytes:Gt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new de(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new cn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function Z4(){return new Fl($m)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new de(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new de(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Qe(this._lat,e._lat)||Qe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ws._jsonSchemaVersion}}static fromJSON(e){if(wc(e,Ws._jsonSchema))return new Ws(e.latitude,e.longitude)}}Ws._jsonSchemaVersion="firestore/geoPoint/1.0",Ws._jsonSchema={type:Gt("string",Ws._jsonSchemaVersion),latitude:Gt("number"),longitude:Gt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,l){if(r.length!==l.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==l[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ei._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(wc(e,ei._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new ei(e.vectorValues);throw new de(J.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ei._jsonSchemaVersion="firestore/vectorValue/1.0",ei._jsonSchema={type:Gt("string",ei._jsonSchemaVersion),vectorValues:Gt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W4=/^__.*__$/;class eI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Lr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Tc(e,this.data,n,this.fieldTransforms)}}class tE{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Lr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function nE(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se(40011,{Ac:i})}}class rg{constructor(e,n,r,l,u,f){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=l,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new rg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var l;const n=(l=this.path)==null?void 0:l.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var l;const n=(l=this.path)==null?void 0:l.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Ud(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(nE(this.Ac)&&W4.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class tI{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||oh(e)}Cc(e,n,r,l=!1){return new rg({Ac:e,methodName:n,Dc:r,path:cn.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function jc(i){const e=i._freezeSettings(),n=oh(i._databaseId);return new tI(i._databaseId,!!e.ignoreUndefinedProperties,n)}function ag(i,e,n,r,l,u={}){const f=i.Cc(u.merge||u.mergeFields?2:0,e,n,l);lg("Data must be an object, but it was:",f,r);const p=rE(r,f);let x,g;if(u.merge)x=new Kn(f.fieldMask),g=f.fieldTransforms;else if(u.mergeFields){const _=[];for(const w of u.mergeFields){const T=dp(e,w,n);if(!f.contains(T))throw new de(J.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);lE(_,T)||_.push(T)}x=new Kn(_),g=f.fieldTransforms.filter((w=>x.covers(w.field)))}else x=null,g=f.fieldTransforms;return new eI(new On(p),x,g)}class hh extends ig{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof hh}}function sE(i,e,n,r){const l=i.Cc(1,e,n);lg("Data must be an object, but it was:",l,r);const u=[],f=On.empty();Pr(r,((x,g)=>{const _=og(e,x,n);g=Ot(g);const w=l.yc(_);if(g instanceof hh)u.push(_);else{const T=Ic(g,w);T!=null&&(u.push(_),f.set(_,T))}}));const p=new Kn(u);return new tE(f,p,l.fieldTransforms)}function iE(i,e,n,r,l,u){const f=i.Cc(1,e,n),p=[dp(e,r,n)],x=[l];if(u.length%2!=0)throw new de(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<u.length;T+=2)p.push(dp(e,u[T])),x.push(u[T+1]);const g=[],_=On.empty();for(let T=p.length-1;T>=0;--T)if(!lE(g,p[T])){const M=p[T];let F=x[T];F=Ot(F);const Y=f.yc(M);if(F instanceof hh)g.push(M);else{const G=Ic(F,Y);G!=null&&(g.push(M),_.set(M,G))}}const w=new Kn(g);return new tE(_,w,f.fieldTransforms)}function nI(i,e,n,r=!1){return Ic(n,i.Cc(r?4:3,e))}function Ic(i,e){if(aE(i=Ot(i)))return lg("Unsupported field value:",e,i),rE(i,e);if(i instanceof ig)return(function(r,l){if(!nE(l.Ac))throw l.Sc(`${r._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(l);u&&l.fieldTransforms.push(u)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,l){const u=[];let f=0;for(const p of r){let x=Ic(p,l.wc(f));x==null&&(x={nullValue:"NULL_VALUE"}),u.push(x),f++}return{arrayValue:{values:u}}})(i,e)}return(function(r,l){if((r=Ot(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return FR(l.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=gt.fromDate(r);return{timestampValue:Md(l.serializer,u)}}if(r instanceof gt){const u=new gt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Md(l.serializer,u)}}if(r instanceof Ws)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof cs)return{bytesValue:T1(l.serializer,r._byteString)};if(r instanceof Nt){const u=l.databaseId,f=r.firestore._databaseId;if(!f.isEqual(u))throw l.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Up(r.firestore._databaseId||l.databaseId,r._key.path)}}if(r instanceof ei)return(function(f,p){return{mapValue:{fields:{[e1]:{stringValue:t1},[jd]:{arrayValue:{values:f.toArray().map((g=>{if(typeof g!="number")throw p.Sc("VectorValues must only contain numeric values.");return Pp(p.serializer,g)}))}}}}}})(r,l);throw l.Sc(`Unsupported field value: ${Jd(r)}`)})(i,e)}function rE(i,e){const n={};return Y_(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Pr(i,((r,l)=>{const u=Ic(l,e.mc(r));u!=null&&(n[r]=u)})),{mapValue:{fields:n}}}function aE(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof gt||i instanceof Ws||i instanceof cs||i instanceof Nt||i instanceof ig||i instanceof ei)}function lg(i,e,n){if(!aE(n)||!Q_(n)){const r=Jd(n);throw r==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+r)}}function dp(i,e,n){if((e=Ot(e))instanceof Fl)return e._internalPath;if(typeof e=="string")return og(i,e);throw Ud("Field path arguments must be of type string or ",i,!1,void 0,n)}const sI=new RegExp("[~\\*/\\[\\]]");function og(i,e,n){if(e.search(sI)>=0)throw Ud(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new Fl(...e.split("."))._internalPath}catch{throw Ud(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Ud(i,e,n,r,l){const u=r&&!r.isEmpty(),f=l!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let x="";return(u||f)&&(x+=" (found",u&&(x+=` in field ${r}`),f&&(x+=` in document ${l}`),x+=")"),new de(J.INVALID_ARGUMENT,p+i+x)}function lE(i,e){return i.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(e,n,r,l,u){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=l,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Nt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new iI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(cg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class iI extends oE{data(){return super.data()}}function cg(i,e){return typeof e=="string"?og(i,e):e instanceof Fl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cE(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new de(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ug{}class rI extends ug{}function en(i,e,...n){let r=[];e instanceof ug&&r.push(e),r=r.concat(n),(function(u){const f=u.filter((x=>x instanceof dg)).length,p=u.filter((x=>x instanceof fh)).length;if(f>1||f>0&&p>0)throw new de(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const l of r)i=l._apply(i);return i}class fh extends rI{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new fh(e,n,r)}_apply(e){const n=this._parse(e);return uE(e._query,n),new Ca(e.firestore,e.converter,ep(e._query,n))}_parse(e){const n=jc(e.firestore);return(function(u,f,p,x,g,_,w){let T;if(g.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new de(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){Sb(w,_);const F=[];for(const Y of w)F.push(wb(x,u,Y));T={arrayValue:{values:F}}}else T=wb(x,u,w)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||Sb(w,_),T=nI(p,f,w,_==="in"||_==="not-in");return Ft.create(g,_,T)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function us(i,e,n){const r=e,l=cg("where",i);return fh._create(l,r,n)}class dg extends ug{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new dg(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Ts.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(l,u){let f=l;const p=u.getFlattenedFilters();for(const x of p)uE(f,x),f=ep(f,x)})(e._query,n),new Ca(e.firestore,e.converter,ep(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function wb(i,e,n){if(typeof(n=Ot(n))=="string"){if(n==="")throw new de(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!c1(e)&&n.indexOf("/")!==-1)throw new de(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ft.fromString(n));if(!be.isDocumentKey(r))throw new de(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return zv(i,new be(r))}if(n instanceof Nt)return zv(i,n._key);throw new de(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Jd(n)}.`)}function Sb(i,e){if(!Array.isArray(i)||i.length===0)throw new de(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function uE(i,e){const n=(function(l,u){for(const f of l)for(const p of f.getFlattenedFilters())if(u.indexOf(p.op)>=0)return p.op;return null})(i.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new de(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new de(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class aI{convertValue(e,n="none"){switch(Dr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ir(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Se(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Pr(e,((l,u)=>{r[l]=this.convertValue(u,n)})),r}convertVectorValue(e){var r,l,u;const n=(u=(l=(r=e.fields)==null?void 0:r[jd].arrayValue)==null?void 0:l.values)==null?void 0:u.map((f=>Dt(f.doubleValue)));return new ei(n)}convertGeoPoint(e){return new Ws(Dt(e.latitude),Dt(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=eh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(hc(e));default:return null}}convertTimestamp(e){const n=jr(e);return new gt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ft.fromString(e);it(I1(r),9688,{name:e});const l=new fc(r.get(1),r.get(3)),u=new be(r.popFirst(5));return l.isEqual(n)||ji(`Document ${u} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hg(i,e,n){let r;return r=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,r}class Wo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ga extends oE{constructor(e,n,r,l,u,f){super(e,n,r,l,f),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new vd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(cg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new de(J.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ga._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ga._jsonSchemaVersion="firestore/documentSnapshot/1.0",ga._jsonSchema={type:Gt("string",ga._jsonSchemaVersion),bundleSource:Gt("string","DocumentSnapshot"),bundleName:Gt("string"),bundle:Gt("string")};class vd extends ga{data(e={}){return super.data(e)}}class ya{constructor(e,n,r,l){this._firestore=e,this._userDataWriter=n,this._snapshot=l,this.metadata=new Wo(l.hasPendingWrites,l.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new vd(this._firestore,this._userDataWriter,r.key,r,new Wo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new de(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(l,u){if(l._snapshot.oldDocs.isEmpty()){let f=0;return l._snapshot.docChanges.map((p=>{const x=new vd(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Wo(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);return p.doc,{type:"added",doc:x,oldIndex:-1,newIndex:f++}}))}{let f=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((p=>u||p.type!==3)).map((p=>{const x=new vd(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Wo(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);let g=-1,_=-1;return p.type!==0&&(g=f.indexOf(p.doc.key),f=f.delete(p.doc.key)),p.type!==1&&(f=f.add(p.doc),_=f.indexOf(p.doc.key)),{type:lI(p.type),doc:x,oldIndex:g,newIndex:_}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new de(J.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ya._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ip.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],l=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),r.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),l.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function lI(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Se(61501,{type:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dE(i){i=bn(i,Nt);const e=bn(i.firestore,ni);return K4(Rc(e),i._key).then((n=>hE(e,i,n)))}ya._jsonSchemaVersion="firestore/querySnapshot/1.0",ya._jsonSchema={type:Gt("string",ya._jsonSchemaVersion),bundleSource:Gt("string","QuerySnapshot"),bundleName:Gt("string"),bundle:Gt("string")};class fg extends aI{constructor(e){super(),this.firestore=e}convertBytes(e){return new cs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Nt(this.firestore,null,n)}}function Yn(i){i=bn(i,Ca);const e=bn(i.firestore,ni),n=Rc(e),r=new fg(e);return cE(i._query),Y4(n,i._query).then((l=>new ya(e,r,i,l)))}function Vl(i,e,n){i=bn(i,Nt);const r=bn(i.firestore,ni),l=hg(i.converter,e,n);return Dc(r,[ag(jc(r),"setDoc",i._key,l,i.converter!==null,n).toMutation(i._key,_n.none())])}function _r(i,e,n,...r){i=bn(i,Nt);const l=bn(i.firestore,ni),u=jc(l);let f;return f=typeof(e=Ot(e))=="string"||e instanceof Fl?iE(u,"updateDoc",i._key,e,n,r):sE(u,"updateDoc",i._key,e),Dc(l,[f.toMutation(i._key,_n.exists(!0))])}function oI(i){return Dc(bn(i.firestore,ni),[new ah(i._key,_n.none())])}function mh(i,e){const n=bn(i.firestore,ni),r=gn(i),l=hg(i.converter,e);return Dc(n,[ag(jc(i.firestore),"addDoc",r._key,l,i.converter!==null,{}).toMutation(r._key,_n.exists(!1))]).then((()=>r))}function Er(i,...e){var x,g,_;i=Ot(i);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Eb(e[r])||(n=e[r++]);const l={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Eb(e[r])){const w=e[r];e[r]=(x=w.next)==null?void 0:x.bind(w),e[r+1]=(g=w.error)==null?void 0:g.bind(w),e[r+2]=(_=w.complete)==null?void 0:_.bind(w)}let u,f,p;if(i instanceof Nt)f=bn(i.firestore,ni),p=th(i._key.path),u={next:w=>{e[r]&&e[r](hE(f,i,w))},error:e[r+1],complete:e[r+2]};else{const w=bn(i,Ca);f=bn(w.firestore,ni),p=w._query;const T=new fg(f);u={next:M=>{e[r]&&e[r](new ya(f,T,w,M))},error:e[r+1],complete:e[r+2]},cE(i._query)}return(function(T,M,F,Y){const G=new sg(Y),ee=new eg(M,G,F);return T.asyncQueue.enqueueAndForget((async()=>Jp(await zd(T),ee))),()=>{G.Nu(),T.asyncQueue.enqueueAndForget((async()=>Zp(await zd(T),ee)))}})(Rc(f),p,l,u)}function Dc(i,e){return(function(r,l){const u=new Ai;return r.asyncQueue.enqueueAndForget((async()=>M4(await Q4(r),l,u))),u.promise})(Rc(i),e)}function hE(i,e,n){const r=n.docs.get(e._key),l=new fg(i);return new ga(i,l,e._key,r,new Wo(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=jc(e)}set(e,n,r){this._verifyNotCommitted();const l=Rm(e,this._firestore),u=hg(l.converter,n,r),f=ag(this._dataReader,"WriteBatch.set",l._key,u,l.converter!==null,r);return this._mutations.push(f.toMutation(l._key,_n.none())),this}update(e,n,r,...l){this._verifyNotCommitted();const u=Rm(e,this._firestore);let f;return f=typeof(n=Ot(n))=="string"||n instanceof Fl?iE(this._dataReader,"WriteBatch.update",u._key,n,r,l):sE(this._dataReader,"WriteBatch.update",u._key,n),this._mutations.push(f.toMutation(u._key,_n.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Rm(e,this._firestore);return this._mutations=this._mutations.concat(new ah(n._key,_n.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new de(J.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Rm(i,e){if((i=Ot(i)).firestore!==e)throw new de(J.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fE(i){return Rc(i=bn(i,ni)),new cI(i,(e=>Dc(i,e)))}(function(e,n=!0){(function(l){Ul=l})(Ll),Rl(new ba("firestore",((r,{instanceIdentifier:l,options:u})=>{const f=r.getProvider("app").getImmediate(),p=new ni(new nR(r.getProvider("auth-internal")),new rR(f,r.getProvider("app-check-internal")),(function(g,_){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new de(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fc(g.options.projectId,_)})(f,l),f);return u={useFetchStreams:n,...u},p._setSettings(u),p}),"PUBLIC").setMultipleInstances(!0)),Tr(Av,Cv,e),Tr(Av,Cv,"esm2020")})();const mE={apiKey:"AIzaSyCgWznEbkgfYE7T09XYV-U4LwaA33Q24Vs",authDomain:"tros-one.firebaseapp.com",projectId:"tros-one",storageBucket:"tros-one.firebasestorage.app",messagingSenderId:"125000751012",appId:"1:125000751012:android:94b1d3f1f37ad2c661d331"},Tb=localStorage.getItem("tros_firebase_config");let pE=mE,mg=!1;mE.apiKey!=="YOUR_API_KEY_HERE"&&(mg=!0);if(Tb)try{const i=JSON.parse(Tb);i.apiKey&&i.apiKey!=="YOUR_API_KEY_HERE"&&(pE=i,mg=!0)}catch(i){console.error("Failed to parse stored firebase config",i)}const gE=bp(pE),ac=V_(gE),Ae=X4(gE),uI=async(i,e)=>{let n=null;try{const r=_p().options;n=bp(r,"SecondaryApp");const l=V_(n),f=(await Gm(l,i,e)).user.uid;return await T_(l),f}catch(r){throw r}finally{n&&await RN(n)}},dI=i=>{try{const e=JSON.parse(i);if(!e.apiKey)throw new Error("Invalid Config");return localStorage.setItem("tros_firebase_config",JSON.stringify(e)),window.location.reload(),!0}catch{return!1}},hI=()=>{localStorage.removeItem("tros_firebase_config"),window.location.reload()};var ke=(i=>(i.ADMIN="Administrator",i.VENDOR="Vendor",i))(ke||{}),Fe=(i=>(i.DASHBOARD="DASHBOARD",i.PRODUCTS="PRODUCTS",i.VENDORS="VENDORS",i.SHOPS="SHOPS",i.ORDERS="ORDERS",i.SCANNER="SCANNER",i.SETTINGS="SETTINGS",i.NOTIFICATIONS="NOTIFICATIONS",i.MORE="MORE",i))(Fe||{});const yE=Z.createContext(void 0),Ra=()=>{const i=Z.useContext(yE);if(!i)throw new Error("useAuth must be used within an AuthProvider");return i},fI=({children:i})=>{const[e,n]=Z.useState(null),[r,l]=Z.useState(null),[u,f]=Z.useState(!0),[p,x]=Z.useState(null);Z.useEffect(()=>qA(ac,async w=>{var T,M;if(n(w),x(null),w){const F=((T=w.email)==null?void 0:T.toLowerCase())==="dineshkodali.uk@gmail.com",Y=(M=w.email)!=null&&M.includes("admin")||F?ke.ADMIN:ke.VENDOR;try{const G=gn(Ae,"users",w.uid),ee=await dE(G);if(ee.exists()){const ne=ee.data();F&&ne.role!==ke.ADMIN?(console.log("Upgrading user to Admin..."),await Vl(G,{...ne,role:ke.ADMIN},{merge:!0}),l(ke.ADMIN)):l(ne.role)}else console.log("User profile missing. Attempting self-heal..."),await Vl(G,{email:w.email,role:Y,createdAt:new Date().toISOString(),uid:w.uid}),l(Y),console.log("User profile restored.")}catch(G){console.warn("Auth Sync Warning:",G.code),l(Y),G.code==="permission-denied"?x("Database permissions blocked access. Ensure Security Rules are published."):G.code==="unavailable"&&x("Network issue: Running in offline mode.")}}else l(null);f(!1)}),[]);const g=async()=>{await T_(ac)};return c.jsx(yE.Provider,{value:{currentUser:e,userRole:r,loading:u,dbError:p,logout:g},children:!u&&i})},xE=Z.createContext(void 0),si=()=>{const i=Z.useContext(xE);if(!i)throw new Error("useNotification must be used within a NotificationProvider");return i},mI=({children:i})=>{const[e,n]=Z.useState([]),[r,l]=Z.useState([]),u=Z.useCallback((x,g="info")=>{const w={id:Date.now().toString(),message:x,type:g};n(T=>[w,...T])},[]),f=Z.useCallback((x,g="success")=>{const _=Date.now().toString()+Math.random(),w={id:_,message:x,type:g};l(T=>[...T,w]),setTimeout(()=>{l(T=>T.filter(M=>M.id!==_))},2e3),u(x,g)},[u]),p=Z.useCallback(x=>{n(g=>g.filter(_=>_.id!==x))},[]);return c.jsx(xE.Provider,{value:{notifications:e,sonarQueue:r,addNotification:u,triggerSonar:f,clearNotification:p},children:i})},pI=()=>{const[i,e]=Z.useState(""),[n,r]=Z.useState(""),[l,u]=Z.useState(!1),[f,p]=Z.useState(!1),[x,g]=Z.useState(null),_=async T=>{T.preventDefault(),p(!0),g(null);try{if(l){const M=await Gm(ac,i,n),F=i.toLowerCase().includes("admin")||i.toLowerCase()==="dineshkodali.uk@gmail.com"?"Administrator":"Vendor";try{await Vl(gn(Ae,"users",M.user.uid),{email:M.user.email,role:F,createdAt:new Date().toISOString()})}catch{console.warn("Profile creation skipped.")}}else await zA(ac,i,n)}catch(M){if(console.error(M),!l&&(i==="dineshkodali.uk@gmail.com"||i==="vendor@tros.one")&&(M.code==="auth/invalid-credential"||M.code==="auth/user-not-found"))try{const Y=await Gm(ac,i,n),G=i.toLowerCase().includes("admin")||i.toLowerCase()==="dineshkodali.uk@gmail.com"?"Administrator":"Vendor";await Vl(gn(Ae,"users",Y.user.uid),{email:Y.user.email,role:G,createdAt:new Date().toISOString()}),p(!1);return}catch(Y){if(console.warn("Demo auto-creation failed",Y.code),Y.code==="auth/email-already-in-use"){g("This demo account already exists but the password provided is incorrect. Please enter the correct password manually."),r(""),p(!1);return}}M.code==="auth/invalid-credential"||M.code==="auth/user-not-found"||M.code==="auth/wrong-password"?g("Invalid email or password. If you haven't created an account yet, please switch to 'Sign Up' or use a Demo button."):M.code==="auth/email-already-in-use"?g("This email is already registered. Please sign in instead."):M.code==="auth/network-request-failed"?g("Network error. Please check your internet connection."):g(M.message||"An error occurred. Please try again.")}finally{p(!1)}},w=T=>{T==="admin"?(e("dineshkodali.uk@gmail.com"),r("password123")):(e("vendor@tros.one"),r("password123")),g(null),u(!1)};return c.jsxs("div",{className:"min-h-screen bg-[#f0fdf4] flex flex-col items-center justify-center p-4 relative overflow-hidden",children:[c.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden -z-10",children:[c.jsx("div",{className:"absolute top-[-20%] left-[-10%] w-[50%] h-[50%] rounded-full bg-emerald-300/20 blur-[100px]"}),c.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] rounded-full bg-lime-300/20 blur-[120px]"})]}),c.jsxs("button",{onClick:hI,className:"absolute top-4 right-4 p-2 text-emerald-800 hover:bg-emerald-100 rounded-full transition-colors flex items-center gap-2 text-xs font-medium",children:[c.jsx(km,{size:16})," Reset DB"]}),c.jsxs("div",{className:"w-full max-w-md bg-white/80 backdrop-blur-xl rounded-[2rem] shadow-2xl overflow-hidden animate-slide-up border border-white",children:[c.jsxs("div",{className:"bg-[#064e3b] p-10 text-center relative overflow-hidden",children:[c.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-10"}),c.jsxs("div",{className:"relative z-10",children:[c.jsx("div",{className:"w-16 h-16 bg-white/10 rounded-2xl mx-auto mb-4 flex items-center justify-center backdrop-blur-sm border border-white/20",children:c.jsx("span",{className:"text-3xl font-bold text-white",children:"T"})}),c.jsx("h1",{className:"text-3xl font-bold text-white mb-1 tracking-tight",children:"TROS One"}),c.jsx("p",{className:"text-emerald-200/80 text-sm font-medium",children:"Business Operations Platform"})]})]}),c.jsxs("div",{className:"p-8",children:[c.jsxs("form",{onSubmit:_,className:"space-y-6",children:[c.jsxs("div",{className:"text-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-[#064e3b]",children:l?"Create Account":"Welcome Back"}),c.jsx("p",{className:"text-gray-500 text-sm mt-1",children:l?"Sign up to manage your inventory":"Sign in to access your dashboard"})]}),x&&c.jsxs("div",{className:"bg-red-50 border border-red-100 text-red-600 p-3 rounded-xl flex items-start gap-2 text-xs animate-fade-in text-left",children:[c.jsx(Dm,{size:16,className:"shrink-0 mt-0.5"}),c.jsx("div",{className:"font-medium",children:x})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"relative group",children:[c.jsx(Gd,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 group-focus-within:text-emerald-600 transition-colors"}),c.jsx("input",{type:"email",required:!0,value:i,onChange:T=>e(T.target.value),className:"w-full pl-12 pr-4 py-4 bg-gray-50 border-none rounded-xl text-sm font-medium focus:outline-none focus:ring-2 focus:ring-emerald-500/20 focus:bg-white transition-all placeholder:text-gray-400",placeholder:"Email Address"})]}),c.jsxs("div",{className:"relative group",children:[c.jsx(Vb,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 group-focus-within:text-emerald-600 transition-colors"}),c.jsx("input",{type:"password",required:!0,value:n,onChange:T=>r(T.target.value),className:"w-full pl-12 pr-4 py-4 bg-gray-50 border-none rounded-xl text-sm font-medium focus:outline-none focus:ring-2 focus:ring-emerald-500/20 focus:bg-white transition-all placeholder:text-gray-400",placeholder:"Password",minLength:6})]})]}),c.jsx("button",{type:"submit",disabled:f,className:"w-full bg-[#064e3b] hover:bg-[#065f46] text-white font-bold py-4 rounded-xl transition-all shadow-lg shadow-emerald-900/20 flex items-center justify-center space-x-2 transform active:scale-[0.98]",children:f?c.jsx("span",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):c.jsxs(c.Fragment,{children:[c.jsx("span",{children:l?"Create Account":"Sign In"}),l?c.jsx(JS,{className:"w-5 h-5"}):c.jsx(qd,{className:"w-5 h-5"})]})})]}),c.jsx("div",{className:"mt-6 text-center",children:c.jsx("button",{type:"button",onClick:()=>{u(!l),g(null)},className:"text-sm text-emerald-700 font-bold hover:underline",children:l?"Already have an account? Sign In":"Need an account? Sign Up"})}),c.jsx("div",{className:"mt-8 pt-6 border-t border-gray-100",children:c.jsxs("div",{className:"flex justify-center gap-3",children:[c.jsxs("button",{onClick:()=>w("admin"),className:"px-4 py-2 bg-emerald-50 text-emerald-800 rounded-lg text-xs font-bold hover:bg-emerald-100 transition-colors flex items-center gap-1",children:[c.jsx(Mm,{size:14})," Admin Demo"]}),c.jsxs("button",{onClick:()=>w("vendor"),className:"px-4 py-2 bg-emerald-50 text-emerald-800 rounded-lg text-xs font-bold hover:bg-emerald-100 transition-colors flex items-center gap-1",children:[c.jsx(IS,{size:14})," Vendor Demo"]})]})})]})]})]})},jm=({onNavigate:i})=>{const{userRole:e,currentUser:n}=Ra(),[r,l]=Z.useState({products:0,orders:0,shops:0,lowStock:0,revenue:0,activeVendors:0});Z.useEffect(()=>{const p=[];let x=en(We(Ae,"products"));e===ke.VENDOR&&(n!=null&&n.email)&&(x=en(We(Ae,"products"),us("vendor","==",n.email))),p.push(Er(x,_=>{const w=_.docs.filter(T=>(T.data().stock||0)<=(T.data().minStock||10)).length;l(T=>({...T,products:_.size,lowStock:w}))}));let g=en(We(Ae,"orders"));return p.push(Er(g,_=>{const T=_.docs.map(M=>M.data()).reduce((M,F)=>M+(F.totalValue||0),0);l(M=>({...M,orders:_.size,revenue:T}))})),e===ke.ADMIN&&(p.push(Er(We(Ae,"vendors"),_=>{l(w=>({...w,activeVendors:_.size}))})),p.push(Er(We(Ae,"shops"),_=>{l(w=>({...w,shops:_.size}))}))),()=>p.forEach(_=>_())},[e,n]);const u=({title:p,value:x,icon:g,color:_,subtext:w,target:T})=>c.jsxs("div",{onClick:()=>i&&T&&i(T),className:"bg-white rounded-2xl p-6 shadow-sm border border-emerald-100 flex items-start justify-between hover:shadow-lg hover:border-emerald-300 hover:-translate-y-1 transition-all cursor-pointer group",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-gray-500 mb-1 group-hover:text-emerald-600 transition-colors",children:p}),c.jsx("h3",{className:"text-3xl font-bold text-[#064e3b]",children:x}),w&&c.jsx("p",{className:"text-xs text-emerald-600 mt-2 font-medium",children:w})]}),c.jsx("div",{className:`p-3 rounded-xl ${_} shadow-sm group-hover:scale-110 transition-transform`,children:c.jsx(g,{size:24,className:"text-white"})})]}),f=({title:p,desc:x,icon:g,onClick:_})=>c.jsxs("div",{onClick:_,className:"group cursor-pointer bg-white rounded-2xl p-6 shadow-sm border border-emerald-100 hover:border-[#064e3b] hover:shadow-lg transition-all relative overflow-hidden",children:[c.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-emerald-50 rounded-bl-full -mr-4 -mt-4 transition-transform group-hover:scale-110"}),c.jsxs("div",{className:"relative z-10",children:[c.jsx("div",{className:"w-12 h-12 bg-emerald-100 rounded-xl flex items-center justify-center text-[#064e3b] mb-4 group-hover:bg-[#064e3b] group-hover:text-white transition-colors",children:c.jsx(g,{size:24})}),c.jsx("h4",{className:"text-lg font-bold text-gray-900 mb-1 group-hover:text-[#064e3b]",children:p}),c.jsx("p",{className:"text-sm text-gray-500 mb-4",children:x}),c.jsxs("div",{className:"flex items-center text-sm font-bold text-[#064e3b] opacity-0 group-hover:opacity-100 transform translate-y-2 group-hover:translate-y-0 transition-all",children:["Access Module ",c.jsx(qd,{size:16,className:"ml-2"})]})]})]});return c.jsxs("div",{className:"space-y-8 animate-in fade-in pb-24 md:pb-10 px-2 md:px-0",children:[c.jsxs("div",{className:"flex justify-between items-end",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-[#064e3b]",children:"Dashboard"}),c.jsx("p",{className:"text-gray-500 mt-1",children:"Overview of your business performance"})]}),c.jsx("div",{className:"text-right hidden md:block",children:c.jsx("p",{className:"text-sm font-bold text-[#064e3b]",children:new Date().toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"})})})]}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6",children:[c.jsx(u,{title:"Total Revenue",value:`$${(r.revenue/1e3).toFixed(1)}k`,icon:Ob,color:"bg-[#064e3b]",subtext:"+12% from last month",target:Fe.ORDERS}),c.jsx(u,{title:"Active Orders",value:r.orders,icon:vr,color:"bg-emerald-600",subtext:"Pending processing",target:Fe.ORDERS}),c.jsx(u,{title:"Inventory Items",value:r.products,icon:Ti,color:"bg-emerald-500",subtext:`${r.lowStock} Low Stock Alerts`,target:Fe.PRODUCTS}),c.jsx(u,{title:e===ke.ADMIN?"Total Vendors":"My Shops",value:e===ke.ADMIN?r.activeVendors:r.shops,icon:e===ke.ADMIN?lc:ws,color:"bg-emerald-400",subtext:"Active & Verified",target:e===ke.ADMIN?Fe.VENDORS:Fe.SHOPS})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-[#064e3b] mb-4",children:"Quick Actions"}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 md:gap-6",children:[c.jsx(f,{title:"Manage Orders",desc:"View pending orders, approve requests, and track shipments.",icon:vr,onClick:()=>i&&i(Fe.ORDERS)}),c.jsx(f,{title:"Inventory Control",desc:"Update stock levels, add products, and manage categories.",icon:Ti,onClick:()=>i&&i(Fe.PRODUCTS)}),c.jsx(f,{title:"Barcode Scanner",desc:"Quickly scan items for stock checks or sales.",icon:cd,onClick:()=>i&&i(Fe.SCANNER)}),e===ke.ADMIN&&c.jsx(f,{title:"Vendor Management",desc:"Onboard new vendors and manage partnerships.",icon:lc,onClick:()=>i&&i(Fe.VENDORS)}),e===ke.ADMIN&&c.jsx(f,{title:"Shop Configurations",desc:"Manage store locations and assignments.",icon:ws,onClick:()=>i&&i(Fe.SHOPS)}),c.jsx(f,{title:"Reports & Analytics",desc:"View detailed sales reports and growth trends.",icon:KS,onClick:()=>{}})]})]}),c.jsxs("div",{className:"bg-white rounded-2xl border border-emerald-100 shadow-sm p-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h3",{className:"font-bold text-[#064e3b]",children:"System Alerts"}),c.jsx("button",{className:"text-sm text-emerald-600 font-bold hover:underline",children:"View All"})]}),c.jsxs("div",{className:"space-y-4",children:[r.lowStock>0&&c.jsxs("div",{className:"flex items-center justify-between p-4 bg-red-50 rounded-xl border border-red-100 cursor-pointer hover:bg-red-100 transition-colors",onClick:()=>i&&i(Fe.PRODUCTS),children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"p-2 bg-red-100 text-red-600 rounded-lg",children:c.jsx(Qd,{size:20})}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-red-900",children:"Low Stock Warning"}),c.jsxs("p",{className:"text-sm text-red-700",children:[r.lowStock," items are below safety levels."]})]})]}),c.jsx(fp,{size:20,className:"text-red-400"})]}),c.jsxs("div",{className:"flex items-center justify-between p-4 bg-emerald-50 rounded-xl border border-emerald-100",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"p-2 bg-emerald-100 text-[#064e3b] rounded-lg",children:c.jsx(Db,{size:20})}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-[#064e3b]",children:"System Operational"}),c.jsx("p",{className:"text-sm text-emerald-700",children:"All services are running smoothly."})]})]}),c.jsx("div",{className:"h-2 w-2 rounded-full bg-emerald-500 animate-pulse"})]})]})]})]})};var Ys=Rb();const gI=({isOpen:i,title:e,message:n,onConfirm:r,onCancel:l,confirmText:u="Continue",cancelText:f="Cancel",isDestructive:p=!0})=>i?c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-background/80 backdrop-blur-sm animate-fade-in",children:c.jsxs("div",{className:"bg-card text-card-foreground rounded-lg shadow-lg w-full max-w-md border animate-zoom-in p-6",role:"alertdialog",children:[c.jsxs("div",{className:"flex flex-col space-y-2 text-center sm:text-left",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[p&&c.jsx(Qd,{className:"h-5 w-5 text-destructive"}),c.jsx("h3",{className:"text-lg font-semibold",children:e})]}),c.jsx("p",{className:"text-sm text-muted-foreground",children:n})]}),c.jsxs("div",{className:"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2 mt-6",children:[c.jsx("button",{onClick:l,className:"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2 mt-2 sm:mt-0",children:f}),c.jsx("button",{onClick:r,className:`inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 h-10 px-4 py-2 ${p?"bg-destructive text-destructive-foreground hover:bg-destructive/90":"bg-primary text-primary-foreground hover:bg-primary/90"}`,children:u})]})]})}):null,vE=({isOpen:i,onClose:e,sourceId:n,sourceName:r,type:l})=>{const{triggerSonar:u}=si(),[f,p]=Z.useState([]),[x,g]=Z.useState(null),[_,w]=Z.useState(!0),[T,M]=Z.useState("");Z.useEffect(()=>{if(!i)return;w(!0),(async()=>{try{if(l==="SHOP_TO_VENDOR"){const ee=await Yn(We(Ae,"vendors"));p(ee.docs.map(le=>({id:le.id,...le.data()})));const ne=await Yn(en(We(Ae,"shops"),us(Z4(),"==",n)));if(!ne.empty){const le=ne.docs[0].data();g(le.assignedVendorId||null)}}else if(l==="VENDOR_TO_SHOP"){const ee=await Yn(We(Ae,"shops"));p(ee.docs.map(ue=>({id:ue.id,...ue.data()})));const ne=en(We(Ae,"shops"),us("assignedVendorId","==",n)),le=await Yn(ne);g(le.docs.map(ue=>ue.id))}}catch(ee){console.error(ee)}finally{w(!1)}})()},[i,n,l]);const F=async G=>{try{if(l==="SHOP_TO_VENDOR"){const ee=gn(Ae,"shops",n),ne=f.find(le=>le.id===G);x===G?(await _r(ee,{assignedVendorId:null,assignedVendorName:null}),g(null),u("Vendor unassigned")):(await _r(ee,{assignedVendorId:G,assignedVendorName:(ne==null?void 0:ne.name)||"Unknown"}),g(G),u(`Assigned to ${ne==null?void 0:ne.name}`))}else{const ee=x||[],ne=ee.includes(G),le=gn(Ae,"shops",G);ne?(await _r(le,{assignedVendorId:null,assignedVendorName:null}),g(ee.filter(ue=>ue!==G)),u("Shop unassigned")):(await _r(le,{assignedVendorId:n,assignedVendorName:r}),g([...ee,G]),u("Shop assigned"))}}catch(ee){console.error(ee),u("Action failed","error")}};if(!i)return null;const Y=f.filter(G=>{var ee;return(ee=G.name)==null?void 0:ee.toLowerCase().includes(T.toLowerCase())});return Ys.createPortal(c.jsx("div",{className:"fixed inset-0 z-[80] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",children:c.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-2xl flex flex-col max-h-[80vh] animate-zoom-in",children:[c.jsxs("div",{className:"p-5 border-b flex justify-between items-center bg-gray-50 rounded-t-xl",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-lg text-gray-900",children:l==="SHOP_TO_VENDOR"?"Assign Vendor":"Assign Shops"}),c.jsx("p",{className:"text-xs text-gray-500",children:l==="SHOP_TO_VENDOR"?`Select the vendor for ${r}`:`Select shops managed by ${r}`})]}),c.jsx("button",{onClick:e,children:c.jsx(kn,{size:20,className:"text-gray-400 hover:text-gray-600"})})]}),c.jsx("div",{className:"p-3 border-b",children:c.jsxs("div",{className:"relative",children:[c.jsx(zb,{className:"absolute left-3 top-2.5 text-gray-400 w-4 h-4"}),c.jsx("input",{type:"text",placeholder:"Search...",value:T,onChange:G=>M(G.target.value),className:"w-full pl-9 pr-3 py-2 bg-gray-100 rounded-lg text-sm outline-none focus:ring-2 focus:ring-mono-primary/20"})]})}),c.jsx("div",{className:"flex-1 overflow-y-auto p-2 custom-scrollbar",children:_?c.jsx("div",{className:"text-center py-8 text-gray-400",children:"Loading..."}):c.jsxs("div",{className:"space-y-1",children:[Y.map(G=>{let ee=!1;l==="SHOP_TO_VENDOR"?ee=x===G.id:ee=x==null?void 0:x.includes(G.id);const ne=l==="VENDOR_TO_SHOP"&&G.assignedVendorId&&G.assignedVendorId!==n;return c.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border transition-all ${ee?"bg-blue-50 border-blue-200":"bg-white border-transparent hover:bg-gray-50"}`,children:[c.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[c.jsx("div",{className:`p-2 rounded-full ${ee?"bg-blue-200 text-blue-700":"bg-gray-100 text-gray-500"}`,children:l==="SHOP_TO_VENDOR"?c.jsx(Cr,{size:16}):c.jsx(ws,{size:16})}),c.jsxs("div",{className:"flex flex-col min-w-0",children:[c.jsx("span",{className:"text-sm font-medium text-gray-700 truncate",children:G.name}),ne&&c.jsxs("span",{className:"text-[10px] text-red-500 truncate",children:["Assigned to: ",G.assignedVendorName]})]})]}),c.jsx("button",{onClick:()=>F(G.id),className:`px-3 py-1.5 rounded-md text-xs font-bold transition-colors whitespace-nowrap ${ee?"bg-red-100 text-red-600 hover:bg-red-200":"bg-mono-primary text-white hover:bg-mono-secondary"}`,children:ee?"Revoke":ne?"Reassign":"Assign"})]},G.id)}),Y.length===0&&c.jsx("p",{className:"text-center py-4 text-sm text-gray-400",children:"No items found"})]})})]})}),document.body)},yI=({isOpen:i,onClose:e,selectedProductIds:n,targetType:r})=>{const{triggerSonar:l}=si(),[u,f]=Z.useState([]),[p,x]=Z.useState(""),[g,_]=Z.useState(!1);Z.useEffect(()=>{if(!i)return;(async()=>{const F=await Yn(We(Ae,r==="VENDOR"?"vendors":"shops"));f(F.docs.map(Y=>({id:Y.id,...Y.data()})))})()},[i,r]);const w=async()=>{if(p){_(!0);try{const T=fE(Ae),M=u.find(F=>F.id===p);n.forEach(F=>{const Y=gn(Ae,"products",F);M&&(r==="VENDOR"?T.update(Y,{vendor:M.email||M.name}):T.update(Y,{assignedShop:M.name,shopId:M.id}))}),await T.commit(),l(`Assigned ${n.length} products successfully`),e()}catch(T){console.error(T),l("Bulk assignment failed","error")}finally{_(!1)}}};return i?Ys.createPortal(c.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm flex items-center justify-center px-4",children:c.jsxs("div",{className:"bg-white w-full max-w-sm rounded-2xl shadow-2xl overflow-hidden",children:[c.jsxs("div",{className:"p-6 border-b flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-lg text-gray-900",children:"Bulk Assign Products"}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Assign ",n.length," items to a"," ",r.toLowerCase()]})]}),c.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:c.jsx(kn,{size:20})})]}),c.jsxs("div",{className:"p-6 space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{className:"text-sm font-medium text-gray-700",children:["Select ",r==="VENDOR"?"Vendor":"Shop"]}),c.jsxs("select",{value:p,onChange:T=>x(T.target.value),className:"w-full h-11 px-4 rounded-xl border border-gray-200 bg-white outline-none focus:ring-2 focus:ring-mono-primary",children:[c.jsx("option",{value:"",children:"Choose..."}),u.map(T=>c.jsx("option",{value:T.id,children:T.name},T.id))]})]}),n.length>50&&c.jsxs("div",{className:"flex items-center gap-2 text-amber-600 bg-amber-50 p-3 rounded-lg text-xs",children:[c.jsx(Qd,{size:16}),"Processing large batches may take a moment."]})]}),c.jsxs("div",{className:"p-4 border-t bg-gray-50 flex items-center gap-4",children:[c.jsx("button",{onClick:e,className:"text-sm font-medium text-gray-600 ml-20",children:"Cancel"}),c.jsx("button",{onClick:w,disabled:!p||g,className:"ml-auto px-6 py-2 bg-mono-primary text-white text-sm font-bold rounded-lg disabled:opacity-50",children:g?"Assigning...":"Confirm Assignment"})]})]})}),document.body):null},bE=({isOpen:i,onClose:e,data:n,type:r})=>{const[l,u]=Z.useState(!1);if(!i||!n)return null;const f=g=>{var _,w;return c.jsx("div",{className:"space-y-6",children:c.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[c.jsxs("div",{className:"w-full md:w-1/3 space-y-4",children:[c.jsx("div",{className:"aspect-square bg-gray-50 rounded-2xl flex items-center justify-center border border-gray-100 shadow-inner",children:c.jsx(Ti,{size:64,className:"text-emerald-200"})}),c.jsxs("div",{className:"bg-emerald-50 p-4 rounded-xl border border-emerald-100 text-center",children:[c.jsx("div",{className:"text-[10px] text-emerald-600 font-bold uppercase tracking-widest mb-1",children:"Current Stock"}),c.jsx("div",{className:"text-2xl font-bold text-[#064e3b] leading-none mb-1",children:g.stock}),c.jsxs("div",{className:"text-xs text-emerald-400 font-medium",children:["Min Level: ",g.minStock]})]})]}),c.jsxs("div",{className:"flex-1 space-y-5",children:[c.jsx("div",{children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900 leading-tight",children:g.name}),c.jsxs("p",{className:"text-sm text-gray-500 font-medium mt-1",children:[g.brand,"  ",g.category]})]}),c.jsx("span",{className:`px-2 py-1 rounded text-[10px] font-bold uppercase border ${g.status==="Active"?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200"}`,children:g.status})]})}),c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("div",{className:"p-3 bg-white border border-gray-200 rounded-lg",children:[c.jsx("span",{className:"text-[10px] text-gray-400 font-bold uppercase block mb-1",children:"Retail Price"}),c.jsxs("span",{className:"font-bold text-gray-900 text-lg",children:["$",(_=g.price)==null?void 0:_.toFixed(2)]})]}),c.jsxs("div",{className:"p-3 bg-white border border-gray-200 rounded-lg",children:[c.jsx("span",{className:"text-[10px] text-gray-400 font-bold uppercase block mb-1",children:"Cost Price"}),c.jsxs("span",{className:"font-bold text-gray-700 text-lg",children:["$",((w=g.costPrice)==null?void 0:w.toFixed(2))||"0.00"]})]})]}),c.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-100 space-y-3",children:[c.jsxs("h3",{className:"text-xs font-bold text-gray-900 uppercase tracking-wider flex items-center gap-2",children:[c.jsx(bd,{size:14,className:"text-[#064e3b]"})," Specs"]}),c.jsxs("div",{className:"grid grid-cols-2 gap-x-6 gap-y-2 text-xs",children:[c.jsxs("div",{className:"flex justify-between border-b border-gray-200 py-1",children:[c.jsx("span",{className:"text-gray-500",children:"SKU"}),c.jsx("span",{className:"font-mono font-medium text-gray-800",children:g.sku})]}),c.jsxs("div",{className:"flex justify-between border-b border-gray-200 py-1",children:[c.jsx("span",{className:"text-gray-500",children:"Barcode"}),c.jsx("span",{className:"font-mono font-medium text-gray-800",children:g.barcode})]}),c.jsxs("div",{className:"flex justify-between border-b border-gray-200 py-1",children:[c.jsx("span",{className:"text-gray-500",children:"Origin"}),c.jsx("span",{className:"font-medium text-gray-800",children:g.origin})]}),c.jsxs("div",{className:"flex justify-between border-b border-gray-200 py-1",children:[c.jsx("span",{className:"text-gray-500",children:"Expiry"}),c.jsx("span",{className:"font-medium text-gray-800",children:g.expiryDate})]}),g.weight&&c.jsxs("div",{className:"flex justify-between border-b border-gray-200 py-1",children:[c.jsx("span",{className:"text-gray-500",children:"Weight"}),c.jsx("span",{className:"font-medium text-gray-800",children:g.weight})]})]})]}),g.description&&c.jsxs("div",{className:"text-xs text-gray-600 leading-relaxed bg-white p-3 border border-gray-100 rounded-lg",children:[c.jsx("span",{className:"font-bold block text-gray-800 mb-1",children:"Description"}),g.description]})]})]})})},p=g=>c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4 border-b border-gray-100 pb-4",children:[c.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center text-white font-bold text-2xl shadow-md",children:g.name[0]}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900",children:g.name}),c.jsxs("div",{className:"flex items-center gap-3 mt-1 text-xs",children:[c.jsx("span",{className:`px-2 py-0.5 rounded font-bold ${g.status==="Active"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:g.status}),c.jsxs("span",{className:"text-gray-400",children:["ID: ",g.id.slice(0,8)]})]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-200 space-y-3",children:[c.jsxs("h3",{className:"font-bold text-xs uppercase tracking-wider text-gray-500 flex items-center gap-2",children:[c.jsx(Cr,{size:14})," Contact Info"]}),c.jsxs("div",{className:"space-y-2 text-sm",children:[c.jsxs("div",{className:"flex items-center gap-3 text-gray-700",children:[c.jsx("div",{className:"w-6 flex justify-center",children:c.jsx(Cr,{size:14,className:"text-blue-500"})}),c.jsx("span",{className:"font-medium",children:g.owner})]}),c.jsxs("div",{className:"flex items-center gap-3 text-gray-700",children:[c.jsx("div",{className:"w-6 flex justify-center",children:c.jsx(Gd,{size:14,className:"text-blue-500"})}),c.jsx("span",{className:"truncate",children:g.email})]}),c.jsxs("div",{className:"flex items-center gap-3 text-gray-700",children:[c.jsx("div",{className:"w-6 flex justify-center",children:c.jsx(Om,{size:14,className:"text-blue-500"})}),c.jsx("span",{children:g.phone})]}),g.address&&c.jsxs("div",{className:"flex items-start gap-3 text-gray-700",children:[c.jsx("div",{className:"w-6 flex justify-center mt-0.5",children:c.jsx(od,{size:14,className:"text-blue-500"})}),c.jsx("span",{className:"text-xs",children:g.address})]})]})]}),c.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-200 space-y-3",children:[c.jsxs("h3",{className:"font-bold text-xs uppercase tracking-wider text-gray-500 flex items-center gap-2",children:[c.jsx(Mm,{size:14})," Business Details"]}),c.jsxs("div",{className:"space-y-2 text-xs",children:[c.jsxs("div",{className:"flex justify-between py-1 border-b border-gray-200",children:[c.jsx("span",{className:"text-gray-500",children:"Tax ID"}),c.jsx("span",{className:"font-mono font-medium",children:g.taxId||"N/A"})]}),c.jsxs("div",{className:"flex justify-between py-1 border-b border-gray-200",children:[c.jsx("span",{className:"text-gray-500",children:"License No"}),c.jsx("span",{className:"font-mono font-medium",children:g.licenseNumber||"N/A"})]}),c.jsxs("div",{className:"flex justify-between py-1 border-b border-gray-200",children:[c.jsx("span",{className:"text-gray-500",children:"Total Products"}),c.jsx("span",{className:"font-bold",children:g.productsCount})]}),g.website&&c.jsx("div",{className:"pt-1",children:c.jsxs("a",{href:g.website,target:"_blank",rel:"noreferrer",className:"flex items-center gap-1 text-blue-600 hover:underline",children:[c.jsx(nS,{size:12})," Visit Website"]})})]})]})]}),c.jsxs("div",{className:"pt-4 border-t border-gray-100",children:[c.jsxs("div",{className:"flex justify-between items-center mb-3",children:[c.jsxs("h3",{className:"font-bold text-sm text-gray-900 flex items-center gap-2",children:[c.jsx(ws,{size:16,className:"text-[#064e3b]"})," Assigned Shops"]}),c.jsxs("button",{onClick:()=>u(!0),className:"text-xs bg-white border border-[#064e3b] text-[#064e3b] px-3 py-1 rounded-full font-bold hover:bg-[#064e3b] hover:text-white transition-all flex items-center gap-1",children:[c.jsx(xa,{size:12})," Manage"]})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 max-h-40 overflow-y-auto custom-scrollbar",children:g._assignments&&g._assignments.length>0?g._assignments.map(_=>c.jsxs("div",{className:"text-xs p-3 border border-gray-200 rounded-lg flex justify-between items-center bg-white hover:border-emerald-200 transition-colors",children:[c.jsxs("div",{children:[c.jsx("span",{className:"font-bold block text-gray-800",children:_.name}),c.jsxs("span",{className:"text-[10px] text-gray-500 flex items-center gap-1",children:[c.jsx(od,{size:10})," ",_.location]})]}),c.jsx(qd,{size:14,className:"text-gray-300"})]},_.id)):c.jsx("div",{className:"col-span-2 text-center py-6 bg-gray-50 rounded-lg border border-dashed border-gray-200",children:c.jsx("p",{className:"text-xs text-gray-400 italic",children:"No shops assigned yet."})})})]})]}),x=g=>{var _;return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"h-32 bg-gradient-to-r from-[#064e3b] to-emerald-800 rounded-xl relative mb-8 overflow-hidden",children:[c.jsx("div",{className:"absolute inset-0 bg-black/10 pattern-grid opacity-30"}),c.jsx("div",{className:"absolute -bottom-6 left-6 p-1.5 bg-white rounded-xl shadow-md",children:c.jsx("div",{className:"w-16 h-16 bg-emerald-50 rounded-lg flex items-center justify-center text-[#064e3b] border border-emerald-100",children:c.jsx(ws,{size:32})})})]}),c.jsxs("div",{className:"pl-2 pt-2",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:g.name}),c.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-gray-600",children:[c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx(od,{size:14,className:"text-[#064e3b]"})," ",g.location]}),c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx(Om,{size:14})," ",g.phone]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-2",children:[c.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-5 shadow-sm space-y-4",children:[c.jsxs("h3",{className:"font-bold text-xs uppercase tracking-wider text-gray-500 flex items-center gap-2",children:[c.jsx(bd,{size:14})," Operations"]}),c.jsxs("div",{className:"grid grid-cols-2 gap-y-3 gap-x-2 text-sm",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-[10px] text-gray-400 block mb-0.5 uppercase",children:"Type"}),c.jsx("span",{className:"font-medium text-gray-900",children:g.shopType||"Retail"})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-[10px] text-gray-400 block mb-0.5 uppercase",children:"Size"}),c.jsx("span",{className:"font-medium text-gray-900",children:g.squareFootage?`${g.squareFootage} sq ft`:"-"})]}),c.jsxs("div",{className:"col-span-2",children:[c.jsx("span",{className:"text-[10px] text-gray-400 block mb-0.5 uppercase",children:"Full Address"}),c.jsx("span",{className:"font-medium text-gray-900",children:g.address})]}),c.jsxs("div",{className:"col-span-2",children:[c.jsx("span",{className:"text-[10px] text-gray-400 block mb-0.5 uppercase",children:"Opening Hours"}),c.jsxs("span",{className:"font-medium text-gray-900 flex items-center gap-2",children:[c.jsx(zw,{size:14,className:"text-green-500"})," ",g.operatingHours||"09:00 - 21:00"]})]})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"bg-blue-50 border border-blue-100 rounded-xl p-5",children:[c.jsxs("div",{className:"flex justify-between items-start mb-2",children:[c.jsx("h3",{className:"font-bold text-blue-900 text-xs uppercase tracking-wide",children:"Assigned Vendor"}),c.jsx("button",{onClick:()=>u(!0),className:"text-[10px] bg-white text-blue-600 px-2 py-1 rounded border border-blue-200 font-bold hover:bg-blue-100",children:g.assignedVendorName?"Change":"Assign"})]}),g.assignedVendorName?c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-base text-blue-900",children:g.assignedVendorName}),c.jsxs("p",{className:"text-xs text-blue-600/80 mt-1",children:["Vendor ID: ",(_=g.assignedVendorId)==null?void 0:_.slice(0,8)]})]}):c.jsxs("div",{className:"flex items-center gap-2 text-blue-400 italic text-sm",children:[c.jsx(Mm,{size:16})," No vendor assigned"]})]}),c.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-xl p-5 flex items-center gap-4",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center font-bold text-gray-500",children:g.manager[0]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-[10px] text-gray-400 uppercase font-bold",children:"Store Manager"}),c.jsx("p",{className:"font-bold text-sm text-gray-900",children:g.manager})]})]})]})]})]})};return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/60 backdrop-blur-sm animate-fade-in p-4 md:p-0",children:c.jsxs("div",{className:"bg-white w-[95%] max-h-[85vh] rounded-2xl shadow-2xl flex flex-col overflow-hidden animate-zoom-in md:w-full md:h-auto md:max-w-2xl",children:[c.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-gray-50/80 shrink-0",children:[c.jsxs("span",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:[r," DETAILS VIEW"]}),c.jsx("button",{onClick:e,className:"p-2 bg-white rounded-full text-gray-400 hover:text-gray-800 hover:shadow-sm transition-all",children:c.jsx(kn,{size:18})})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto p-6 md:p-8 custom-scrollbar bg-white",children:[r==="product"&&f(n),r==="vendor"&&p(n),r==="shop"&&x(n)]}),c.jsx("div",{className:"p-4 border-t bg-gray-50 flex justify-end shrink-0",children:c.jsx("button",{onClick:e,className:"px-6 py-2 bg-white border border-gray-300 rounded-lg text-sm font-bold text-gray-700 hover:bg-gray-100 hover:shadow-sm transition-all",children:"Close Details"})})]})}),l&&c.jsx(vE,{isOpen:l,onClose:()=>u(!1),sourceId:n.id,sourceName:n.name,type:r==="vendor"?"VENDOR_TO_SHOP":"SHOP_TO_VENDOR"})]})},_E=(i,e)=>{if(!i||i.length===0){alert("No data to export");return}const n=Object.keys(i[0]),r=[n.join(","),...i.map(p=>n.map(x=>{let g=p[x];return typeof g=="string"&&(g.includes(",")||g.includes(`
`))&&(g=`"${g.replace(/"/g,'""')}"`),g}).join(","))].join(`
`),l=new Blob([r],{type:"text/csv;charset=utf-8;"}),u=document.createElement("a"),f=URL.createObjectURL(l);u.setAttribute("href",f),u.setAttribute("download",`${e}_${new Date().toISOString().split("T")[0]}.csv`),u.style.visibility="hidden",document.body.appendChild(u),u.click(),document.body.removeChild(u)},Nb=i=>new Promise((e,n)=>{const r=new FileReader;r.onload=l=>{var g;const u=(g=l.target)==null?void 0:g.result;if(!u){e([]);return}const f=u.split(`
`);if(f.length<2){e([]);return}const p=f[0].split(",").map(_=>_.trim().replace(/^"|"$/g,"")),x=[];for(let _=1;_<f.length;_++){if(!f[_].trim())continue;const w=f[_].split(","),T={};p.forEach((M,F)=>{var G;let Y=(G=w[F])==null?void 0:G.trim();Y&&!isNaN(Number(Y))?T[M]=Number(Y):T[M]=Y==null?void 0:Y.replace(/^"|"$/g,"")}),x.push(T)}e(x)},r.onerror=l=>n(l),r.readAsText(i)}),xI=({isOpen:i,onClose:e,collectionName:n,fields:r})=>{const{triggerSonar:l}=si(),u=Z.useRef(null),[f,p]=Z.useState(null),[x,g]=Z.useState([]),[_,w]=Z.useState(!1),[T,M]=Z.useState(null);if(!i)return null;const F=()=>{const ee=r.reduce((ne,le)=>({...ne,[le.key]:""}),{});_E([ee],`${n}_template`)},Y=async ee=>{var le;const ne=(le=ee.target.files)==null?void 0:le[0];if(ne){p(ne),M(null);try{const ue=await Nb(ne);ue.length?g(ue.slice(0,5)):M("File appears to be empty or invalid format.")}catch{M("Failed to parse CSV file.")}}},G=async()=>{if(f){w(!0);try{const ee=await Nb(f),ne=500;for(let le=0;le<ee.length;le+=ne){const ue=fE(Ae);ee.slice(le,le+ne).forEach(De=>{if(De.name){const se=gn(We(Ae,n));ue.set(se,{...De,createdAt:new Date().toISOString(),status:De.status||"Active"})}}),await ue.commit()}l(`Successfully imported ${ee.length} items to ${n}`),e()}catch(ee){M("Import failed: "+ee.message)}finally{w(!1)}}};return Ys.createPortal(c.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/60 backdrop-blur-sm animate-fade-in p-4",children:c.jsxs("div",{className:"bg-white w-full max-w-lg rounded-2xl shadow-2xl flex flex-col overflow-hidden animate-zoom-in",children:[c.jsxs("div",{className:"p-6 border-b border-gray-100 flex justify-between items-center bg-gray-50/50",children:[c.jsxs("div",{children:[c.jsxs("h3",{className:"font-bold text-xl text-gray-900",children:["Bulk Import ",n]}),c.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Upload a CSV file to add multiple items."})]}),c.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-full text-gray-400 hover:text-gray-600",children:c.jsx(kn,{size:20})})]}),c.jsxs("div",{className:"p-6 space-y-6",children:[c.jsxs("div",{className:"bg-blue-50 border border-blue-100 rounded-xl px-4 py-3 flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center text-blue-600 shrink-0",children:c.jsx(mp,{size:18})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h4",{className:"text-sm font-bold text-blue-900",children:"Step 1: Get the Template"}),c.jsx("p",{className:"text-xs text-blue-700 mt-1 mb-3",children:"Download the standard CSV format to ensure your data is imported correctly."}),c.jsxs("button",{onClick:F,className:"text-xs font-bold bg-white border border-blue-200 text-blue-700 px-3 py-1.5 rounded-lg hover:bg-blue-50 flex items-center gap-2",children:[c.jsx(Fd,{size:14})," Download Template"]})]})]}),c.jsxs("div",{className:`border-2 border-dashed rounded-xl p-8 text-center transition-all ${f?"border-emerald-300 bg-emerald-50/30":"border-gray-200 hover:border-emerald-400 hover:bg-gray-50"}`,onClick:()=>{var ee;return(ee=u.current)==null?void 0:ee.click()},children:[c.jsx("input",{type:"file",accept:".csv",ref:u,className:"hidden",onChange:Y}),f?c.jsxs("div",{className:"flex justify-between items-center bg-white p-3 rounded-lg border",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(Hd,{size:18,className:"text-emerald-600"}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-bold truncate max-w-[180px]",children:f.name}),c.jsx("p",{className:"text-xs text-gray-500",children:"Ready to import"})]})]}),c.jsx("button",{onClick:()=>{p(null),g([]),M(null)},children:c.jsx(kn,{size:16})})]}):c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx(Bw,{size:28,className:"text-gray-400 mb-2"}),c.jsx("p",{className:"text-sm font-bold text-gray-700",children:"Click to upload CSV"}),c.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Maximum 5MB"})]})]}),T&&c.jsxs("div",{className:"flex gap-2 bg-red-50 text-red-600 p-3 rounded-lg text-sm",children:[c.jsx(Qd,{size:16}),T]})]}),c.jsxs("div",{className:"p-4 border-t bg-gray-50 flex justify-end gap-3",children:[c.jsx("button",{onClick:e,className:"px-5 py-2.5 rounded-xl font-bold text-gray-600 hover:bg-gray-200",children:"Cancel"}),c.jsxs("button",{onClick:G,disabled:!f||_,className:"px-6 py-2.5 bg-mono-primary text-white rounded-xl font-bold flex items-center gap-2 disabled:opacity-50",children:[_&&c.jsx(pp,{size:16,className:"animate-spin"}),_?"Importing...":"Start Import"]})]})]})}),document.getElementById("modal-root"))},EE=({isOpen:i,onClose:e,data:n,collectionName:r,columns:l})=>{var M;const[u,f]=Z.useState(l.map(F=>F.key)),[p,x]=Z.useState(((M=l[0])==null?void 0:M.key)||""),[g,_]=Z.useState("asc");if(!i)return null;const w=F=>{f(Y=>Y.includes(F)?Y.filter(G=>G!==F):[...Y,F])},T=()=>{const Y=[...n].sort((G,ee)=>{const ne=G[p],le=ee[p];return ne<le?g==="asc"?-1:1:ne>le?g==="asc"?1:-1:0}).map(G=>{const ee={};return u.forEach(ne=>{var le;ne==="_assignments"?ee.Assigned=((le=G[ne])==null?void 0:le.map(ue=>ue.name).join(", "))||"":ee[ne]=G[ne]}),ee});_E(Y,r),e()};return Ys.createPortal(c.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/60 backdrop-blur-sm animate-fade-in",children:c.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md overflow-hidden animate-zoom-in",children:[c.jsxs("div",{className:"p-6 border-b border-gray-100 flex justify-between items-center bg-gray-50/50",children:[c.jsxs("h3",{className:"font-bold text-lg text-gray-900",children:["Export ",r]}),c.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:c.jsx(kn,{size:20})})]}),c.jsxs("div",{className:"p-6 space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-semibold text-gray-700 block mb-2",children:"Select Columns"}),c.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-40 overflow-y-auto custom-scrollbar p-2 border rounded-md",children:l.map(F=>c.jsxs("div",{onClick:()=>w(F.key),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-50 p-1 rounded",children:[u.includes(F.key)?c.jsx(VS,{size:16,className:"text-mono-primary"}):c.jsx(US,{size:16,className:"text-gray-300"}),c.jsx("span",{className:"text-sm text-gray-700",children:F.label})]},F.key))})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-semibold text-gray-700 block mb-1",children:"Sort By"}),c.jsx("select",{value:p,onChange:F=>x(F.target.value),className:"w-full p-2 border rounded-md text-sm focus:ring-1 focus:ring-mono-primary outline-none",children:l.map(F=>c.jsx("option",{value:F.key,children:F.label},F.key))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-semibold text-gray-700 block mb-1",children:"Order"}),c.jsxs("select",{value:g,onChange:F=>_(F.target.value),className:"w-full p-2 border rounded-md text-sm focus:ring-1 focus:ring-mono-primary outline-none",children:[c.jsx("option",{value:"asc",children:"Ascending"}),c.jsx("option",{value:"desc",children:"Descending"})]})]})]})]}),c.jsxs("div",{className:"p-4 border-t border-gray-100 flex justify-end gap-3 bg-gray-50",children:[c.jsx("button",{onClick:e,className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-900 font-medium",children:"Cancel"}),c.jsxs("button",{onClick:T,className:"px-4 py-2 bg-mono-primary text-white text-sm font-bold rounded-lg hover:bg-mono-secondary flex items-center gap-2",children:[c.jsx(Fd,{size:16})," Download CSV"]})]})]})})}),document.getElementById("modal-root"))},vI=({isOpen:i,onClose:e,targetId:n,targetName:r,collectionName:l})=>{const{currentUser:u}=Ra(),{triggerSonar:f}=si(),[p,x]=Z.useState(""),[g,_]=Z.useState(!1);if(!i)return null;const w=async T=>{if(T.preventDefault(),!!p.trim()){_(!0);try{await mh(We(Ae,"change_requests"),{vendorId:(u==null?void 0:u.uid)||"unknown",vendorName:(u==null?void 0:u.email)||"Vendor",targetCollection:l,targetId:n,targetName:r,requestType:"UPDATE_INFO",description:p,status:"Pending",createdAt:new Date().toISOString()}),f("Request submitted to Admin"),e()}catch(M){console.error(M),f("Failed to submit request","error")}finally{_(!1)}}};return c.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",children:c.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl shadow-xl overflow-hidden animate-zoom-in border border-gray-100",children:[c.jsxs("div",{className:"bg-[#064e3b] p-6 text-white flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsxs("h3",{className:"font-bold text-xl flex items-center gap-2",children:[c.jsx(Pb,{size:20})," Request Changes"]}),c.jsxs("p",{className:"text-emerald-200 text-xs mt-1",children:["For ",r]})]}),c.jsx("button",{onClick:e,className:"bg-white/20 p-1.5 rounded-full hover:bg-white/30 transition-colors",children:c.jsx(kn,{size:16})})]}),c.jsxs("form",{onSubmit:w,className:"p-6 space-y-4",children:[c.jsxs("div",{className:"bg-amber-50 border border-amber-100 p-4 rounded-xl text-amber-800 text-xs leading-relaxed",children:[c.jsx("strong",{children:"Note:"}),' You cannot edit core product details directly. Please describe the changes needed (e.g., "Change price to $10", "Update name to..."). An administrator will review your request.']}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Description of Changes"}),c.jsx("textarea",{required:!0,value:p,onChange:T=>x(T.target.value),className:"w-full h-32 p-4 bg-gray-50 border border-gray-200 rounded-xl text-sm focus:ring-2 focus:ring-[#064e3b] focus:bg-white transition-all outline-none resize-none",placeholder:"Please update the price to $15.50 and fix the spelling in the brand name..."})]}),c.jsx("div",{className:"flex justify-end pt-2",children:c.jsxs("button",{type:"submit",disabled:g,className:"px-6 py-3 bg-[#064e3b] text-white rounded-xl font-bold shadow-lg shadow-emerald-200 hover:bg-emerald-800 transition-all flex items-center gap-2 disabled:opacity-50",children:[g?c.jsx(pp,{size:18,className:"animate-spin"}):c.jsx(SS,{size:18}),"Submit Request"]})})]})]})})},Bd=async(i,e,n)=>{try{await mh(We(Ae,"logs"),{type:i,description:e,user:n,timestamp:new Date().toISOString()})}catch{}},wE=({searchTerm:i,onSearchChange:e,filterOptions:n,filters:r,onFilterChange:l,sortOptions:u,sortConfig:f,onSortChange:p})=>{const x=()=>{n.forEach(_=>l(_.key,"")),e("")},g=Object.values(r).some(Boolean)||i;return c.jsx("div",{className:"w-full mb-4 md:mb-6",children:c.jsxs("div",{className:"w-full md:max-w-4xl md:mx-auto flex flex-col gap-3 md:gap-4",children:[c.jsxs("div",{className:"relative w-full shadow-sm rounded-xl",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:c.jsx(zb,{className:"h-5 w-5 text-[#064e3b]"})}),c.jsx("input",{type:"text",placeholder:"Search items, brands, or IDs...",value:i,onChange:_=>e(_.target.value),className:"block w-full pl-12 pr-12 py-3 bg-white border border-emerald-100 rounded-xl text-base font-medium text-gray-900 placeholder-emerald-800/30 focus:outline-none focus:ring-2 focus:ring-[#064e3b]/20 focus:border-[#064e3b] transition-all"}),i&&c.jsx("button",{onClick:()=>e(""),className:"absolute inset-y-0 right-0 pr-4 flex items-center text-gray-400 hover:text-red-500 transition-colors",children:c.jsx(kn,{className:"h-5 w-5"})})]}),c.jsxs("div",{className:`\r
    flex items-center gap-3\r
    overflow-x-auto no-scrollbar\r
    py-1\r
    flex-nowrap\r
  `,children:[c.jsxs("div",{className:"hidden md:flex items-center gap-2 text-xs font-bold text-[#064e3b] uppercase tracking-wide mr-2 opacity-70",children:[c.jsx(eS,{size:14})," Filters:"]}),c.jsx("div",{className:"relative group shrink-0",children:c.jsxs("div",{className:"flex items-center bg-white border border-emerald-100 rounded-lg h-10 pl-3 pr-2 shadow-sm cursor-pointer hover:border-[#064e3b] transition-colors",children:[c.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase tracking-wide mr-2",children:"Sort"}),c.jsx("select",{value:(f==null?void 0:f.key)||"",onChange:_=>p(_.target.value,(f==null?void 0:f.direction)||"asc"),className:"bg-transparent text-sm font-bold text-[#064e3b] outline-none appearance-none pr-6 cursor-pointer",children:u.map(_=>c.jsx("option",{value:_.key,children:_.label},_.key))}),c.jsx(Kx,{size:14,className:"absolute right-9 text-[#064e3b] pointer-events-none"}),c.jsx("div",{className:"w-px h-5 bg-gray-200 mx-2"}),c.jsx("button",{onClick:()=>p((f==null?void 0:f.key)||u[0].key,(f==null?void 0:f.direction)==="asc"?"desc":"asc"),className:"text-[#064e3b] hover:bg-emerald-50 rounded p-1",children:(f==null?void 0:f.direction)==="asc"?c.jsx(Sw,{size:16}):c.jsx(vw,{size:16})})]})}),n.map(_=>{var w;return c.jsx("div",{className:"relative shrink-0",children:_.type==="select"?c.jsxs("div",{className:`relative flex items-center h-10 px-3 rounded-lg border transition-all cursor-pointer ${r[_.key]?"bg-[#064e3b] border-[#064e3b] text-white shadow-md":"bg-white border-emerald-100 text-gray-700 hover:border-[#064e3b]"}`,children:[c.jsxs("select",{value:r[_.key]||"",onChange:T=>l(_.key,T.target.value),className:`appearance-none bg-transparent text-sm font-medium outline-none pr-5 cursor-pointer w-full ${r[_.key]?"text-white font-bold":""}`,children:[c.jsx("option",{value:"",className:"text-gray-500",children:_.label}),(w=_.options)==null?void 0:w.map(T=>c.jsx("option",{value:T,className:"text-gray-900",children:T},T))]}),c.jsx(Kx,{className:`absolute right-2 w-3 h-3 pointer-events-none ${r[_.key]?"text-white":"text-gray-400"}`})]}):c.jsxs("div",{className:`relative flex items-center h-10 bg-white border rounded-lg px-3 shadow-sm min-w-[140px] transition-colors ${r[_.key]?"border-[#064e3b] ring-1 ring-[#064e3b]/20":"border-emerald-100"}`,children:[c.jsx("input",{type:"text",value:r[_.key]||"",onChange:T=>l(_.key,T.target.value),placeholder:_.label,className:"bg-transparent text-sm text-gray-900 font-medium outline-none w-full placeholder:text-gray-400"}),r[_.key]&&c.jsx("button",{onClick:()=>l(_.key,""),className:"ml-1 text-gray-400 hover:text-red-500",children:c.jsx(kn,{size:14})})]})},_.key)}),g&&c.jsxs("button",{onClick:x,className:"shrink-0 h-9 px-3 rounded-full bg-red-50 text-red-600 text-xs font-bold border border-red-100 hover:bg-red-100 transition-colors flex items-center gap-1 ml-auto md:ml-0",children:[c.jsx(kn,{size:12})," Clear Filters"]})]})]})})},SE={"EXOTIC PRODUCTS":[],FOODS:["Bread & Cakes","Buy Candy","Fresh Foods","Frozen Foods","Snacks","Noodles","Cookies & Cakes","Confectionery"],BEVERAGES:["FRUITS JUICES","SOFT DRINKS","ENERGY DRINKS","WATER"],"GROCERY & NON FOODS":["NON FOODS","GROCERY","CLEANING","HOUSEHOLD"],ALCOHOL:["BEER","BEER/LAGER/ALE LOW/NO ALCOHOL","LAGER","RED WINE","ROSE WINE","RTD ALCOHOLS","SPIRITS & FORTIFIED WINES","WHITE WINE"],"WORLD FOOD":["ASIAN","MEXICAN","ITALIAN"]},TE=[{id:"1",name:"Premium Orange Juice",brand:"Tropicana",sku:"OJ-001",barcode:"123456789",price:4.99,costPrice:2.5,taxRate:5,stock:120,minStock:20,category:"BEVERAGES",subCategory:"FRUITS JUICES",status:"Active",vendor:"BevCo Ltd",manufacturer:"PepsiCo",origin:"USA",expiryDate:"2024-12-01"},{id:"2",name:"Organic Almonds",brand:"NuttyLife",sku:"NUT-044",barcode:"987654321",price:12.5,costPrice:8,taxRate:0,stock:45,minStock:50,category:"FOODS",subCategory:"Snacks",status:"Active",vendor:"HealthFirst",manufacturer:"NuttyLife Inc",origin:"Spain",expiryDate:"2025-06-15"},{id:"3",name:"Wireless Mouse",brand:"Logitech",sku:"TEC-202",barcode:"456123789",price:29.99,costPrice:15,taxRate:10,stock:8,minStock:10,category:"GROCERY & NON FOODS",subCategory:"NON FOODS",status:"Out of Stock",vendor:"Techies",manufacturer:"Logitech",origin:"China",expiryDate:"N/A"},{id:"4",name:"Yoga Mat",brand:"Lululemon",sku:"FIT-101",barcode:"789123456",price:55,costPrice:30,taxRate:8,stock:200,minStock:15,category:"GROCERY & NON FOODS",subCategory:"NON FOODS",status:"Active",vendor:"SportsWorld",manufacturer:"Lululemon",origin:"Vietnam",expiryDate:"N/A"},{id:"5",name:"Cabernet Sauvignon",brand:"WineryX",sku:"WIN-555",barcode:"321654987",price:18.75,costPrice:9.5,taxRate:12,stock:12,minStock:5,category:"ALCOHOL",subCategory:"RED WINE",status:"Inactive",vendor:"HomeGoods",manufacturer:"WineryX Ltd",origin:"Portugal",expiryDate:"N/A"},{id:"6",name:"Sourdough Bread",brand:"BakeryFresh",sku:"BRD-101",barcode:"112233445",price:3.5,costPrice:1.2,taxRate:0,stock:15,minStock:10,category:"FOODS",subCategory:"Bread & Cakes",status:"Active",vendor:"FreshBakes",manufacturer:"Local Bakery",origin:"UK",expiryDate:"2023-11-05"},{id:"7",name:"Sparkling Water 6pk",brand:"Perrier",sku:"WAT-303",barcode:"556677889",price:8.99,costPrice:4.5,taxRate:5,stock:60,minStock:20,category:"BEVERAGES",subCategory:"WATER",status:"Active",vendor:"BevCo Ltd",manufacturer:"Nestle",origin:"France",expiryDate:"2024-08-01"},{id:"8",name:"Cheddar Cheese Block",brand:"DairyBest",sku:"CHE-221",barcode:"998877665",price:6.5,costPrice:3.5,taxRate:0,stock:8,minStock:15,category:"FOODS",subCategory:"Fresh Foods",status:"Active",vendor:"HealthFirst",manufacturer:"DairyBest Co",origin:"USA",expiryDate:"2023-12-12"},{id:"9",name:"AA Batteries 12pk",brand:"Duracell",sku:"BAT-900",barcode:"443322110",price:14.99,costPrice:8,taxRate:10,stock:200,minStock:30,category:"GROCERY & NON FOODS",subCategory:"HOUSEHOLD",status:"Active",vendor:"Techies",manufacturer:"Duracell",origin:"China",expiryDate:"2028-01-01"},{id:"10",name:"Corona Extra 12pk",brand:"Corona",sku:"BEE-404",barcode:"667788990",price:19.99,costPrice:12,taxRate:15,stock:40,minStock:10,category:"ALCOHOL",subCategory:"LAGER",status:"Active",vendor:"BevCo Ltd",manufacturer:"Grupo Modelo",origin:"Mexico",expiryDate:"2024-05-01"}],bI=[{id:"1",email:"dineshkodali.uk@gmail.com",role:"Administrator",createdAt:"2023-01-01T10:00:00Z"},{id:"2",email:"vendor@tros.one",role:"Vendor",createdAt:"2023-01-02T11:30:00Z"},{id:"3",email:"john@bevco.com",role:"Vendor",createdAt:"2023-01-05T09:15:00Z"},{id:"4",email:"alice@shop.com",role:"Vendor",createdAt:"2023-02-10T14:20:00Z"},{id:"5",email:"support@tros.one",role:"Administrator",createdAt:"2023-03-15T16:45:00Z"}],Im=({collectionName:i,title:e,subtitle:n,fields:r,displayColumns:l,onScan:u})=>{const{userRole:f,currentUser:p}=Ra(),{triggerSonar:x}=si(),[g,_]=Z.useState([]),[w,T]=Z.useState(!0),[M,F]=Z.useState(!1),[Y,G]=Z.useState(""),[ee,ne]=Z.useState({}),[le,ue]=Z.useState({key:"name",direction:"asc"}),[De,se]=Z.useState(!1),[C,A]=Z.useState(!1),[I,k]=Z.useState(!1),[D,V]=Z.useState(!1),[R,et]=Z.useState(!1),[Ye,K]=Z.useState(null),[ce,xe]=Z.useState(null),[Te,ze]=Z.useState({}),[N,L]=Z.useState([]),[ae,re]=Z.useState([]),[he,Ee]=Z.useState(!1),[Pe,yt]=Z.useState(""),[tt,Mn]=Z.useState(!1),[Yt,Vn]=Z.useState(null),Ns=Z.useRef(null),[kt,As]=Z.useState("basic"),[En,Oi]=Z.useState({isOpen:!1,source:null,type:null}),[ki,bt]=Z.useState(!1),[wt,$n]=Z.useState(!1),[ja,zr]=Z.useState(null),tn=f===ke.ADMIN,Cs=f===ke.ADMIN||f===ke.VENDOR&&i==="products",Mi=f===ke.ADMIN,Vi=f===ke.ADMIN;f===ke.ADMIN||ke.VENDOR,Z.useEffect(()=>{T(!0);let ie=()=>{};return(async()=>{try{let pe;if(i==="products")if(f===ke.VENDOR&&(p!=null&&p.email)){const Oe=en(We(Ae,"vendors"),us("email","==",p.email));if(!(await Yn(Oe)).empty)pe=en(We(Ae,"products"),us("vendor","==",p.email));else{_([]),T(!1);return}}else pe=en(We(Ae,"products"));else if(i==="shops"){if(f===ke.ADMIN)pe=en(We(Ae,"shops"));else if(f===ke.VENDOR&&(p!=null&&p.email)){const Oe=en(We(Ae,"vendors"),us("email","==",p.email)),Re=await Yn(Oe);if(Re.empty){_([]),T(!1);return}const Ct=Re.docs[0].id;pe=en(We(Ae,"shops"),us("assignedVendorId","==",Ct))}}else if(i==="vendors")if(f===ke.ADMIN)pe=en(We(Ae,"vendors"));else{_([]),T(!1);return}pe?ie=Er(pe,async Oe=>{const Re=Oe.docs.map(Ct=>({id:Ct.id,...Ct.data()}));if(i==="vendors"&&f===ke.ADMIN){const $t=(await Yn(We(Ae,"shops"))).docs.map(Mt=>Mt.data());Re.forEach(Mt=>{Mt._assignments=$t.filter(dn=>dn.assignedVendorId===Mt.id)})}_(Re),F(!1),T(!1)},Oe=>{console.warn("Fetch Error",Oe),Oe.code!=="permission-denied"&&F(!0),T(!1)}):T(!1)}catch(pe){console.error(pe),T(!1)}})(),()=>ie()},[i,f,p]);const wn=Z.useMemo(()=>{let ie=[...g];if(Y){const Ne=Y.toLowerCase();ie=ie.filter(pe=>Object.values(pe).some(Oe=>String(Oe).toLowerCase().includes(Ne)))}return Object.keys(ee).forEach(Ne=>{const pe=ee[Ne];pe&&pe!==""&&(Ne==="stockStatus"&&i==="products"?ie=ie.filter(Oe=>{const Re=Number(Oe.stock||0),Ct=Number(Oe.minStock||0);return pe==="Low Stock"?Re<=Ct&&Re>0:pe==="Out of Stock"?Re<=0:pe==="In Stock"?Re>Ct:!0}):ie=ie.filter(Oe=>String(Oe[Ne])===pe))}),ie.sort((Ne,pe)=>{const Oe=Ne[le.key]||"",Re=pe[le.key]||"";return typeof Oe=="number"&&typeof Re=="number"?le.direction==="asc"?Oe-Re:Re-Oe:le.direction==="asc"?String(Oe).localeCompare(String(Re)):String(Re).localeCompare(String(Oe))}),ie},[g,Y,ee,le,i]),Gl=()=>{if(i==="products"){const ie=Array.from(new Set(g.map(pe=>pe.category))).filter(Boolean);return[{key:"category",label:"Category",type:"select",options:Array.from(new Set([...Object.keys(SE),...ie])).sort()},{key:"status",label:"Status",type:"select",options:["Active","Inactive","Out of Stock"]},{key:"stockStatus",label:"Inventory",type:"select",options:["In Stock","Low Stock","Out of Stock"]},{key:"brand",label:"Brand",type:"text"}]}return i==="vendors"?[{key:"status",label:"Status",type:"select",options:["Active","Inactive"]},{key:"location",label:"Location",type:"text"}]:i==="shops"?[{key:"status",label:"Status",type:"select",options:["Open","Closed"]},{key:"location",label:"City",type:"text"}]:[]},Ia=()=>{const ie=[{key:"name",label:"Name"},{key:"status",label:"Status"}];return i==="products"?[...ie,{key:"price",label:"Price"},{key:"stock",label:"Stock Level"},{key:"category",label:"Category"},{key:"brand",label:"Brand"}]:i==="vendors"?[...ie,{key:"productsCount",label:"Product Count"}]:ie},Da=async ie=>{ie.preventDefault(),Mn(!0),Vn(null);try{const Ne={...Te};if(N.length>0&&(Ne.customFields=N.reduce((pe,Oe)=>({...pe,[Oe.key]:Oe.value}),{})),ae.length>0&&(Ne.documents=ae),f===ke.VENDOR&&i==="products"&&!Ye&&(Ne.vendor=p==null?void 0:p.email),i==="vendors"&&!Ye&&he){if(!Te.email||!Pe)throw new Error("Email and Password required.");const pe=await uI(Te.email,Pe);await Vl(gn(Ae,"users",pe),{email:Te.email,role:"Vendor",createdAt:new Date().toISOString(),uid:pe}),Ne.linkedUserId=pe,await Bd("SYSTEM",`Created new Login Account for ${Te.email}`,(p==null?void 0:p.email)||"Admin"),Vn({email:Te.email,password:Pe})}Ye?(await _r(gn(Ae,i,Ye.id),Ne),x(`${i.slice(0,-1)} updated successfully`),se(!1)):(await mh(We(Ae,i),{...Ne,createdAt:new Date().toISOString()}),x(`New ${i.slice(0,-1)} created`),he||se(!1))}catch(Ne){alert("Failed to save: "+Ne.message)}finally{Mn(!1)}},Ur=ie=>{zr(ie),$n(!0)},Pn=async()=>{if(ja)try{await oI(gn(Ae,i,ja)),await Bd("SYSTEM",`Deleted item from ${i}`,(p==null?void 0:p.email)||"Admin"),$n(!1),zr(null),x("Item deleted successfully","error")}catch{alert("Failed to delete item.")}},At=ie=>{K(ie||null),ze(ie||{}),L(ie!=null&&ie.customFields?Object.entries(ie.customFields).map(([Ne,pe])=>({key:Ne,value:String(pe)})):[]),re((ie==null?void 0:ie.documents)||[]),As("basic"),Ee(!1),yt(""),Vn(null),se(!0)},Sn=()=>L([...N,{key:"",value:""}]),_t=ie=>{var Ne;(Ne=ie.target.files)!=null&&Ne[0]&&re([...ae,{name:ie.target.files[0].name,date:new Date().toLocaleDateString(),url:"#"}])},ds=(ie,Ne,pe="text",Oe="",Re=!1,Ct=[])=>{let $t=!1;f===ke.VENDOR&&i==="products"&&Ye&&(["stock","minStock","status"].includes(ie)||($t=!0));const Mt=`w-full h-11 px-4 rounded-xl border text-sm focus:ring-2 outline-none transition-all placeholder:text-gray-400 ${$t?"bg-gray-100 border-gray-200 text-gray-500 cursor-not-allowed":"bg-white border-emerald-100 focus:border-emerald-500 focus:ring-emerald-500/20"}`;return pe==="select"?c.jsxs("div",{className:"space-y-1.5",children:[c.jsxs("label",{className:"text-xs font-bold text-emerald-800 uppercase tracking-wide ml-1",children:[Ne," ",Re&&"*"]}),c.jsxs("div",{className:"relative",children:[c.jsxs("select",{disabled:$t,value:Te[ie]||"",onChange:dn=>ze({...Te,[ie]:dn.target.value}),className:`${Mt} appearance-none`,children:[c.jsxs("option",{value:"",children:["Select ",Ne]}),Ct.map(dn=>c.jsx("option",{value:dn,children:dn},dn))]}),c.jsx(fp,{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 rotate-90 pointer-events-none",size:16})]})]}):pe==="textarea"?c.jsxs("div",{className:"space-y-1.5",children:[c.jsxs("label",{className:"text-xs font-bold text-emerald-800 uppercase tracking-wide ml-1",children:[Ne," ",Re&&"*"]}),c.jsx("textarea",{disabled:$t,required:Re,value:Te[ie]||"",onChange:dn=>ze({...Te,[ie]:dn.target.value}),className:`${Mt} min-h-[120px] py-3`,placeholder:Oe})]}):c.jsxs("div",{className:"space-y-1.5",children:[c.jsxs("label",{className:"text-xs font-bold text-emerald-800 uppercase tracking-wide ml-1",children:[Ne," ",Re&&"*"]}),c.jsx("input",{disabled:$t,type:pe,required:Re,value:Te[ie]||"",onChange:dn=>ze({...Te,[ie]:pe==="number"?Number(dn.target.value):dn.target.value}),className:Mt,placeholder:Oe})]})};return c.jsxs("div",{className:"space-y-6 animate-fade-in h-full flex flex-col pb-24 md:pb-0 h-full flex flex-col px-1 sm:px-2 md:px-0",children:[c.jsx("input",{type:"file",ref:Ns,className:"hidden"}),c.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-3 bg-white p-3 md:p-4 rounded-2xl border border-emerald-100 shadow-sm",children:[c.jsxs("div",{children:[c.jsxs("h2",{className:"text-3xl font-bold tracking-tight flex items-center gap-3 text-[#022c22]",children:[e,M&&c.jsxs("span",{className:"text-xs font-bold px-3 py-1 bg-amber-100 text-amber-700 rounded-full flex items-center gap-1",children:[c.jsx(tT,{size:12})," Offline"]})]}),c.jsx("p",{className:"text-emerald-700/70 mt-1 font-medium",children:n})]}),c.jsxs("div",{className:"w-full flex flex-col gap-3 md:gap-4 md:flex-row md:items-center md:w-auto",children:[c.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[c.jsxs("button",{onClick:()=>k(!0),className:"flex-1 md:flex-none h-9 px-3 bg-white border border-emerald-100 text-emerald-700 text-sm font-semibold rounded-lg hover:bg-emerald-50 flex items-center justify-center gap-2",children:[c.jsx(Yw,{size:16})," Import"]}),c.jsxs("button",{onClick:()=>V(!0),className:"flex-1 md:flex-none h-9 px-3 bg-white border border-emerald-100 text-emerald-700 text-sm font-semibold rounded-lg hover:bg-emerald-50 flex items-center justify-center gap-2",children:[c.jsx(Fd,{size:16})," Export"]}),i==="products"&&Vi&&c.jsxs("button",{onClick:()=>bt(!0),className:"flex-1 md:flex-none h-9 px-3 bg-white border border-emerald-100 text-emerald-700 text-sm font-semibold rounded-lg hover:bg-emerald-50 flex items-center justify-center gap-2",children:[c.jsx(bd,{size:16})," Bulk"]})]}),tn&&c.jsxs("button",{onClick:()=>At(),className:"w-full md:w-auto h-12 px-6 bg-emerald-600 text-white font-bold rounded-xl shadow-lg shadow-emerald-600/30 hover:bg-emerald-700 active:scale-[0.98] transition-all flex items-center justify-center gap-2",children:[c.jsx(xa,{size:18})," Add New"]})]})]}),c.jsx("div",{className:"mt-0 md:mt-3",children:c.jsx(wE,{searchTerm:Y,onSearchChange:G,filterOptions:Gl(),filters:ee,onFilterChange:(ie,Ne)=>ne(pe=>({...pe,[ie]:Ne})),sortOptions:Ia(),sortConfig:le,onSortChange:(ie,Ne)=>ue({key:ie,direction:Ne})})}),c.jsxs("div",{className:"block md:hidden space-y-4 px-2 -mx-2",children:[w?c.jsx("div",{className:"text-center py-12 text-emerald-400 font-medium",children:"Loading items..."}):wn.map(ie=>{var Ne;return c.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-emerald-100 overflow-hidden active:scale-98 transition-transform",onClick:()=>{xe(ie),A(!0)},children:[c.jsxs("div",{className:"p-3 md:p-5",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center text-white font-bold text-lg shadow-md ${i==="products"?"bg-gradient-to-br from-emerald-500 to-teal-600":i==="vendors"?"bg-gradient-to-br from-blue-500 to-indigo-600":"bg-gradient-to-br from-amber-500 to-orange-600"}`,children:i==="products"?c.jsx(Ti,{size:24}):i==="vendors"?c.jsx(Cr,{size:24}):c.jsx(ws,{size:24})}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-gray-900 leading-tight",children:ie.name}),c.jsx("p",{className:"text-xs text-gray-500 font-medium mt-0.5",children:ie.sku||ie.email||ie.location})]})]}),c.jsx("span",{className:`px-2.5 py-1 rounded-lg text-[10px] font-bold uppercase tracking-wider border ${ie.status==="Active"||ie.status==="Open"?"bg-emerald-50 text-emerald-700 border-emerald-200":ie.status==="Out of Stock"?"bg-red-50 text-red-700 border-red-200":"bg-gray-50 text-gray-600 border-gray-200"}`,children:ie.status})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[i==="products"&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"bg-emerald-50/50 p-2.5 rounded-lg border border-emerald-50",children:[c.jsx("span",{className:"text-[10px] text-emerald-600 font-bold uppercase block mb-1",children:"Retail Price"}),c.jsxs("span",{className:"text-sm font-bold text-gray-900",children:["$",(Ne=ie.price)==null?void 0:Ne.toFixed(2)]})]}),c.jsxs("div",{className:`p-2.5 rounded-lg border ${ie.stock<=ie.minStock?"bg-red-50 border-red-100":"bg-emerald-50/50 border-emerald-50"}`,children:[c.jsx("span",{className:`text-[10px] font-bold uppercase block mb-1 ${ie.stock<=ie.minStock?"text-red-600":"text-emerald-600"}`,children:"Stock Level"}),c.jsxs("span",{className:`text-sm font-bold ${ie.stock<=ie.minStock?"text-red-700":"text-gray-900"}`,children:[ie.stock," Units"]})]})]}),i==="vendors"&&c.jsxs("div",{className:"bg-gray-50 p-2.5 rounded-lg border border-gray-100 col-span-2",children:[c.jsx("span",{className:"text-[10px] text-gray-500 font-bold uppercase block mb-1",children:"Contact"}),c.jsx("span",{className:"text-sm font-medium text-gray-900",children:ie.phone})]}),i==="shops"&&c.jsxs("div",{className:"bg-gray-50 p-2.5 rounded-lg border border-gray-100 col-span-2",children:[c.jsx("span",{className:"text-[10px] text-gray-500 font-bold uppercase block mb-1",children:"Manager"}),c.jsx("span",{className:"text-sm font-medium text-gray-900",children:ie.manager})]})]})]}),c.jsxs("div",{className:"grid grid-cols-3 divide-x divide-emerald-50 border-t border-emerald-100 bg-gray-50/40",children:[c.jsx("button",{onClick:pe=>{pe.stopPropagation(),xe(ie),A(!0)},className:"py-3 text-xs font-bold text-gray-600 hover:bg-white hover:text-emerald-600 transition-colors",children:"Details"}),Cs&&c.jsx("button",{onClick:pe=>{pe.stopPropagation(),At(ie)},className:"py-3 text-xs font-bold text-gray-600 hover:bg-white hover:text-blue-600 transition-colors",children:"Edit"}),Mi&&c.jsx("button",{onClick:pe=>{pe.stopPropagation(),Ur(ie.id)},className:"py-3 text-xs font-bold text-gray-600 hover:bg-white hover:text-red-600 transition-colors",children:"Delete"})]})]},ie.id)}),wn.length===0&&!w&&c.jsx("div",{className:"p-8 text-center text-gray-400 bg-white rounded-2xl border border-dashed border-emerald-100",children:"No records found."})]}),c.jsx("div",{className:"hidden md:flex flex-col flex-1 bg-white border border-emerald-100 rounded-2xl shadow-sm overflow-hidden",children:w?c.jsx("div",{className:"flex-1 flex items-center justify-center text-emerald-500 font-medium",children:"Loading data..."}):c.jsx("div",{className:"flex-1 overflow-x-auto custom-scrollbar",children:c.jsxs("table",{className:"w-full text-left text-sm",children:[c.jsx("thead",{className:"bg-[#064e3b] text-white sticky top-0 z-20 shadow-md",children:c.jsxs("tr",{children:[l.map((ie,Ne)=>c.jsx("th",{className:"h-14 px-6 font-bold tracking-wide whitespace-nowrap first:rounded-tl-lg",children:ie.label},Ne)),c.jsx("th",{className:"h-14 px-6 text-right font-bold tracking-wide sticky right-0 bg-[#064e3b] shadow-[-10px_0_20px_-5px_rgba(0,0,0,0.3)]",children:"Actions"})]})}),c.jsxs("tbody",{className:"divide-y divide-emerald-50",children:[wn.map((ie,Ne)=>c.jsxs("tr",{className:`group transition-all hover:bg-emerald-50/60 cursor-pointer ${Ne%2===0?"bg-white":"bg-[#f8fafc]"}`,onClick:()=>{xe(ie),A(!0)},children:[l.map((pe,Oe)=>c.jsx("td",{className:"p-4 px-6 align-middle text-gray-700 whitespace-nowrap group-hover:text-emerald-950 transition-colors",children:pe.format?pe.format(ie[pe.key],ie):ie[pe.key]},Oe)),c.jsx("td",{className:"p-4 px-6 align-middle text-right whitespace-nowrap sticky right-0 bg-white group-hover:bg-emerald-50/60 shadow-[-10px_0_10px_-10px_rgba(0,0,0,0.02)] transition-colors",children:c.jsxs("div",{className:"flex justify-end gap-2 items-center opacity-60 group-hover:opacity-100 transition-all transform translate-x-2 group-hover:translate-x-0",onClick:pe=>pe.stopPropagation(),children:[(i==="vendors"||i==="shops")&&Vi&&c.jsx("button",{onClick:()=>Oi({isOpen:!0,source:ie,type:i==="vendors"?"VENDOR_TO_SHOP":"SHOP_TO_VENDOR"}),className:"px-3 py-1 bg-emerald-100 text-emerald-800 rounded-md text-xs font-bold hover:bg-emerald-200 transition-colors",children:"Assign"}),c.jsx("button",{onClick:()=>{xe(ie),A(!0)},className:"p-2 hover:bg-white hover:text-emerald-600 rounded-lg hover:shadow-sm transition-all",children:c.jsx(Mb,{size:16})}),Cs&&c.jsx("button",{onClick:()=>At(ie),className:"p-2 hover:bg-white hover:text-blue-600 rounded-lg hover:shadow-sm transition-all",children:c.jsx(LS,{size:16})}),Mi&&c.jsx("button",{onClick:()=>Ur(ie.id),className:"p-2 hover:bg-white hover:text-red-600 rounded-lg hover:shadow-sm transition-all",children:c.jsx(gp,{size:16})})]})})]},ie.id)),wn.length===0&&c.jsx("tr",{children:c.jsx("td",{colSpan:10,className:"text-center py-12 text-gray-400",children:"No records found matching your filters."})})]})]})})}),De&&Ys.createPortal(c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-emerald-950/40 backdrop-blur-sm animate-fade-in p-2 sm:p-3 md:p-0",children:c.jsxs("div",{className:"bg-white w-full sm:w-[95%] max-h-[90vh] rounded-[2rem] shadow-2xl flex flex-col overflow-hidden animate-zoom-in md:w-full md:h-auto md:max-w-4xl border border-white/50",children:[c.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-emerald-50 shrink-0 bg-emerald-50/30",children:[c.jsxs("div",{children:[c.jsxs("h3",{className:"text-2xl font-bold text-[#064e3b]",children:[Ye?"Edit":"Add New"," ",i.slice(0,-1)]}),c.jsx("p",{className:"text-sm text-emerald-600/70 mt-1",children:f===ke.VENDOR&&i==="products"&&Ye?"Manage stock or request changes.":"Fill in the details below to save."})]}),c.jsx("button",{onClick:()=>se(!1),className:"p-2 bg-white rounded-full hover:bg-gray-100 text-gray-400 hover:text-gray-600 shadow-sm",children:c.jsx(kn,{size:20})})]}),c.jsx("div",{className:"px-6 pt-2 shrink-0 bg-white border-b border-emerald-50 overflow-x-auto",children:c.jsxs("div",{className:"flex gap-6",children:[c.jsx("button",{onClick:()=>As("basic"),className:`pb-3 text-sm font-bold transition-all border-b-2 ${kt==="basic"?"border-emerald-600 text-emerald-800":"border-transparent text-gray-400 hover:text-emerald-600"}`,children:"Basic Info"}),c.jsx("button",{onClick:()=>As("details"),className:`pb-3 text-sm font-bold transition-all border-b-2 ${kt==="details"?"border-emerald-600 text-emerald-800":"border-transparent text-gray-400 hover:text-emerald-600"}`,children:"Details & Specs"}),c.jsx("button",{onClick:()=>As("extra"),className:`pb-3 text-sm font-bold transition-all border-b-2 ${kt==="extra"?"border-emerald-600 text-emerald-800":"border-transparent text-gray-400 hover:text-emerald-600"}`,children:"Docs & Custom"})]})}),c.jsx("div",{className:"p-3 sm:p-4 md:p-8 flex-1 overflow-y-auto custom-scrollbar bg-[#f8fafc]",children:Yt?c.jsxs("div",{className:"bg-white border border-emerald-100 rounded-2xl p-8 text-center max-w-sm mx-auto shadow-lg",children:[c.jsx("div",{className:"w-16 h-16 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-4 text-emerald-600",children:c.jsx(Hd,{size:32})}),c.jsx("h4",{className:"text-xl font-bold text-gray-900 mb-2",children:"Account Created!"}),c.jsx("p",{className:"text-gray-500 text-sm mb-6",children:"Credentials generated successfully."}),c.jsxs("div",{className:"bg-emerald-50 rounded-xl p-4 text-left space-y-3 mb-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-emerald-600 uppercase",children:"Login"}),c.jsx("div",{className:"font-mono font-bold text-gray-800",children:Yt.email})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-emerald-600 uppercase",children:"Password"}),c.jsx("div",{className:"font-mono font-bold text-gray-800",children:Yt.password})]})]}),c.jsx("button",{onClick:()=>{se(!1),Vn(null)},className:"w-full py-3 bg-emerald-600 text-white rounded-xl font-bold hover:bg-emerald-700 transition-colors",children:"Done"})]}):c.jsxs("form",{id:"resourceForm",onSubmit:Da,className:"space-y-8",children:[kt==="basic"&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:r.map(ie=>c.jsx("div",{className:ie.type==="textarea"?"md:col-span-2":"",children:ds(ie.key,ie.label,ie.type,"",!0,ie.options)},ie.key))}),i==="vendors"&&!Ye&&c.jsxs("div",{className:"p-4 bg-white rounded-xl border border-emerald-100 flex items-center gap-3 shadow-sm",children:[c.jsx("input",{type:"checkbox",checked:he,onChange:ie=>Ee(ie.target.checked),className:"w-5 h-5 accent-emerald-600 rounded cursor-pointer"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"text-sm font-bold text-gray-900 block cursor-pointer",onClick:()=>Ee(!he),children:"Create Login Account"}),c.jsx("p",{className:"text-xs text-gray-500",children:"Allow this vendor to access the dashboard."})]}),he&&c.jsx("input",{type:"password",value:Pe,onChange:ie=>yt(ie.target.value),placeholder:"Password",className:"h-10 px-3 border border-emerald-100 rounded-lg text-sm w-48 outline-none focus:border-emerald-500"})]})]}),kt==="details"&&c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i==="products"&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"col-span-2 md:col-span-1",children:ds("sku","Stock Keeping Unit (SKU)","text","SKU-000")}),c.jsx("div",{className:"col-span-2 md:col-span-1",children:ds("barcode","Barcode Number","text","EAN-13 / UPC")}),c.jsx("div",{className:"col-span-2 md:col-span-1",children:ds("costPrice","Cost Price","number","0.00")}),c.jsx("div",{className:"col-span-2 md:col-span-1",children:ds("brand","Brand / Manufacturer","text","Brand Name")})]}),c.jsx("div",{className:"col-span-full",children:ds("description","Detailed Description","textarea","Enter full details here...")})]}),kt==="extra"&&c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-white p-6 rounded-xl border border-emerald-100 shadow-sm text-center",children:[c.jsx("div",{className:"w-12 h-12 bg-emerald-50 rounded-full flex items-center justify-center mx-auto mb-3 text-emerald-600",children:c.jsx(qb,{size:20})}),c.jsx("h4",{className:"font-bold text-gray-900 mb-1",children:"Upload Documents"}),c.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"PDF, JPG, or PNG files supported."}),c.jsxs("label",{className:"cursor-pointer inline-flex items-center gap-2 px-6 py-2.5 bg-emerald-600 text-white rounded-lg font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-200",children:["Choose File"," ",c.jsx("input",{type:"file",className:"hidden",onChange:_t})]})]}),c.jsxs("div",{className:"bg-white p-6 rounded-xl border border-emerald-100 shadow-sm",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsxs("h4",{className:"font-bold text-gray-900 flex items-center gap-2",children:[c.jsx(bd,{size:16,className:"text-emerald-500"})," ","Custom Fields"]}),c.jsxs("button",{type:"button",onClick:Sn,className:"text-xs bg-emerald-50 text-emerald-700 px-3 py-1.5 rounded-lg font-bold hover:bg-emerald-100 transition-colors flex items-center gap-1",children:[c.jsx(xa,{size:12})," Add Field"]})]}),N.length===0&&c.jsx("p",{className:"text-xs text-gray-400 italic text-center py-2",children:"No custom fields added."}),N.map((ie,Ne)=>c.jsxs("div",{className:"flex gap-2 mb-2",children:[c.jsx("input",{type:"text",placeholder:"Key",value:ie.key,onChange:pe=>{const Oe=[...N];Oe[Ne].key=pe.target.value,L(Oe)},className:"flex-1 h-9 px-3 border border-gray-200 rounded-lg text-sm"}),c.jsx("input",{type:"text",placeholder:"Value",value:ie.value,onChange:pe=>{const Oe=[...N];Oe[Ne].value=pe.target.value,L(Oe)},className:"flex-1 h-9 px-3 border border-gray-200 rounded-lg text-sm"})]},Ne))]})]})]})}),!Yt&&c.jsxs("div",{className:"p-6 border-t border-emerald-50 bg-white flex justify-between gap-3 shrink-0",children:[f===ke.VENDOR&&i==="products"&&Ye&&c.jsxs("button",{type:"button",onClick:()=>et(!0),className:"flex items-center gap-2 text-sm font-bold text-amber-600 bg-amber-50 px-4 py-2 rounded-xl hover:bg-amber-100 transition-colors",children:[c.jsx(Pb,{size:16})," Request Changes"]}),c.jsxs("div",{className:"flex gap-3 ml-auto",children:[c.jsx("button",{onClick:()=>se(!1),className:"px-6 py-3 rounded-xl font-bold text-gray-500 hover:bg-gray-50 transition-colors",children:"Cancel"}),c.jsx("button",{form:"resourceForm",type:"submit",disabled:tt,className:"px-8 py-3 bg-[#064e3b] text-white rounded-xl font-bold shadow-xl shadow-emerald-900/20 hover:bg-emerald-900 hover:scale-105 transition-all disabled:opacity-50 disabled:scale-100",children:Ye?"Save Updates":"Create Entry"})]})]})]})}),document.body),C&&ce&&Ys.createPortal(c.jsx(bE,{isOpen:C,onClose:()=>A(!1),data:ce,type:i.slice(0,-1)}),document.body),R&&Ye&&c.jsx(vI,{isOpen:R,onClose:()=>et(!1),targetId:Ye.id,targetName:Ye.name,collectionName:i}),c.jsx(xI,{isOpen:I,onClose:()=>k(!1),collectionName:i,fields:r}),c.jsx(EE,{isOpen:D,onClose:()=>V(!1),data:wn,collectionName:i,columns:l}),En.isOpen&&En.source&&Ys.createPortal(c.jsx(vE,{isOpen:En.isOpen,onClose:()=>Oi({isOpen:!1,source:null,type:null}),sourceId:En.source.id,sourceName:En.source.name,type:En.type}),document.body),ki&&c.jsx(yI,{isOpen:ki,onClose:()=>bt(!1),selectedProductIds:g.slice(0,5).map(ie=>ie.id),targetType:"VENDOR"}),wt&&Ys.createPortal(c.jsx(gI,{isOpen:wt,title:"Delete Item",message:"Are you sure you want to remove this item? This action cannot be undone.",onConfirm:Pn,onCancel:()=>$n(!1),confirmText:"Delete",isDestructive:!0}),document.body)]})},_I=()=>{const[i,e]=Z.useState(!1),[n,r]=Z.useState(null),[l,u]=Z.useState(void 0),[f,p]=Z.useState("SCAN"),x=()=>{e(!0),p("SCAN"),setTimeout(()=>{const _=["123456789","999999999"],w=_[Math.floor(Math.random()*_.length)],T=TE.find(M=>M.barcode===w);r(w),u(T),e(!1),p(T?"RESULT":"FORM")},2e3)},g=_=>{_.preventDefault(),alert("Product saved to database!"),r(null),p("SCAN")};return c.jsxs("div",{className:"flex flex-col h-full bg-mono-bg",children:[f==="SCAN"&&c.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-6 text-center animate-in fade-in",children:[c.jsxs("div",{className:"w-64 h-64 bg-black/5 rounded-3xl flex items-center justify-center mb-8 relative overflow-hidden border-2 border-mono-light",children:[i&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"absolute inset-0 bg-black/20 z-10"}),c.jsx("div",{className:"absolute w-full h-1 bg-[#064e3b] top-1/2 -translate-y-1/2 z-20 animate-pulse shadow-[0_0_15px_rgba(6,78,59,0.8)]"}),c.jsx("p",{className:"absolute bottom-4 left-0 right-0 text-white z-20 font-medium",children:"Scanning via ML Kit..."})]}),c.jsx(Qx,{className:`w-16 h-16 ${i?"text-white/50":"text-mono-textSec"}`})]}),c.jsx("h2",{className:"text-xl font-bold text-mono-text mb-2",children:"Barcode Scanner"}),c.jsx("p",{className:"text-mono-textSec mb-6 max-w-sm",children:"Point your camera at a product barcode (Code 128, EAN-13, QR)."}),c.jsxs("button",{onClick:x,disabled:i,className:"bg-mono-primary text-white px-8 py-4 rounded-full font-bold shadow-lg shadow-mono-primary/20 hover:shadow-xl hover:scale-105 transition-all flex items-center gap-2",children:[c.jsx(Qx,{className:"w-5 h-5"}),i?"Initializing...":"Tap to Scan"]})]}),f==="RESULT"&&l&&c.jsxs("div",{className:"p-6 h-full flex flex-col items-center justify-center animate-in zoom-in duration-300",children:[c.jsx("div",{className:"bg-green-100 p-4 rounded-full mb-6",children:c.jsx(Hd,{className:"w-12 h-12 text-green-600"})}),c.jsx("h3",{className:"text-2xl font-bold text-mono-text mb-2",children:"Product Found"}),c.jsxs("p",{className:"text-mono-textSec mb-8",children:["Barcode: ",n]}),c.jsxs("div",{className:"w-full max-w-md bg-white p-6 rounded-xl shadow-lg border border-mono-light mb-8 text-left",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"text-lg font-bold text-mono-primary",children:l.name}),c.jsx("p",{className:"text-sm text-mono-textSec",children:l.brand})]}),c.jsxs("span",{className:"text-xl font-bold text-mono-text",children:["$",l.price.toFixed(2)]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[c.jsxs("div",{children:[c.jsx("span",{className:"block text-mono-textSec text-xs",children:"Category"}),c.jsx("span",{className:"font-medium",children:l.category})]}),c.jsxs("div",{children:[c.jsx("span",{className:"block text-mono-textSec text-xs",children:"Stock Level"}),c.jsxs("span",{className:`font-medium ${l.stock<=l.minStock?"text-red-600":"text-green-600"}`,children:[l.stock," Units"]})]}),c.jsxs("div",{children:[c.jsx("span",{className:"block text-mono-textSec text-xs",children:"SKU"}),c.jsx("span",{className:"font-medium",children:l.sku})]}),c.jsxs("div",{children:[c.jsx("span",{className:"block text-mono-textSec text-xs",children:"Vendor"}),c.jsx("span",{className:"font-medium",children:l.vendor})]}),c.jsxs("div",{children:[c.jsx("span",{className:"block text-mono-textSec text-xs",children:"Origin"}),c.jsx("span",{className:"font-medium",children:l.origin})]}),c.jsxs("div",{children:[c.jsx("span",{className:"block text-mono-textSec text-xs",children:"Expiry"}),c.jsx("span",{className:"font-medium",children:l.expiryDate})]})]})]}),c.jsxs("div",{className:"flex gap-3 w-full max-w-md",children:[c.jsx("button",{onClick:()=>p("SCAN"),className:"flex-1 px-6 py-3 border border-mono-light rounded-lg hover:bg-mono-light transition-colors font-medium",children:"Scan Again"}),c.jsx("button",{className:"flex-1 px-6 py-3 bg-mono-primary text-white rounded-lg hover:bg-mono-secondary transition-colors font-medium",children:"Update Stock"})]})]}),f==="FORM"&&c.jsxs("div",{className:"p-6 h-full flex flex-col animate-in slide-in-from-bottom duration-300",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-6 text-mono-primary",children:[c.jsx(Ti,{className:"w-6 h-6"}),c.jsx("h2",{className:"text-xl font-bold",children:"New Product Found"})]}),c.jsxs("div",{className:"bg-blue-50 border border-blue-200 p-4 rounded-lg mb-6 flex items-start gap-3",children:[c.jsx("div",{className:"bg-blue-100 p-2 rounded-full",children:c.jsx(xa,{className:"w-4 h-4 text-blue-600"})}),c.jsxs("div",{children:[c.jsxs("p",{className:"text-sm font-medium text-blue-800",children:["Barcode ",n," not in database."]}),c.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"Please fill in details to register."})]})]}),c.jsxs("form",{onSubmit:g,className:"flex-1 overflow-y-auto custom-scrollbar space-y-4 pb-20",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-sm font-medium text-mono-textSec",children:"Barcode"}),c.jsx("input",{type:"text",value:n||"",readOnly:!0,className:"w-full p-3 bg-gray-100 border border-gray-200 rounded-lg text-mono-textSec cursor-not-allowed"})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-sm font-medium text-mono-textSec",children:"Product Name *"}),c.jsx("input",{type:"text",required:!0,className:"w-full p-3 bg-white border border-gray-200 rounded-lg focus:ring-2 focus:ring-mono-primary focus:outline-none",placeholder:"e.g. Energy Drink"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-sm font-medium text-mono-textSec",children:"Price *"}),c.jsx("input",{type:"number",step:"0.01",required:!0,className:"w-full p-3 bg-white border border-gray-200 rounded-lg focus:ring-2 focus:ring-mono-primary focus:outline-none",placeholder:"0.00"})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-sm font-medium text-mono-textSec",children:"Cost Price"}),c.jsx("input",{type:"number",step:"0.01",className:"w-full p-3 bg-white border border-gray-200 rounded-lg focus:ring-2 focus:ring-mono-primary focus:outline-none",placeholder:"0.00"})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-sm font-medium text-mono-textSec",children:"Quantity *"}),c.jsx("input",{type:"number",required:!0,className:"w-full p-3 bg-white border border-gray-200 rounded-lg focus:ring-2 focus:ring-mono-primary focus:outline-none",placeholder:"0"})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-sm font-medium text-mono-textSec",children:"Min Stock"}),c.jsx("input",{type:"number",className:"w-full p-3 bg-white border border-gray-200 rounded-lg focus:ring-2 focus:ring-mono-primary focus:outline-none",placeholder:"10"})]})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-sm font-medium text-mono-textSec",children:"Category"}),c.jsxs("select",{className:"w-full p-3 bg-white border border-gray-200 rounded-lg focus:ring-2 focus:ring-mono-primary focus:outline-none",children:[c.jsx("option",{children:"Select Category..."}),c.jsx("option",{children:"Beverages"}),c.jsx("option",{children:"Snacks"}),c.jsx("option",{children:"Electronics"})]})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-sm font-medium text-mono-textSec",children:"Description"}),c.jsx("textarea",{className:"w-full p-3 bg-white border border-gray-200 rounded-lg focus:ring-2 focus:ring-mono-primary focus:outline-none",rows:3,placeholder:"Short description..."})]}),c.jsxs("div",{className:"pt-4 flex gap-3",children:[c.jsx("button",{type:"button",onClick:()=>p("SCAN"),className:"flex-1 py-3 border border-mono-light rounded-lg text-mono-textSec font-medium",children:"Cancel"}),c.jsx("button",{type:"submit",className:"flex-1 py-3 bg-mono-primary text-white rounded-lg hover:bg-mono-secondary font-bold shadow-md",children:"Save Product"})]})]})]})]})},EI=({userRole:i})=>{const{currentUser:e}=Ra(),[n,r]=Z.useState([]),[l,u]=Z.useState(!0),[f,p]=Z.useState("LIST"),[x,g]=Z.useState(!1),[_,w]=Z.useState(""),[T,M]=Z.useState({}),[F,Y]=Z.useState({key:"date",direction:"desc"}),[G,ee]=Z.useState(null),[ne,le]=Z.useState("FOODS"),[ue,De]=Z.useState([]),[se,C]=Z.useState(!1),[A,I]=Z.useState([]),[k,D]=Z.useState("");Z.useEffect(()=>{const N=localStorage.getItem("tros_vendor_cart");N&&De(JSON.parse(N))},[]),Z.useEffect(()=>{localStorage.setItem("tros_vendor_cart",JSON.stringify(ue))},[ue]),Z.useEffect(()=>{let N=()=>{},L=()=>{};return(async()=>{u(!0);try{if(i===ke.VENDOR&&(e!=null&&e.email)){const re=en(We(Ae,"vendors"),us("email","==",e.email)),he=await Yn(re);if(he.empty)u(!1);else{const Ee=he.docs[0].id,Pe=en(We(Ae,"shops"),us("assignedVendorId","==",Ee));L=Er(Pe,yt=>{const tt=yt.docs.map(Yt=>({id:Yt.id,...Yt.data()}));I(tt),tt.length>0&&!k&&D(tt[0].id);const Mn=tt.map(Yt=>Yt.id);if(Mn.length>0){const Yt=en(We(Ae,"orders"),us("shopId","in",Mn.slice(0,10)));N=Er(Yt,Vn=>{const Ns=Vn.docs.map(kt=>({id:kt.id,...kt.data()}));r(Ns),u(!1)})}else r([]),u(!1)})}}else{const re=en(We(Ae,"orders"));N=Er(re,he=>{r(he.docs.map(Ee=>({id:Ee.id,...Ee.data()}))),u(!1)},he=>{u(!1)})}}catch(re){console.error(re),u(!1)}})(),()=>{N(),L()}},[i,e]);const V=Z.useMemo(()=>{let N=[...n];if(_){const L=_.toLowerCase();N=N.filter(ae=>ae.id.toLowerCase().includes(L)||ae.shop.toLowerCase().includes(L)||String(ae.totalValue).includes(L))}return T.status&&(N=N.filter(L=>L.status===T.status)),T.shop&&(N=N.filter(L=>L.shop===T.shop)),N.sort((L,ae)=>{const re=L[F.key]||"",he=ae[F.key]||"";return F.key==="totalValue"?F.direction==="asc"?Number(re)-Number(he):Number(he)-Number(re):F.direction==="asc"?String(re).localeCompare(String(he)):String(he).localeCompare(String(re))}),N},[n,_,T,F]),R=Z.useMemo(()=>n.find(N=>N.id===G)||null,[n,G]),et=N=>{switch(N){case"Completed":return"bg-emerald-100 text-emerald-700 border-emerald-200";case"Pending":return"bg-amber-100 text-amber-700 border-amber-200";case"In Progress":return"bg-blue-100 text-blue-700 border-blue-200";case"Hold":return"bg-red-100 text-red-700 border-red-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}},Ye=async(N,L)=>{if(i===ke.ADMIN)try{await _r(gn(Ae,"orders",N),{status:L}),await Bd("ORDER",`Updated status ${N.slice(0,6)} to ${L}`,(e==null?void 0:e.email)||"Admin")}catch(ae){console.error("Failed to update status",ae),alert("Failed to update status. Check console.")}},K=N=>{De(L=>L.find(re=>re.productId===N.id)?L.map(re=>re.productId===N.id?{...re,quantity:re.quantity+1,total:(re.quantity+1)*re.price}:re):[...L,{productId:N.id,productName:N.name,price:N.price,quantity:1,total:N.price}])},ce=(N,L)=>{De(ae=>ae.map(re=>{if(re.productId===N){const he=Math.max(0,re.quantity+L);return{...re,quantity:he,total:he*re.price}}return re}).filter(re=>re.quantity>0))},xe=async()=>{var ae;if(ue.length===0||!k)return;u(!0);const N=ue.reduce((re,he)=>re+he.total,0),L=((ae=A.find(re=>re.id===k))==null?void 0:ae.name)||"Unknown";try{await mh(We(Ae,"orders"),{vendorName:e==null?void 0:e.email,shop:L,shopId:k,date:new Date().toISOString().split("T")[0],totalItems:ue.reduce((re,he)=>re+he.quantity,0),totalValue:N,status:"Pending",items:ue,createdAt:new Date().toISOString()}),await Bd("ORDER",`New Order $${N} for ${L}`,(e==null?void 0:e.email)||"Vendor"),De([]),C(!1),p("LIST")}catch{alert("Failed to place order.")}finally{u(!1)}},Te=()=>{var N;return R?Ys.createPortal(c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-emerald-950/40 backdrop-blur-sm animate-fade-in p-2 sm:p-3 md:p-4 print:p-0 print:bg-white print:fixed print:inset-0 print:z-[9999]",children:c.jsxs("div",{className:"bg-white w-[95%] max-h-[90vh] md:max-w-4xl rounded-[2rem] shadow-2xl flex flex-col overflow-hidden animate-zoom-in border border-white/50 print:border-none print:shadow-none print:w-full print:max-w-none print:rounded-none print:max-h-full print:h-full",children:[c.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-emerald-50 shrink-0 bg-emerald-50/30 print:hidden",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-2xl font-bold text-[#064e3b]",children:"Order Details"}),c.jsx("p",{className:"text-sm text-emerald-600/70 mt-1",children:"Review and print invoice."})]}),c.jsx("button",{onClick:()=>ee(null),className:"p-2 bg-white rounded-full hover:bg-gray-100 text-gray-400 hover:text-gray-600 shadow-sm",children:c.jsx(kn,{size:20})})]}),c.jsx("div",{id:"printable-area",className:"flex-1 overflow-y-auto p-3 sm:p-4 md:p-8 custom-scrollbar bg-[#f8fafc] print:bg-white print:overflow-visible",children:c.jsxs("div",{className:`\r
    bg-white rounded-xl border border-emerald-100\r
    p-3 sm:p-4 md:p-8\r
    shadow-sm mb-6\r
    print:border-none print:shadow-none print:p-0\r
  `,children:[c.jsxs("div",{className:"flex flex-col gap-3 md:gap-6 md:flex-row md:justify-between md:items-start mb-4 md:mb-6 pb-4 md:pb-5 border-b border-emerald-100",children:[c.jsx("div",{children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-9 h-9 bg-[#064e3b] rounded-full flex items-center justify-center text-white font-bold text-base",children:"T"}),c.jsxs("div",{className:"leading-tight",children:[c.jsx("p",{className:"text-base font-bold text-gray-900",children:"TROS One"}),c.jsx("p",{className:"text-xs text-gray-500",children:"Inventory Management System"})]})]})}),c.jsxs("div",{className:"mt-4 md:mt-0 md:text-right",children:[c.jsx("h2",{className:"text-2xl md:text-3xl font-extrabold text-gray-900 leading-tight",children:"INVOICE"}),c.jsxs("p",{className:"text-sm font-mono text-[#064e3b] font-bold mt-1",children:["#",R.id.slice(0,8).toUpperCase()]}),c.jsx("span",{className:`inline-block mt-2 px-3 py-1 rounded-full text-[10px] font-bold border uppercase tracking-wider ${et(R.status)}`,children:R.status})]})]}),c.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 md:gap-8 mb-6 md:mb-8 text-sm",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-2",children:"Bill To"}),c.jsx("p",{className:"font-bold text-gray-900 text-lg",children:R.shop}),c.jsxs("p",{className:"text-gray-600 flex items-center gap-2 mt-1",children:[c.jsx(Cr,{size:14})," ",R.vendorName]}),c.jsxs("p",{className:"text-gray-600 flex items-center gap-2 mt-1",children:[c.jsx(Db,{size:14})," ",R.date]})]}),c.jsxs("div",{className:"md:text-right",children:[c.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-2",children:"Payment Terms"}),c.jsx("p",{className:"text-gray-800 font-medium",children:"Due on Receipt"}),c.jsxs("p",{className:"text-gray-600 mt-1",children:["Please ensure payment is made",c.jsx("br",{}),"via bank transfer."]})]})]}),c.jsx("div",{className:"mb-8 rounded-lg border border-gray-200 overflow-x-auto -mx-2 sm:-mx-0",children:c.jsxs("table",{className:"min-w-[640px] w-full text-sm text-left",children:[c.jsx("thead",{className:"bg-emerald-50 text-emerald-900 uppercase text-xs font-bold tracking-wider",children:c.jsxs("tr",{children:[c.jsx("th",{className:"py-2 md:py-4 pl-4 md:pl-6",children:"Description"}),c.jsx("th",{className:"py-2 md:py-4 text-right",children:"Quantity"}),c.jsx("th",{className:"py-2 md:py-4 text-right",children:"Unit Price"}),c.jsx("th",{className:"py-2 md:py-4 pr-4 md:pr-6 text-right",children:"Total"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-100 bg-white",children:(N=R.items)==null?void 0:N.map((L,ae)=>c.jsxs("tr",{children:[c.jsx("td",{className:"py-3 pl-4 md:pl-6 font-medium text-gray-900",children:L.productName}),c.jsx("td",{className:"py-3 text-right text-gray-600",children:L.quantity}),c.jsxs("td",{className:"py-3 text-right text-gray-600",children:["$",L.price.toFixed(2)]}),c.jsxs("td",{className:"py-3 pr-4 md:pr-6 text-right font-bold text-gray-900",children:["$",L.total.toFixed(2)]})]},ae))})]})}),c.jsx("div",{className:"flex justify-end mb-10",children:c.jsxs("div",{className:"w-64 space-y-3",children:[c.jsxs("div",{className:"flex justify-between text-gray-600 text-sm",children:[c.jsx("span",{children:"Subtotal"}),c.jsxs("span",{children:["$",R.totalValue.toFixed(2)]})]}),c.jsxs("div",{className:"flex justify-between text-gray-600 text-sm",children:[c.jsx("span",{children:"Tax (0%)"}),c.jsx("span",{children:"$0.00"})]}),c.jsxs("div",{className:"flex justify-between pt-4 border-t border-gray-200 text-xl font-bold text-[#064e3b]",children:[c.jsx("span",{children:"Grand Total"}),c.jsxs("span",{children:["$",R.totalValue.toFixed(2)]})]})]})}),c.jsxs("div",{className:`\r
    bg-gray-50 border border-gray-200 rounded-xl\r
    p-3 sm:p-4 md:p-6\r
    flex flex-col md:flex-row\r
    gap-3 md:gap-6\r
    items-start\r
    print:bg-transparent print:border-t print:border-gray-200 print:rounded-none\r
  `,children:[c.jsx("div",{className:"p-3 bg-white border border-gray-200 rounded-lg shadow-sm print:hidden",children:c.jsx(Ib,{size:24,className:"text-[#064e3b]"})}),c.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Bank Name"}),c.jsx("p",{className:"font-medium text-gray-900",children:"TROS Corporate Bank"})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Account Name"}),c.jsx("p",{className:"font-medium text-gray-900",children:"TROS One Holdings Ltd."})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Account Number"}),c.jsx("p",{className:"font-mono font-bold text-gray-900",children:"8829 3910 2039"})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Routing / Sort Code"}),c.jsx("p",{className:"font-mono font-bold text-gray-900",children:"20-40-60"})]})]})]}),c.jsxs("div",{className:"mt-8 text-center text-xs text-gray-400",children:[c.jsx("p",{children:"Thank you for your business."}),c.jsx("p",{children:"Questions? Contact support@tros.one"})]})]})}),c.jsxs("div",{className:`p-6 border-t border-emerald-50 bg-white\r
                flex items-center justify-end gap-4\r
                shrink-0 print:hidden`,children:[c.jsxs("button",{onClick:()=>window.print(),className:`flex items-center gap-2\r
               px-2 py-3\r
               bg-white border border-emerald-200 rounded-xl\r
               text-sm font-bold text-emerald-700\r
               hover:bg-emerald-50 shadow-sm transition-all`,children:[c.jsx(vS,{size:18}),"Print Invoice"]}),i===ke.ADMIN&&c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-sm font-medium text-gray-600 whitespace-nowrap",children:"Mark as:"}),c.jsxs("select",{value:R.status,onChange:L=>Ye(R.id,L.target.value),className:`h-11 px-4 rounded-xl\r
                   border border-gray-300\r
                   text-sm font-bold\r
                   bg-white\r
                   focus:border-[#064e3b]\r
                   focus:ring-1 focus:ring-[#064e3b]\r
                   outline-none`,children:[c.jsx("option",{value:"Pending",children:"Pending"}),c.jsx("option",{value:"In Progress",children:"In Progress"}),c.jsx("option",{value:"Hold",children:"Hold"}),c.jsx("option",{value:"Completed",children:"Completed"})]})]})]})]})}),document.body):null},ze=()=>c.jsxs("div",{className:"flex flex-col h-full bg-white",children:[c.jsxs("div",{className:"p-5 border-b border-gray-100 flex justify-between items-center bg-gray-50/80 backdrop-blur shrink-0",children:[c.jsxs("h3",{className:"font-bold text-lg text-gray-900 flex items-center gap-2",children:[c.jsx(vr,{size:20,className:"text-[#064e3b]"})," Current Order"]}),c.jsx("button",{onClick:()=>C(!1),className:"md:hidden text-gray-400 hover:text-gray-600",children:c.jsx(kn,{size:24})})]}),c.jsxs("div",{className:"p-5 bg-emerald-50 border-b border-emerald-100 shrink-0",children:[c.jsx("label",{className:"text-xs font-bold text-emerald-800 block mb-2 uppercase tracking-wide",children:"Select Store Location"}),c.jsxs("div",{className:"relative",children:[c.jsx(ws,{size:16,className:"absolute left-3 top-2.5 text-emerald-400"}),c.jsxs("select",{value:k,onChange:N=>D(N.target.value),className:"w-full pl-9 pr-3 py-2 rounded-lg text-sm border border-emerald-200 bg-white focus:outline-none focus:ring-2 focus:ring-[#064e3b]",children:[c.jsx("option",{value:"",children:"-- Choose Shop --"}),A.map(N=>c.jsx("option",{value:N.id,children:N.name},N.id))]})]})]}),c.jsx("div",{className:"flex-1 overflow-y-auto p-5 space-y-3 custom-scrollbar",children:ue.length===0?c.jsxs("div",{className:"text-center py-10 text-gray-400 flex flex-col items-center",children:[c.jsx(vr,{size:48,className:"opacity-20 mb-2"}),c.jsx("p",{children:"Cart is empty"}),c.jsx("p",{className:"text-xs text-gray-300 mt-1",children:"Add items from the left to get started"})]}):ue.map(N=>c.jsxs("div",{className:"flex justify-between items-center p-3 bg-white border border-gray-100 rounded-xl shadow-sm hover:border-emerald-200 transition-colors",children:[c.jsxs("div",{className:"flex-1 min-w-0 pr-2",children:[c.jsx("p",{className:"text-sm font-bold text-gray-900 truncate",children:N.productName}),c.jsxs("p",{className:"text-xs text-gray-500",children:["$",N.price.toFixed(2)," / unit"]})]}),c.jsxs("div",{className:"flex items-center gap-3 shrink-0",children:[c.jsxs("div",{className:"flex items-center bg-gray-100 rounded-lg",children:[c.jsx("button",{onClick:()=>ce(N.productId,-1),className:"p-1 hover:bg-gray-200 rounded-l-lg text-gray-600",children:c.jsx(hS,{size:14})}),c.jsx("span",{className:"text-sm font-bold w-8 text-center",children:N.quantity}),c.jsx("button",{onClick:()=>ce(N.productId,1),className:"p-1 hover:bg-gray-200 rounded-r-lg text-gray-600",children:c.jsx(xa,{size:14})})]}),c.jsxs("span",{className:"font-bold text-[#064e3b] w-16 text-right",children:["$",N.total.toFixed(2)]})]})]},N.productId))}),c.jsxs("div",{className:"p-5 border-t border-gray-100 bg-gray-50 shrink-0",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("span",{className:"text-gray-600 font-medium",children:"Total Amount"}),c.jsxs("span",{className:"text-2xl font-bold text-[#064e3b]",children:["$",ue.reduce((N,L)=>N+L.total,0).toFixed(2)]})]}),c.jsxs("button",{onClick:xe,disabled:!k||ue.length===0,className:"w-full py-3.5 bg-[#064e3b] text-white rounded-xl font-bold text-base shadow-lg shadow-emerald-200 hover:brightness-110 disabled:opacity-50 disabled:shadow-none transition-all flex justify-center items-center gap-2",children:[l?c.jsx(pp,{className:"animate-spin"}):c.jsx(Hd,{size:20}),"Confirm Order"]})]})]});if(f==="CREATE"){const N=TE.filter(L=>ne==="All"?!0:L.category.toUpperCase().includes(ne.split(" ")[0]));return c.jsxs("div",{className:"flex flex-col h-[calc(100vh-8rem)]",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4 px-2 md:px-0",children:[c.jsxs("button",{onClick:()=>p("LIST"),className:"flex items-center text-gray-500 hover:text-[#064e3b] text-sm font-bold transition-colors",children:[c.jsx(_w,{size:16,className:"mr-1"})," Back to Orders"]}),c.jsxs("button",{onClick:()=>C(!0),className:"md:hidden px-4 py-2 bg-[#064e3b] text-white rounded-lg text-sm font-bold flex items-center gap-2 shadow-sm hover:brightness-110",children:[c.jsx(vr,{size:16})," View Cart (",ue.reduce((L,ae)=>L+ae.quantity,0),")"]})]}),c.jsxs("div",{className:"flex-1 flex overflow-hidden gap-6",children:[c.jsxs("div",{className:"flex-1 flex flex-col bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden",children:[c.jsx("div",{className:"p-3 border-b border-gray-100 flex gap-2 overflow-x-auto custom-scrollbar bg-gray-50 shrink-0",children:["FOODS","BEVERAGES","GROCERY"].map(L=>c.jsx("button",{onClick:()=>le(L),className:`px-4 py-1.5 rounded-full text-xs font-bold whitespace-nowrap transition-all ${ne===L?"bg-[#064e3b] text-white shadow":"bg-white border border-gray-200 text-gray-600 hover:bg-gray-100"}`,children:L},L))}),c.jsx("div",{className:"flex-1 overflow-y-auto p-2 custom-scrollbar",children:N.map(L=>c.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-50 hover:bg-emerald-50/30 transition-colors",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 rounded-lg bg-gray-100 flex items-center justify-center text-gray-400",children:c.jsx(Ti,{size:18})}),c.jsxs("div",{children:[c.jsx("div",{className:"font-bold text-sm text-gray-900",children:L.name}),c.jsxs("div",{className:"text-xs text-gray-500 font-medium",children:["$",L.price.toFixed(2)]})]})]}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsx("button",{onClick:()=>K(L),className:"px-4 py-1.5 bg-white text-[#064e3b] rounded-lg text-xs font-bold border border-[#064e3b] hover:bg-[#064e3b] hover:text-white transition-all",children:"Add"})})]},L.id))})]}),c.jsx("div",{className:"hidden md:flex w-96 bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden",children:c.jsx(ze,{})})]}),se&&c.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 flex items-end justify-center md:hidden p-0 animate-fade-in",children:c.jsx("div",{className:"bg-white w-full h-[70vh] rounded-t-2xl flex flex-col animate-slide-up overflow-hidden",children:c.jsx(ze,{})})})]})}return c.jsxs("div",{className:"space-y-6 pb-24 md:pb-0 pt-4 h-full flex flex-col",children:[c.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 bg-white p-5 rounded-2xl border border-emerald-100 shadow-sm",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-3xl font-bold tracking-tight flex items-center gap-3 text-[#022c22]",children:"Orders"}),c.jsx("p",{className:"text-emerald-700/70 mt-1 font-medium",children:"Manage and track your order fulfillments"})]}),c.jsxs("div",{className:"flex gap-3 w-full md:w-auto",children:[c.jsxs("button",{onClick:()=>g(!0),className:"flex-1 md:flex-none h-11 px-6 bg-white border border-emerald-200 text-emerald-700 font-bold rounded-xl hover:bg-emerald-50 transition-colors flex items-center justify-center gap-2",children:[c.jsx(Fd,{size:18})," Export"]}),i===ke.VENDOR&&c.jsxs("button",{onClick:()=>p("CREATE"),className:"flex-1 md:flex-none h-11 px-6 bg-emerald-600 text-white font-bold rounded-xl shadow-lg shadow-emerald-600/20 hover:bg-emerald-700 hover:scale-105 transition-all flex items-center justify-center gap-2",children:[c.jsx(xa,{size:18})," New Order"]})]})]}),c.jsx(wE,{searchTerm:_,onSearchChange:w,filterOptions:[{key:"status",label:"Status",type:"select",options:["Pending","In Progress","Completed","Hold"]},{key:"shop",label:"Shop Name",type:"text"}],filters:T,onFilterChange:(N,L)=>M(ae=>({...ae,[N]:L})),sortOptions:[{key:"date",label:"Date"},{key:"totalValue",label:"Value"},{key:"status",label:"Status"}],sortConfig:F,onSortChange:(N,L)=>Y({key:N,direction:L})}),c.jsxs("div",{className:"block md:hidden space-y-4 pb-[calc(8rem+env(safe-area-inset-bottom))]",children:[l?c.jsx("div",{className:"text-center py-12 text-emerald-400 font-medium",children:"Loading orders..."}):V.map(N=>c.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-emerald-100 overflow-hidden active:scale-98 transition-transform",onClick:()=>ee(N.id),children:[c.jsxs("div",{className:"p-5",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-emerald-500 to-teal-600 flex items-center justify-center text-white font-bold text-lg shadow-md",children:c.jsx(vr,{size:24})}),c.jsxs("div",{children:[c.jsxs("h4",{className:"font-bold text-gray-900 leading-tight",children:["Order #",N.id.slice(0,5)]}),c.jsx("p",{className:"text-xs text-gray-500 font-medium mt-0.5",children:new Date(N.date).toLocaleDateString()})]})]}),c.jsx("span",{className:`px-2.5 py-1 rounded-lg text-[10px] font-bold uppercase tracking-wider border ${et(N.status)}`,children:N.status})]}),c.jsxs("div",{className:"flex justify-between items-end",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-bold text-emerald-600 uppercase mb-1",children:"Shop Location"}),c.jsx("p",{className:"text-sm font-bold text-gray-900",children:N.shop})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("p",{className:"text-xs font-bold text-emerald-600 uppercase mb-1",children:"Total Value"}),c.jsxs("p",{className:"text-xl font-bold text-gray-900",children:["$",Number(N.totalValue).toFixed(0)]})]})]})]}),c.jsxs("div",{className:"px-5 py-3 border-t border-emerald-50 bg-gray-50/50 flex justify-between items-center",children:[c.jsxs("span",{className:"text-xs font-bold text-gray-500",children:[N.totalItems," Items"]}),c.jsxs("button",{className:"text-xs font-bold text-emerald-600 flex items-center gap-1",children:["View Details ",c.jsx(fp,{size:14})]})]})]},N.id)),V.length===0&&!l&&c.jsx("div",{className:"p-8 text-center text-gray-400 bg-white rounded-2xl border border-dashed border-emerald-100",children:"No records found."})]}),c.jsx("div",{className:"hidden md:flex flex-1 bg-white border border-emerald-100 rounded-2xl shadow-sm overflow-hidden flex-col",children:l?c.jsx("div",{className:"flex-1 flex items-center justify-center text-emerald-500 font-medium",children:"Loading data..."}):c.jsx("div",{className:"flex-1 overflow-x-auto custom-scrollbar",children:c.jsxs("table",{className:"w-full text-left text-sm",children:[c.jsx("thead",{className:"bg-[#064e3b] text-white sticky top-0 z-10 shadow-md",children:c.jsxs("tr",{children:[c.jsx("th",{className:"h-14 px-6 font-bold tracking-wide whitespace-nowrap first:rounded-tl-lg",children:"Order ID"}),c.jsx("th",{className:"h-14 px-6 font-bold tracking-wide whitespace-nowrap",children:"Shop Name"}),c.jsx("th",{className:"h-14 px-6 font-bold tracking-wide whitespace-nowrap",children:"Date Created"}),c.jsx("th",{className:"h-14 px-6 font-bold tracking-wide whitespace-nowrap",children:"Total Value"}),c.jsx("th",{className:"h-14 px-6 font-bold tracking-wide whitespace-nowrap",children:"Status"}),c.jsx("th",{className:"h-14 px-6 text-right font-bold tracking-wide sticky right-0 bg-[#064e3b] shadow-[-10px_0_20px_-5px_rgba(0,0,0,0.3)]",children:"Actions"})]})}),c.jsx("tbody",{className:"divide-y divide-emerald-50",children:V.map((N,L)=>c.jsxs("tr",{className:`group transition-all hover:bg-emerald-50/60 cursor-pointer ${L%2===0?"bg-white":"bg-[#f8fafc]"}`,onClick:()=>ee(N.id),children:[c.jsxs("td",{className:"p-4 px-6 font-mono text-[#064e3b] font-bold",children:["#",N.id.slice(0,8).toUpperCase()]}),c.jsx("td",{className:"p-4 px-6 font-medium text-gray-800",children:N.shop}),c.jsx("td",{className:"p-4 px-6 text-gray-500",children:new Date(N.date).toLocaleDateString()}),c.jsxs("td",{className:"p-4 px-6 font-bold text-gray-900",children:["$",Number(N.totalValue).toFixed(2)]}),c.jsx("td",{className:"p-4 px-6",children:c.jsx("span",{className:`px-3 py-1 rounded-lg text-[10px] font-bold uppercase border ${et(N.status)}`,children:N.status})}),c.jsx("td",{className:"p-4 px-6 text-right sticky right-0 bg-white group-hover:bg-emerald-50/60 shadow-[-10px_0_10px_-10px_rgba(0,0,0,0.02)] transition-colors",children:c.jsx("button",{className:"p-2 hover:bg-white hover:text-emerald-600 rounded-lg hover:shadow-sm transition-all",children:c.jsx(Mb,{size:16})})})]},N.id))})]})})}),c.jsx(EE,{isOpen:x,onClose:()=>g(!1),data:n,collectionName:"orders",columns:[{key:"id",label:"ID"},{key:"shop",label:"Shop"},{key:"totalValue",label:"Total"}]}),R&&c.jsx(Te,{})]})},wI=()=>{const[i,e]=Z.useState(""),[n,r]=Z.useState(""),l=()=>{if(!i.trim()){r("Please paste your configuration object.");return}let u=i;if(i.includes("const firebaseConfig =")){const p=i.match(/const firebaseConfig = ({[\s\S]*?});/);p&&p[1]&&(u=p[1])}dI(u)||r('Invalid JSON format. Please ensure you copy the object correctly (e.g., {"apiKey": "..."})')};return c.jsxs("div",{className:"min-h-screen bg-mono-bg flex flex-col items-center justify-center p-4 relative overflow-hidden",children:[c.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden -z-10",children:[c.jsx("div",{className:"absolute top-[-20%] right-[-10%] w-[60%] h-[60%] rounded-full bg-mono-primary/10 blur-[100px] animate-pulse-soft"}),c.jsx("div",{className:"absolute bottom-[-10%] left-[-10%] w-[50%] h-[50%] rounded-full bg-mono-accent/20 blur-[120px] animate-pulse-soft"})]}),c.jsxs("div",{className:"w-full max-w-2xl glass-panel rounded-2xl shadow-2xl overflow-hidden animate-slide-up border border-white/60",children:[c.jsxs("div",{className:"bg-gradient-primary p-8 text-white relative overflow-hidden",children:[c.jsx("div",{className:"absolute inset-0 bg-white/10 opacity-20 pattern-grid"}),c.jsxs("div",{className:"relative z-10 flex items-center gap-4",children:[c.jsx("div",{className:"p-3 bg-white/20 rounded-full backdrop-blur-sm",children:c.jsx(kb,{size:32})}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold",children:"Connect Database"}),c.jsx("p",{className:"opacity-90",children:"Setup Firebase to power your inventory system"})]})]})]}),c.jsxs("div",{className:"p-8 space-y-6",children:[c.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-xl p-4 flex gap-3",children:[c.jsx(Dm,{className:"text-orange-600 shrink-0"}),c.jsxs("div",{className:"text-sm text-orange-800",children:[c.jsx("p",{className:"font-bold mb-1",children:"Missing Configuration"}),c.jsxs("p",{children:["The application detected invalid or missing API keys. To fix the ",c.jsx("code",{children:"auth/api-key-not-valid"})," error, please provide your Firebase credentials."]})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{className:"text-sm font-bold text-mono-text flex items-center gap-2",children:[c.jsx(Zw,{size:16,className:"text-orange-500"}),"Firebase Configuration Object"]}),c.jsx("textarea",{value:i,onChange:u=>e(u.target.value),className:"w-full h-48 p-4 bg-mono-bg border border-mono-light rounded-xl font-mono text-xs text-mono-textSec focus:ring-2 focus:ring-mono-primary focus:outline-none custom-scrollbar",placeholder:`{
  "apiKey": "AIzaSy...",
  "authDomain": "your-app.firebaseapp.com",
  "projectId": "your-app",
  "storageBucket": "your-app.firebasestorage.app",
  "messagingSenderId": "123456...",
  "appId": "1:12345..."
}`}),c.jsxs("p",{className:"text-xs text-mono-textSec",children:["Go to ",c.jsx("a",{href:"https://console.firebase.google.com",target:"_blank",className:"text-mono-primary hover:underline",children:"Firebase Console"})," > Project Settings > General > Your Apps > Config."]})]}),n&&c.jsxs("div",{className:"text-red-500 text-sm font-medium flex items-center gap-2 animate-fade-in",children:[c.jsx(Dm,{size:16})," ",n]}),c.jsx("div",{className:"pt-4 border-t border-mono-light flex justify-end",children:c.jsxs("button",{onClick:l,className:"px-8 py-3 bg-gradient-primary text-white font-bold rounded-xl shadow-lg shadow-mono-primary/20 hover:shadow-xl hover:scale-105 transition-all flex items-center gap-2",children:[c.jsx(Lb,{size:18}),"Save & Connect"]})})]})]})]})},SI=()=>{const{userRole:i,currentUser:e}=Ra(),[n,r]=Z.useState("profile"),l=[{id:"profile",label:"Profile",icon:c.jsx(Cr,{size:16})},{id:"users",label:"Users",icon:c.jsx(lc,{size:16})},{id:"roles",label:"Roles & Perms",icon:c.jsx(Ub,{size:16})},{id:"shops",label:"Config",icon:c.jsx(ws,{size:16})},{id:"system",label:"System & SMTP",icon:c.jsx(NS,{size:16})},{id:"logs",label:"Logs",icon:c.jsx(mp,{size:16})}],u=[{id:"profile",label:"Profile",icon:c.jsx(Cr,{size:16})},{id:"notifications",label:"Preferences",icon:c.jsx(Rw,{size:16})},{id:"security",label:"Security",icon:c.jsx(Vb,{size:16})}],f=i===ke.ADMIN?l:u;return c.jsxs("div",{className:"max-w-6xl mx-auto h-full flex flex-col bg-white md:rounded-xl md:border md:border-mono-light md:shadow-sm overflow-hidden animate-fade-in",children:[c.jsxs("div",{className:"border-b border-mono-light bg-gray-50/50",children:[c.jsxs("div",{className:"p-4 md:p-6 pb-2",children:[c.jsx("h2",{className:"text-xl md:text-2xl font-bold text-gray-900",children:"Settings"}),c.jsx("p",{className:"text-xs md:text-sm text-gray-500 mt-1",children:"Manage your account and system preferences."})]}),c.jsx("div",{className:"flex items-center gap-1 overflow-x-auto custom-scrollbar px-4 md:px-6",children:f.map(p=>c.jsxs("button",{onClick:()=>r(p.id),className:`flex items-center gap-2 px-4 py-3 text-sm font-medium border-b-2 transition-colors whitespace-nowrap ${n===p.id?"border-[#064e3b] text-[#064e3b] bg-white rounded-t-lg":"border-transparent text-gray-500 hover:text-gray-700 hover:bg-gray-100/50 rounded-t-lg"}`,children:[p.icon,p.label]},p.id))})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto p-4 md:p-8 custom-scrollbar bg-white",children:[n==="profile"&&c.jsx(TI,{currentUser:e,userRole:i}),n==="notifications"&&c.jsx(OI,{}),n==="security"&&i===ke.VENDOR&&c.jsx(DI,{}),i===ke.ADMIN&&c.jsxs(c.Fragment,{children:[n==="users"&&c.jsx(NI,{}),n==="roles"&&c.jsx(CI,{}),n==="shops"&&c.jsx(RI,{}),n==="system"&&c.jsx(jI,{}),n==="logs"&&c.jsx(II,{})]})]})]})},TI=({currentUser:i,userRole:e})=>{var Y,G,ee;const{triggerSonar:n}=si(),[r,l]=Z.useState(!1),[u,f]=Z.useState({displayName:"",phone:"",email:"",documents:[]}),[p,x]=Z.useState([]),[g,_]=Z.useState(!0),[w,T]=Z.useState(null);Z.useEffect(()=>{i&&(_(!0),dE(gn(Ae,"users",i.uid)).then(ne=>{var le;if(ne.exists()){const ue=ne.data();f({displayName:ue.displayName||((le=i.email)==null?void 0:le.split("@")[0]),phone:ue.phone||"",email:i.email||"",documents:ue.documents||[]})}}),e===ke.VENDOR?(async()=>{const le=en(We(Ae,"vendors"),us("email","==",i.email)),ue=await Yn(le);if(!ue.empty){const De=ue.docs[0].id,se=en(We(Ae,"shops"),us("assignedVendorId","==",De)),C=await Yn(se);x(C.docs.map(A=>({id:A.id,...A.data()})))}_(!1)})():_(!1))},[i,e]);const M=async()=>{if(i)try{await _r(gn(Ae,"users",i.uid),{displayName:u.displayName,phone:u.phone}),l(!1),n("Profile updated successfully")}catch{n("Failed to update profile","error")}},F=ne=>{var le;if((le=ne.target.files)!=null&&le[0]){const ue={name:ne.target.files[0].name,date:new Date().toLocaleDateString(),url:"#"};f(De=>({...De,documents:[...De.documents,ue]})),i&&_r(gn(Ae,"users",i.uid),{documents:[...u.documents,ue]}),n("Document uploaded")}};return g?c.jsx("div",{className:"p-8 text-center text-gray-400",children:"Loading profile..."}):c.jsxs("div",{className:"max-w-5xl mx-auto space-y-8 animate-in fade-in slide-in-from-bottom-4",children:[c.jsxs("div",{className:"flex flex-col md:flex-row gap-8 items-start",children:[c.jsxs("div",{className:"w-full md:w-80 bg-gradient-to-br from-[#064e3b] to-emerald-800 rounded-2xl shadow-xl p-6 text-white relative overflow-hidden shrink-0",children:[c.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-10 transform translate-x-1/4 -translate-y-1/4",children:c.jsx(Cr,{size:120})}),c.jsxs("div",{className:"relative z-10 flex flex-col items-center text-center",children:[c.jsx("div",{className:"w-24 h-24 rounded-full border-4 border-white/30 bg-white/20 backdrop-blur-sm flex items-center justify-center text-3xl font-bold mb-4 shadow-inner",children:(G=(Y=u.displayName)==null?void 0:Y[0])==null?void 0:G.toUpperCase()}),c.jsx("h3",{className:"font-bold text-xl mb-1",children:u.displayName}),c.jsx("p",{className:"text-emerald-100 text-sm mb-4",children:u.email}),c.jsxs("div",{className:"px-3 py-1 bg-white/20 backdrop-blur-sm rounded-full text-xs font-bold uppercase tracking-wider",children:[e," Account"]})]})]}),c.jsxs("div",{className:"flex-1 w-full space-y-6",children:[c.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h4",{className:"font-bold text-gray-900 text-lg",children:"Personal Details"}),c.jsx("button",{onClick:()=>r?M():l(!0),className:"px-4 py-1.5 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg text-sm font-bold transition-colors",children:r?"Save Changes":"Edit Profile"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"space-y-1.5",children:[c.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wide",children:"Display Name"}),c.jsx("input",{type:"text",disabled:!r,value:u.displayName,onChange:ne=>f({...u,displayName:ne.target.value}),className:"w-full p-2.5 bg-gray-50 border border-gray-200 rounded-lg text-sm focus:border-[#064e3b] focus:ring-1 focus:ring-[#064e3b] disabled:opacity-70 disabled:cursor-not-allowed transition-all"})]}),c.jsxs("div",{className:"space-y-1.5",children:[c.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wide",children:"Contact Phone"}),c.jsx("input",{type:"text",disabled:!r,value:u.phone,onChange:ne=>f({...u,phone:ne.target.value}),className:"w-full p-2.5 bg-gray-50 border border-gray-200 rounded-lg text-sm focus:border-[#064e3b] focus:ring-1 focus:ring-[#064e3b] disabled:opacity-70 disabled:cursor-not-allowed transition-all"})]}),c.jsxs("div",{className:"space-y-1.5 md:col-span-2",children:[c.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wide",children:"Email Address"}),c.jsxs("div",{className:"relative",children:[c.jsx(Gd,{size:16,className:"absolute left-3 top-3 text-gray-400"}),c.jsx("input",{type:"text",disabled:!0,value:u.email,className:"w-full pl-10 p-2.5 bg-gray-100 border border-gray-200 rounded-lg text-sm text-gray-500 cursor-not-allowed"})]})]})]})]}),e===ke.VENDOR&&c.jsxs("div",{className:"bg-gray-900 rounded-xl p-6 shadow-lg relative overflow-hidden text-white border border-gray-700",children:[c.jsx("div",{className:"absolute top-0 right-0 p-6 opacity-5",children:c.jsx(Ib,{size:150})}),c.jsxs("div",{className:"flex justify-between items-start mb-8 relative z-10",children:[c.jsxs("div",{children:[c.jsxs("h4",{className:"font-bold text-lg flex items-center gap-2",children:[c.jsx(Ob,{size:20})," Payment Information"]}),c.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"For Order Remittances"})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("span",{className:"block font-bold text-[#064e3b]",children:"TROS BANK"}),c.jsx("span",{className:"text-[10px] text-gray-500 uppercase tracking-widest",children:"Corporate"})]})]}),c.jsxs("div",{className:"space-y-4 relative z-10",children:[c.jsxs("div",{className:"flex justify-between items-end border-b border-gray-700 pb-2",children:[c.jsx("span",{className:"text-xs text-gray-400 uppercase",children:"Account Holder"}),c.jsx("span",{className:"font-mono font-medium tracking-wide",children:"TROS One Holdings Ltd."})]}),c.jsxs("div",{className:"flex justify-between items-end border-b border-gray-700 pb-2",children:[c.jsx("span",{className:"text-xs text-gray-400 uppercase",children:"Account Number"}),c.jsx("span",{className:"font-mono font-bold text-xl tracking-widest text-[#064e3b]",children:"8829 3910 2039"})]}),c.jsxs("div",{className:"flex justify-between items-end",children:[c.jsxs("div",{className:"flex gap-8",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-[10px] text-gray-500 block",children:"SORT CODE"}),c.jsx("span",{className:"font-mono",children:"20-40-60"})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-[10px] text-gray-500 block",children:"IBAN"}),c.jsx("span",{className:"font-mono",children:"GB29 3910"})]})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("span",{className:"text-[10px] text-gray-500 block",children:"REF ID"}),c.jsx("span",{className:"font-mono text-xs",children:(ee=i==null?void 0:i.uid)==null?void 0:ee.slice(0,8).toUpperCase()})]})]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e===ke.VENDOR&&c.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm h-full",children:[c.jsxs("h4",{className:"font-bold text-gray-900 mb-4 flex items-center gap-2",children:[c.jsx(ws,{size:18,className:"text-[#064e3b]"})," My Shops"]}),p.length===0?c.jsx("div",{className:"text-center py-8 bg-gray-50 rounded-lg border border-dashed border-gray-200",children:c.jsx("p",{className:"text-sm text-gray-500",children:"No shops assigned yet."})}):c.jsx("div",{className:"space-y-3",children:p.map(ne=>c.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 border border-gray-100 rounded-lg hover:border-emerald-200 transition-colors group cursor-pointer",onClick:()=>T(ne),children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-sm text-gray-900",children:ne.name}),c.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1",children:[c.jsx(kS,{size:10})," ",ne.location]})]}),c.jsx(qd,{size:14,className:"text-gray-300 group-hover:text-[#064e3b] transition-colors"})]},ne.id))})]}),c.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm h-full",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsxs("h4",{className:"font-bold text-gray-900 flex items-center gap-2",children:[c.jsx(Xw,{size:18,className:"text-blue-500"})," Documents"]}),c.jsxs("label",{className:"cursor-pointer text-xs bg-blue-50 text-blue-700 hover:bg-blue-100 px-3 py-1.5 rounded-lg font-bold flex items-center gap-1 transition-colors",children:[c.jsx(qb,{size:12})," Upload",c.jsx("input",{type:"file",className:"hidden",onChange:F})]})]}),u.documents.length===0?c.jsx("div",{className:"text-center py-8 bg-gray-50 rounded-lg border border-dashed border-gray-200",children:c.jsx("p",{className:"text-xs text-gray-400",children:"No documents uploaded."})}):c.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto custom-scrollbar pr-1",children:u.documents.map((ne,le)=>c.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border border-gray-200 rounded-lg hover:shadow-sm transition-shadow",children:[c.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[c.jsx("div",{className:"p-2 bg-blue-50 text-blue-600 rounded-lg shrink-0",children:c.jsx(mp,{size:14})}),c.jsxs("div",{className:"min-w-0",children:[c.jsx("p",{className:"text-xs font-bold text-gray-800 truncate",children:ne.name}),c.jsx("p",{className:"text-[10px] text-gray-500",children:ne.date})]})]}),c.jsx("button",{className:"text-gray-400 hover:text-red-500 p-1",children:c.jsx(gp,{size:14})})]},le))})]})]})]})]}),w&&c.jsx(bE,{isOpen:!!w,onClose:()=>T(null),data:w,type:"shop"})]})},NI=()=>{const[i,e]=Z.useState([]),[n,r]=Z.useState(!1),{triggerSonar:l}=si(),u=async()=>{try{const f=await Yn(We(Ae,"users"));e(f.docs.map(p=>({id:p.id,...p.data()})))}catch(f){console.error(f),e(bI)}};return Z.useEffect(()=>{u()},[]),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"User Management"}),c.jsxs("button",{onClick:()=>r(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-bold hover:bg-blue-700 flex items-center gap-2",children:[c.jsx(xa,{size:16})," Add User"]})]}),c.jsx("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm",children:c.jsx("div",{className:"relative w-full overflow-x-auto",children:c.jsxs("table",{className:"min-w-[640px] w-full text-left",children:[c.jsx("thead",{className:"bg-gray-50 border-b border-gray-200 text-xs uppercase text-gray-500 font-semibold",children:c.jsxs("tr",{children:[c.jsx("th",{className:"p-4",children:"User"}),c.jsx("th",{className:"p-4",children:"Role"}),c.jsx("th",{className:"p-4",children:"Joined"}),c.jsx("th",{className:"p-4 text-right",children:"Actions"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-100",children:i.map(f=>{var p,x;return c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"p-4 whitespace-nowrap",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center font-bold text-gray-600",children:(x=(p=f.email)==null?void 0:p[0])==null?void 0:x.toUpperCase()}),c.jsx("span",{className:"text-sm font-medium text-gray-900",children:f.email})]})}),c.jsx("td",{className:"p-4 whitespace-nowrap",children:c.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${f.role==="Administrator"?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"}`,children:f.role})}),c.jsx("td",{className:"p-4 text-sm text-gray-500 whitespace-nowrap",children:f.createdAt?new Date(f.createdAt).toLocaleDateString():"-"}),c.jsx("td",{className:"p-4 text-right whitespace-nowrap",children:c.jsx("button",{className:"text-gray-400 hover:text-red-600 p-1",onClick:()=>l("Delete restricted in demo","info"),children:c.jsx(gp,{size:16})})})]},f.id)})})]})})}),c.jsx(AI,{open:n,onClose:()=>r(!1),onUserCreated:u})]})},AI=({open:i,onClose:e,onUserCreated:n})=>{const{triggerSonar:r}=si(),[l,u]=Z.useState({name:"",email:"",role:"",joiningDate:""}),[f,p]=Z.useState(!1);if(!i)return null;const x=_=>{u({...l,[_.target.name]:_.target.value})},g=async()=>{if(!l.name||!l.email||!l.role||!l.joiningDate){r("All fields are required","error");return}try{p(!0),await Vl(gn(We(Ae,"users")),{name:l.name,email:l.email,role:l.role,createdAt:new Date(l.joiningDate).toISOString(),status:"active"}),r("User created successfully"),n(),e(),u({name:"",email:"",role:"",joiningDate:""})}catch(_){console.error(_),r("Failed to create user","error")}finally{p(!1)}};return Ys.createPortal(c.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/60 backdrop-blur-sm animate-fade-in",children:c.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md overflow-hidden animate-zoom-in",children:[c.jsxs("div",{className:"p-6 border-b border-gray-100 flex justify-between items-center bg-gray-50/50",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-lg text-gray-900",children:"Add New User"}),c.jsx("p",{className:"text-xs text-gray-500",children:"Fill in the details below to save."})]}),c.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:c.jsx(kn,{size:20})})]}),c.jsxs("div",{className:"p-6 space-y-4 max-h-[70vh] overflow-y-auto",children:[c.jsx("input",{name:"name",value:l.name,onChange:x,placeholder:"Full Name",className:"w-full p-3 rounded-xl border bg-gray-50 focus:ring-1 focus:ring-[#064e3b] outline-none"}),c.jsx("input",{name:"email",type:"email",value:l.email,onChange:x,placeholder:"Email Address",className:"w-full p-3 rounded-xl border bg-gray-50 focus:ring-1 focus:ring-[#064e3b] outline-none"}),c.jsxs("select",{name:"role",value:l.role,onChange:x,className:"w-full p-3 rounded-xl border bg-gray-50 focus:ring-1 focus:ring-[#064e3b] outline-none",children:[c.jsx("option",{value:"",children:"Select Role"}),c.jsx("option",{value:"Administrator",children:"Administrator"}),c.jsx("option",{value:"Vendor",children:"Vendor"})]}),c.jsx("input",{name:"joiningDate",type:"date",value:l.joiningDate,onChange:x,className:"w-full p-3 rounded-xl border bg-gray-50 focus:ring-1 focus:ring-[#064e3b] outline-none"})]}),c.jsxs("div",{className:"p-4 border-t border-gray-100 flex justify-end gap-3 bg-gray-50",children:[c.jsx("button",{onClick:e,className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-900 font-medium",children:"Cancel"}),c.jsx("button",{onClick:g,disabled:f,className:"px-5 py-2 bg-[#064e3b] text-white text-sm font-bold rounded-lg hover:brightness-110 disabled:opacity-60",children:f?"Creating...":"Create User"})]})]})})}),document.getElementById("modal-root"))},CI=()=>{const[i,e]=Z.useState({Administrator:["view_dashboard","manage_orders","manage_users","manage_system"],Vendor:["view_dashboard","manage_orders"]}),n=(r,l)=>{const u=i[r];u.includes(l)?e({...i,[r]:u.filter(f=>f!==l)}):e({...i,[r]:[...u,l]})};return c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:["Administrator","Vendor"].map(r=>c.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm hover:border-emerald-200 transition-colors",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("div",{className:`p-3 rounded-lg ${r==="Administrator"?"bg-purple-100 text-purple-600":"bg-blue-100 text-blue-600"}`,children:c.jsx(Ub,{size:24})}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-lg text-gray-900",children:r}),c.jsx("p",{className:"text-sm text-gray-500",children:"Role Permissions"})]})]}),c.jsx("div",{className:"space-y-3",children:[{id:"view_dashboard",label:"View Dashboard"},{id:"manage_orders",label:"Manage Orders"},{id:"manage_users",label:"Manage Users & Roles"},{id:"manage_system",label:"System Configuration"},{id:"delete_records",label:"Delete Records"}].map(l=>{var f;const u=(f=i[r])==null?void 0:f.includes(l.id);return c.jsxs("div",{className:"flex items-center justify-between p-2 hover:bg-gray-50 rounded cursor-pointer",onClick:()=>n(r,l.id),children:[c.jsx("span",{className:`text-sm ${u?"text-gray-900 font-medium":"text-gray-500"}`,children:l.label}),c.jsx("div",{className:`w-5 h-5 rounded border flex items-center justify-center ${u?"bg-green-500 border-green-500":"border-gray-300"}`,children:u&&c.jsx(Ow,{size:12,className:"text-white"})})]},l.id)})})]},r))})},RI=()=>c.jsx("div",{className:"max-w-2xl space-y-6",children:c.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[c.jsx("h3",{className:"font-bold text-gray-900 mb-4",children:"Global Shop Settings"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Default Currency"}),c.jsxs("select",{className:"w-full p-2 border border-gray-200 rounded-lg text-sm bg-gray-50",children:[c.jsx("option",{children:"USD ($)"}),c.jsx("option",{children:"EUR ()"}),c.jsx("option",{children:"GBP ()"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Timezone"}),c.jsxs("select",{className:"w-full p-2 border border-gray-200 rounded-lg text-sm bg-gray-50",children:[c.jsx("option",{children:"UTC"}),c.jsx("option",{children:"EST"}),c.jsx("option",{children:"PST"})]})]}),c.jsxs("div",{className:"flex items-center justify-between pt-2",children:[c.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Auto-Approve Orders"}),c.jsx("button",{className:"text-[#064e3b]",children:c.jsx(Bb,{size:32})})]})]})]})}),jI=()=>{const{triggerSonar:i}=si(),[e,n]=Z.useState({host:"",port:"587",user:"",pass:"",fromEmail:""}),r=()=>{console.log("Saving SMTP Config:",e),i("SMTP Configuration Saved")};return c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[c.jsxs("h3",{className:"font-bold text-gray-900 mb-4 flex items-center gap-2",children:[c.jsx(kb,{size:18})," Database Status"]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsx("span",{className:"text-gray-600",children:"Connection"})," ",c.jsx("span",{className:"text-green-600 font-bold",children:"Active"})]}),c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsx("span",{className:"text-gray-600",children:"Provider"})," ",c.jsx("span",{className:"font-medium",children:"Firebase Firestore"})]}),c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsx("span",{className:"text-gray-600",children:"Last Backup"})," ",c.jsx("span",{className:"font-medium",children:"2 hours ago"})]})]}),c.jsx("button",{className:"w-full mt-6 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-bold hover:bg-gray-200",children:"Trigger Backup"})]}),c.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[c.jsxs("h3",{className:"font-bold text-gray-900 mb-4 flex items-center gap-2",children:[c.jsx(Gd,{size:18})," SMTP Configuration"]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Host"}),c.jsx("input",{type:"text",placeholder:"smtp.gmail.com",value:e.host,onChange:l=>n({...e,host:l.target.value}),className:"w-full p-2 border border-gray-200 rounded-lg text-sm mt-1"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Port"}),c.jsx("input",{type:"text",placeholder:"587",value:e.port,onChange:l=>n({...e,port:l.target.value}),className:"w-full p-2 border border-gray-200 rounded-lg text-sm mt-1"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Username / Email"}),c.jsx("input",{type:"text",placeholder:"notifications@tros.one",value:e.user,onChange:l=>n({...e,user:l.target.value}),className:"w-full p-2 border border-gray-200 rounded-lg text-sm mt-1"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Password / App Key"}),c.jsx("input",{type:"password",placeholder:"",value:e.pass,onChange:l=>n({...e,pass:l.target.value}),className:"w-full p-2 border border-gray-200 rounded-lg text-sm mt-1"})]}),c.jsxs("button",{onClick:r,className:"w-full mt-2 py-2 bg-[#064e3b] text-white rounded-lg text-sm font-bold hover:bg-[#065f46] flex items-center justify-center gap-2",children:[c.jsx(Lb,{size:14})," Save SMTP Settings"]})]})]})]})},II=()=>{const[i,e]=Z.useState([]);return Z.useEffect(()=>{Yn(We(Ae,"logs")).then(n=>e(n.docs.map(r=>r.data())))},[]),c.jsxs("div",{className:"bg-gray-900 text-green-400 p-4 rounded-xl font-mono text-xs h-96 overflow-y-auto shadow-inner custom-scrollbar",children:[i.length===0&&c.jsx("p",{className:"opacity-50",children:"No system logs found."}),i.map((n,r)=>c.jsxs("div",{className:"mb-1 border-b border-gray-800 pb-1",children:[c.jsxs("span",{className:"opacity-50",children:["[",new Date(n.timestamp).toLocaleTimeString(),"]"]})," ",c.jsx("span",{className:"text-yellow-400",children:n.type}),": ",n.description," ",c.jsxs("span",{className:"opacity-50",children:["by ",n.user]})]},r))]})},DI=()=>c.jsx("div",{className:"text-center text-gray-500 p-10",children:"Security settings restricted. Contact Admin to reset password."}),OI=()=>c.jsxs("div",{className:"max-w-2xl space-y-6",children:[c.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[c.jsx("h3",{className:"font-bold text-gray-900 mb-4 text-base",children:"UI Preferences"}),c.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg mb-2",children:[c.jsxs("span",{className:"text-sm font-medium flex items-center gap-2",children:[c.jsx(pS,{size:16})," Compact Mode"]}),c.jsx(HS,{size:32,className:"text-gray-300 cursor-pointer"})]})]}),c.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[c.jsx("h3",{className:"font-bold text-gray-900 mb-4 text-base",children:"Notification Alerts"}),c.jsx("div",{className:"space-y-3",children:["Order Status Updates","Low Stock Warnings","System Maintenance","Email Summaries"].map(i=>c.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[c.jsx("span",{className:"text-sm font-medium text-gray-700",children:i}),c.jsx(Bb,{size:32,className:"text-green-500 cursor-pointer hover:text-green-600"})]},i))})]})]}),kI=()=>{var le,ue,De;const{userRole:i,logout:e,currentUser:n,dbError:r}=Ra(),{notifications:l,sonarQueue:u,clearNotification:f}=si(),[p,x]=Z.useState(Fe.DASHBOARD),g=[{id:Fe.DASHBOARD,label:"Overview",icon:c.jsx(Yx,{size:20})},{id:Fe.ORDERS,label:"Orders",icon:c.jsx(vr,{size:20})},{id:Fe.PRODUCTS,label:"Products",icon:c.jsx(Ti,{size:20})},{id:Fe.SHOPS,label:"Shops",icon:c.jsx(ws,{size:20})},{id:Fe.VENDORS,label:"Vendors",icon:c.jsx(lc,{size:20}),role:ke.ADMIN},{id:Fe.SCANNER,label:"Scanner",icon:c.jsx(cd,{size:20})}],_=[{id:Fe.SETTINGS,label:"Settings",icon:c.jsx(km,{size:20})}],w=[{id:Fe.DASHBOARD,label:"Home",icon:c.jsx(Yx,{size:18})},{id:Fe.ORDERS,label:"Orders",icon:c.jsx(vr,{size:18})},{id:Fe.PRODUCTS,label:"Products",icon:c.jsx(Ti,{size:18})},{id:Fe.SHOPS,label:"Shops",icon:c.jsx(ws,{size:18})},...i===ke.ADMIN?[{id:Fe.VENDORS,label:"Vendors",icon:c.jsx(lc,{size:18})}]:[{id:Fe.SCANNER,label:"Scan",icon:c.jsx(cd,{size:18})}],{id:Fe.SETTINGS,label:"Config",icon:c.jsx(km,{size:18})}],T=[{key:"name",label:"Product Name",type:"text"},{key:"brand",label:"Brand",type:"text"},{key:"sku",label:"SKU",type:"text"},{key:"barcode",label:"Barcode",type:"text"},{key:"category",label:"Category",type:"select",options:Object.keys(SE)},{key:"vendor",label:"Supplier",type:"text"},{key:"price",label:"Retail Price",type:"number"},{key:"costPrice",label:"Cost Price",type:"number"},{key:"stock",label:"Stock Qty",type:"number"},{key:"minStock",label:"Min Level",type:"number"},{key:"status",label:"Status",type:"select",options:["Active","Inactive","Out of Stock"]}],M=[{key:"name",label:"Product",format:(se,C)=>c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-emerald-50 to-teal-50 border border-emerald-100 flex items-center justify-center text-emerald-600 font-bold text-sm shrink-0 shadow-sm",children:C.image?c.jsx("img",{src:C.image,alt:"",className:"w-full h-full object-cover rounded-xl"}):c.jsx(Ti,{size:18})}),c.jsxs("div",{children:[c.jsx("span",{className:"font-bold text-gray-900 block text-sm",children:se}),c.jsx("span",{className:"text-xs text-gray-500",children:C.brand})]})]})},{key:"sku",label:"SKU / Barcode",format:(se,C)=>c.jsxs("div",{children:[c.jsx("div",{className:"font-mono text-xs font-bold text-gray-700 bg-gray-50 px-2 py-0.5 rounded inline-block mb-1",children:se||"-"}),c.jsxs("div",{className:"text-[10px] text-gray-400 flex items-center gap-1",children:[c.jsx(Aw,{size:10})," ",C.barcode]})]})},{key:"category",label:"Category",format:se=>c.jsx("span",{className:"text-xs font-medium text-emerald-700 bg-emerald-50 px-3 py-1 rounded-full border border-emerald-100",children:se})},{key:"price",label:"Pricing",format:(se,C)=>c.jsxs("div",{className:"text-right",children:[c.jsxs("div",{className:"font-bold text-gray-900",children:["$",se==null?void 0:se.toFixed(2)]}),C.costPrice&&c.jsxs("div",{className:"text-[10px] text-gray-400",children:["Cost: $",C.costPrice.toFixed(2)]})]})},{key:"stock",label:"Inventory",format:(se,C)=>c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-16 h-1.5 rounded-full overflow-hidden bg-gray-100",children:c.jsx("div",{className:`h-full rounded-full ${se<=C.minStock?"bg-red-500 w-1/4":"bg-emerald-500 w-3/4"}`})}),c.jsx("span",{className:`font-bold text-xs ${se<=C.minStock?"text-red-600":"text-emerald-700"}`,children:se})]})},{key:"status",label:"Status",format:se=>c.jsx("span",{className:`px-2 py-1 rounded-lg text-[10px] font-bold uppercase tracking-wider ${se==="Active"?"bg-emerald-50 text-emerald-700 border border-emerald-100":"bg-gray-50 text-gray-500 border border-gray-100"}`,children:se})}],F=[{key:"name",label:"Vendor Name",type:"text"},{key:"owner",label:"Contact Person",type:"text"},{key:"email",label:"Email Address",type:"text"},{key:"phone",label:"Phone Number",type:"text"},{key:"address",label:"Address",type:"text"},{key:"status",label:"Status",type:"select",options:["Active","Inactive"]}],Y=[{key:"name",label:"Vendor",format:se=>c.jsx("span",{className:"font-bold text-sm text-[#064e3b]",children:se})},{key:"owner",label:"Contact",format:(se,C)=>c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-medium text-gray-700",children:se}),c.jsxs("div",{className:"text-xs text-gray-400 flex items-center gap-1 mt-0.5",children:[c.jsx(Om,{size:10})," ",C.phone]})]})},{key:"email",label:"Email",format:se=>c.jsx("span",{className:"text-sm text-blue-600 hover:underline cursor-pointer",children:se})},{key:"productsCount",label:"Products",format:se=>c.jsx("span",{className:"font-mono font-bold text-gray-600 bg-gray-50 px-2 py-1 rounded",children:se||0})},{key:"status",label:"Status",format:se=>c.jsx("span",{className:`w-2 h-2 rounded-full inline-block mr-2 ${se==="Active"?"bg-emerald-500":"bg-red-400"}`})}],G=[{key:"name",label:"Shop Name",type:"text"},{key:"location",label:"City/Location",type:"text"},{key:"address",label:"Full Address",type:"text"},{key:"shopType",label:"Shop Type",type:"select",options:["Retail","Warehouse","Pop-up"]},{key:"manager",label:"Store Manager",type:"text"}],ee=[{key:"name",label:"Location Name",format:(se,C)=>c.jsxs("div",{children:[c.jsx("div",{className:"font-bold text-sm text-gray-900",children:se}),c.jsx("div",{className:"text-[10px] text-gray-400 uppercase tracking-wide font-bold",children:C.shopType})]})},{key:"location",label:"Address",format:(se,C)=>c.jsxs("div",{className:"text-sm text-gray-500 flex items-center gap-1",children:[c.jsx(od,{size:12,className:"text-emerald-500"})," ",se]})},{key:"manager",label:"Manager",format:se=>c.jsx("span",{className:"text-sm font-medium text-gray-700",children:se})},{key:"status",label:"Status",format:se=>c.jsx("span",{className:`px-2 py-1 rounded-lg text-[10px] font-bold uppercase ${se==="Open"?"bg-emerald-50 text-emerald-700":"bg-gray-50 text-gray-600"}`,children:se})}],ne=()=>{switch(p){case Fe.DASHBOARD:return c.jsx(jm,{onNavigate:x});case Fe.PRODUCTS:return c.jsx(Im,{collectionName:"products",title:"Products",subtitle:"Manage your product catalog",fields:T,displayColumns:M,onScan:()=>x(Fe.SCANNER)});case Fe.VENDORS:return i!==ke.ADMIN?c.jsx(jm,{onNavigate:x}):c.jsx(Im,{collectionName:"vendors",title:"Vendors",subtitle:"Manage supplier relationships",fields:F,displayColumns:Y});case Fe.SHOPS:return c.jsx(Im,{collectionName:"shops",title:"Shops",subtitle:"Manage store outlets",fields:G,displayColumns:ee});case Fe.ORDERS:return c.jsx(EI,{userRole:i});case Fe.SCANNER:return c.jsx(_I,{});case Fe.SETTINGS:return c.jsx(SI,{});default:return c.jsx(jm,{onNavigate:x})}};return c.jsxs("div",{className:"flex h-screen bg-[#f0fdf4] font-sans text-foreground overflow-hidden",children:[c.jsxs("aside",{className:"hidden md:flex md:flex-col fixed inset-y-0 left-0 z-30 w-72 bg-white border-r border-emerald-100 shadow-[4px_0_24px_rgba(0,0,0,0.02)]",children:[c.jsx("div",{className:"h-24 flex items-center px-8",children:c.jsxs("h1",{className:"text-2xl font-black tracking-tighter text-[#064e3b] flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-emerald-600 to-[#064e3b] text-white flex items-center justify-center text-xl shadow-lg shadow-emerald-900/20",children:"T"}),"TROS One"]})}),c.jsxs("div",{className:"flex-1 overflow-y-auto py-6 px-4 space-y-2",children:[c.jsx("p",{className:"px-4 text-xs font-extrabold text-emerald-900/30 uppercase tracking-widest mb-4",children:"Main Menu"}),g.filter(se=>!se.role||se.role===i).map(se=>c.jsxs("button",{onClick:()=>x(se.id),className:`w-full flex items-center px-4 py-3.5 text-sm font-bold rounded-2xl transition-all group ${p===se.id?"bg-[#064e3b] text-white shadow-xl shadow-emerald-900/10":"text-gray-500 hover:bg-emerald-50 hover:text-[#064e3b]"}`,children:[c.jsx("span",{className:`mr-3 transition-transform group-hover:scale-110 ${p===se.id?"text-emerald-300":"text-gray-400 group-hover:text-emerald-600"}`,children:se.icon}),se.label]},se.id)),c.jsx("div",{className:"my-8 border-t border-dashed border-emerald-100 mx-4"}),c.jsx("p",{className:"px-4 text-xs font-extrabold text-emerald-900/30 uppercase tracking-widest mb-4",children:"System"}),_.map(se=>c.jsxs("button",{onClick:()=>x(se.id),className:`w-full flex items-center px-4 py-3.5 text-sm font-bold rounded-2xl transition-all group ${p===se.id?"bg-[#064e3b] text-white shadow-xl":"text-gray-500 hover:bg-emerald-50 hover:text-[#064e3b]"}`,children:[c.jsx("span",{className:`mr-3 transition-transform group-hover:scale-110 ${p===se.id?"text-emerald-300":"text-gray-400 group-hover:text-emerald-600"}`,children:se.icon}),se.label]},se.id))]}),c.jsx("div",{className:"p-6",children:c.jsxs("div",{className:"p-4 bg-emerald-50/50 rounded-2xl border border-emerald-100 flex items-center justify-between group cursor-pointer hover:border-emerald-200 transition-colors",onClick:()=>e(),children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-white flex items-center justify-center text-emerald-700 font-bold text-sm shadow-sm border border-emerald-50",children:(le=n==null?void 0:n.email)==null?void 0:le[0].toUpperCase()}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"text-sm font-bold truncate text-[#064e3b]",children:(ue=n==null?void 0:n.email)==null?void 0:ue.split("@")[0]}),c.jsx("p",{className:"text-[10px] text-emerald-600/60 font-bold uppercase tracking-wider",children:i})]})]}),c.jsx($x,{size:18,className:"text-emerald-300 group-hover:text-red-500 transition-colors"})]})})]}),c.jsxs("div",{className:"flex-1 flex flex-col h-full overflow-hidden relative md:ml-72 bg-[#f0fdf4]",children:[c.jsxs("header",{className:"md:hidden px-5 py-3 bg-white/95 backdrop-blur-xl sticky top-0 z-30 flex justify-between items-center border-b border-emerald-50 shadow-sm",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-8 h-8 rounded-lg bg-[#064e3b] text-white flex items-center justify-center font-bold text-lg",children:"T"}),c.jsx("h1",{className:"text-lg font-bold text-[#064e3b] tracking-tight",children:p.charAt(0)+p.slice(1).toLowerCase()})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>x(Fe.SCANNER),className:"p-2 bg-emerald-50 rounded-xl text-emerald-700 hover:bg-emerald-100 active:scale-95 transition-all",children:c.jsx(cd,{size:20})}),c.jsx("button",{className:"w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center text-gray-600 text-xs font-bold border border-gray-200",children:(De=n==null?void 0:n.email)==null?void 0:De[0].toUpperCase()}),c.jsx($x,{onClick:()=>e(),size:18,className:"text-emerald-300 group-hover:text-red-500 transition-colors"})]})]}),c.jsx("main",{className:"flex-1 overflow-y-auto custom-scrollbar pt-0 px-3 md:p-10 pb-20 md:pb-10",children:c.jsx("div",{className:"max-w-[1600px] mx-auto w-full h-full",children:ne()})})]}),c.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 z-50 bg-white border-t border-emerald-50 shadow-[0_-4px_20px_rgba(0,0,0,0.03)] pb-safe",children:c.jsx("div",{className:"flex justify-between items-center h-14 px-2",children:w.map(se=>c.jsxs("button",{onClick:()=>x(se.id),className:"flex-1 flex flex-col items-center justify-center h-full gap-0.5 transition-all active:scale-95 min-w-[3.5rem]",children:[c.jsx("div",{className:`p-1 rounded-xl transition-colors ${p===se.id?"bg-emerald-50 text-[#064e3b]":"text-gray-400"}`,children:Cb.cloneElement(se.icon,{size:18,strokeWidth:p===se.id?2.5:2,fill:p===se.id?"currentColor":"none",className:p===se.id?"fill-emerald-100":""})}),c.jsx("span",{className:`text-[9px] font-bold tracking-tight ${p===se.id?"text-[#064e3b]":"text-gray-400"}`,children:se.label})]},se.id))})})]})},MI=()=>{const{currentUser:i,loading:e}=Ra();return e?c.jsx("div",{className:"h-screen w-full flex items-center justify-center bg-[#f0fdf4] text-emerald-600",children:c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-emerald-200 border-t-emerald-600"})}):i?c.jsx(kI,{}):c.jsx(pI,{})},VI=()=>mg?c.jsx(fI,{children:c.jsx(mI,{children:c.jsx(MI,{})})}):c.jsx(wI,{}),NE=document.getElementById("root");if(!NE)throw new Error("Could not find root element to mount to");const PI=hw.createRoot(NE);PI.render(c.jsx(Cb.StrictMode,{children:c.jsx(VI,{})}));
